{"ast":null,"code":"import _objectSpread from\"/home/diego/ExpoApp/my-app/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import React,{useState,useEffect,useCallback,useRef}from'react';import{initializeApp}from'firebase/app';import{getAuth,signInAnonymously,signInWithCustomToken,onAuthStateChanged,signOut}from'firebase/auth';// Added signInWithCustomToken\nimport{getFirestore,collection,addDoc,getDocs,doc,updateDoc,deleteDoc,onSnapshot,query,where,setDoc}from'firebase/firestore';import{Home,CalendarPlus,MessageSquare,ListChecks,UserCircle,XCircle,Send,PlusCircle,Trash2,LogOut,CheckCircle,AlertTriangle,Info,Settings,Volume2,Eye,Moon,Sun,ZoomIn,ZoomOut}from'lucide-react';import'./App.css';// --- Firebase Configuration ---\n// const firebaseConfig = {\n//   apiKey: \"YOUR_API_KEY\",\n//   authDomain: \"YOUR_AUTH_DOMAIN\",\n//   projectId: \"YOUR_PROJECT_ID\",\n//   storageBucket: \"YOUR_STORAGE_BUCKET\",\n//   messagingSenderId: \"YOUR_MESSAGING_SENDER_ID\",\n//   appId: \"YOUR_APP_ID\"\n// };\nimport{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const firebaseConfig={apiKey:\"AIzaSyC9yqipXCN_ALWZFrFUaBbMG4LznCgt4MM\",authDomain:\"medcare-app-9678b.firebaseapp.com\",projectId:\"medcare-app-9678b\",storageBucket:\"medcare-app-9678b.firebasestorage.app\",messagingSenderId:\"805339182842\",appId:\"1:805339182842:web:c4bab764c2c8b40527bb43\",measurementId:\"G-L8444GNX38\"};// --- Global Firebase Variables (to be provided by the environment) ---\n//const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';\nconst appId='medcare-app-9678b';// const finalFirebaseConfig = typeof __firebase_config !== 'undefined' ? JSON.parse(__firebase_config) : firebaseConfig;\n//const finalFirebaseConfig ='false';\n// --- Initialize Firebase ---\nlet app;let auth;let db;try{//   app = initializeApp(finalFirebaseConfig);\napp=initializeApp(firebaseConfig);auth=getAuth(app);db=getFirestore(app);// import { setLogLevel } from \"firebase/firestore\"; // For debugging\n// setLogLevel('debug');\n}catch(e){console.error(\"Error initializing Firebase:\",e);if(!db){console.warn(\"Firestore (db) is not initialized. App will run with mock data and no persistence.\");}}// Service worker\nif('serviceWorker'in navigator){// Register a service worker hosted at the root of the\n// site using the default scope.\nnavigator.serviceWorker.register('./service-worker.js').then(registration=>{console.log('Service worker registration succeeded:',registration);},/*catch*/error=>{console.error(\"Service worker registration failed: \".concat(error));});}else{console.error('Service workers are not supported.');}// --- Mock Data ---\nconst MOCK_PRESCRIPTIONS=[{id:'p1',name:'Amoxicillin 250mg',dosage:'1 tablet every 8 hours for 7 days',date:'2024-05-20',doctor:'Dr. Smith'},{id:'p2',name:'Ibuprofen 400mg',dosage:'1 tablet as needed for pain',date:'2024-05-15',doctor:'Dr. Jones'},{id:'p3',name:'Metformin 500mg',dosage:'1 tablet twice daily with meals',date:'2024-04-28',doctor:'Dr. Brown'}];const MOCK_DOCTORS=[{id:'doc1',name:'Dr. Emily Carter (Cardiologist)'},{id:'doc2',name:'Dr. John Smith (General Practitioner)'},{id:'doc3',name:'Dr. Sarah Lee (Pediatrician)'}];// --- Helper Components ---\n// Modal Component\nconst Modal=_ref=>{let{isOpen,onClose,title,children,darkMode,highContrast,fontSizeClass}=_ref;if(!isOpen)return null;return/*#__PURE__*/_jsx(\"div\",{className:\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"rounded-lg shadow-xl p-6 w-full max-w-md \".concat(fontSizeClass,\" \").concat(darkMode?'bg-gray-800 text-white':'bg-white text-gray-800',\" \").concat(highContrast?darkMode?'border-2 border-yellow-400':'border-2 border-blue-600':''),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-4\",children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-xl font-semibold \".concat(highContrast&&darkMode?'text-yellow-300':highContrast?'text-blue-700':darkMode?'text-white':'text-gray-800'),children:title}),/*#__PURE__*/_jsx(\"button\",{onClick:onClose,className:\"\".concat(darkMode?'text-gray-300 hover:text-white':'text-gray-500 hover:text-gray-700'),children:/*#__PURE__*/_jsx(XCircle,{size:24})})]}),/*#__PURE__*/_jsx(\"div\",{children:children})]})});};// Notification Component\nconst Notification=_ref2=>{let{message,type,onDismiss,darkMode}=_ref2;if(!message)return null;let bgColor;if(darkMode){bgColor=type==='success'?'bg-green-700':type==='error'?'bg-red-700':'bg-blue-700';}else{bgColor=type==='success'?'bg-green-500':type==='error'?'bg-red-500':'bg-blue-500';}const Icon=type==='success'?CheckCircle:type==='error'?AlertTriangle:Info;return/*#__PURE__*/_jsxs(\"div\",{className:\"fixed top-4 right-4 \".concat(bgColor,\" text-white p-4 rounded-lg shadow-md flex items-center z-[100]\"),children:[/*#__PURE__*/_jsx(Icon,{size:24,className:\"mr-3\"}),/*#__PURE__*/_jsx(\"span\",{children:message}),onDismiss&&/*#__PURE__*/_jsx(\"button\",{onClick:onDismiss,className:\"ml-4 text-white hover:text-gray-200\",children:/*#__PURE__*/_jsx(XCircle,{size:20})})]});};// SpeakButton for TalkBack simulation\nconst SpeakButton=_ref3=>{let{textToSpeak,darkMode,highContrast}=_ref3;const handleSpeak=e=>{e.stopPropagation();// Prevent parent clicks if button is inside another clickable element\nif('speechSynthesis'in window&&textToSpeak){const utterance=new SpeechSynthesisUtterance(textToSpeak);// Optional: Configure voice, rate, pitch\n// utterance.lang = 'en-US';\nwindow.speechSynthesis.cancel();// Cancel any previous speech\nwindow.speechSynthesis.speak(utterance);}else{console.warn(\"Speech synthesis not supported or no text to speak.\");}};return/*#__PURE__*/_jsx(\"button\",{onClick:handleSpeak,\"aria-label\":\"Speak: \".concat(textToSpeak.substring(0,30),\"...\"),title:\"Read aloud\",className:\"ml-2 p-1 rounded \".concat(darkMode?highContrast?'bg-yellow-500 text-black':'bg-gray-600 hover:bg-gray-500':highContrast?'bg-blue-500 text-white':'bg-gray-200 hover:bg-gray-300'),children:/*#__PURE__*/_jsx(Volume2,{size:16})});};// --- Accessibility Settings Modal ---\nconst AccessibilitySettingsModal=_ref4=>{let{isOpen,onClose,settings,updateSettings,darkMode,highContrast,fontSizeClass}=_ref4;const{fontSize,highContrast:hc,darkMode:dm,talkbackEnabled}=settings;const fontSizes=[{label:'Normal',value:'text-base'},{label:'Large',value:'text-lg'},{label:'Extra Large',value:'text-xl'}];return/*#__PURE__*/_jsx(Modal,{isOpen:isOpen,onClose:onClose,title:\"Accessibility Settings\",darkMode:darkMode,highContrast:highContrast,fontSizeClass:fontSizeClass,children:/*#__PURE__*/_jsxs(\"div\",{className:\"space-y-6\",children:[/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-semibold mb-2 \".concat(darkMode?'text-gray-200':'text-gray-700'),children:\"Font Size\"}),/*#__PURE__*/_jsx(\"div\",{className:\"flex space-x-2\",children:fontSizes.map(fs=>/*#__PURE__*/_jsx(\"button\",{onClick:()=>updateSettings('fontSize',fs.value),className:\"px-3 py-1.5 rounded-md text-sm font-medium transition-colors\\n        \".concat(fontSize===fs.value?darkMode?'bg-blue-500 text-white':'bg-blue-600 text-white':darkMode?'bg-gray-700 hover:bg-gray-600 text-gray-300':'bg-gray-200 hover:bg-gray-300 text-gray-700',\"\\n          \").concat(highContrast&&fontSize===fs.value?darkMode?'border-2 border-yellow-400':'border-2 border-blue-800':'',\"\\n          \").concat(highContrast&&fontSize!==fs.value?darkMode?'border border-gray-500':'border border-gray-400':'',\"\\n          \"),children:fs.label},fs.value))})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-semibold mb-2 \".concat(darkMode?'text-gray-200':'text-gray-700'),children:\"Theme\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>updateSettings('darkMode',!dm),className:\"w-full flex items-center justify-center px-4 py-2 rounded-md text-sm font-medium transition-colors\\n      \".concat(dm?highContrast?'bg-gray-900 text-yellow-300 border-2 border-yellow-400':'bg-gray-700 text-white':highContrast?'bg-white text-blue-700 border-2 border-blue-700':'bg-gray-200 text-black',\"\\n      hover:\").concat(dm?highContrast?'bg-gray-800':'bg-gray-600':highContrast?'bg-gray-100':'bg-gray-300',\"\\n      \"),children:[dm?/*#__PURE__*/_jsx(Sun,{size:18,className:\"mr-2\"}):/*#__PURE__*/_jsx(Moon,{size:18,className:\"mr-2\"}),dm?'Switch to Light Mode':'Switch to Dark Mode']})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-semibold mb-2 \".concat(darkMode?'text-gray-200':'text-gray-700'),children:\"Contrast\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>updateSettings('highContrast',!hc),className:\"w-full flex items-center justify-center px-4 py-2 rounded-md text-sm font-medium transition-colors\\n        \".concat(hc?darkMode?'bg-yellow-400 text-black':'bg-blue-600 text-white':darkMode?'bg-gray-700 hover:bg-gray-600 text-gray-300':'bg-gray-200 hover:bg-gray-300 text-gray-700',\"\\n          \").concat(highContrast&&hc?darkMode?'border-2 border-white':'border-2 border-black':'',\"\\n          \"),children:[/*#__PURE__*/_jsx(Eye,{size:18,className:\"mr-2\"}),hc?'Disable High Contrast':'Enable High Contrast']})]}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h4\",{className:\"font-semibold mb-2 \".concat(darkMode?'text-gray-200':'text-gray-700'),children:\"Read Aloud (TalkBack Simulation)\"}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>updateSettings('talkbackEnabled',!talkbackEnabled),className:\"w-full flex items-center justify-center px-4 py-2 rounded-md text-sm font-medium transition-colors\\n            \".concat(talkbackEnabled?darkMode?'bg-green-600 text-white':'bg-green-500 text-white':darkMode?'bg-gray-700 hover:bg-gray-600 text-gray-300':'bg-gray-200 hover:bg-gray-300 text-gray-700',\"\\n              \").concat(highContrast&&talkbackEnabled?darkMode?'border-2 border-white':'border-2 border-black':'',\"\\n              \"),children:[/*#__PURE__*/_jsx(Volume2,{size:18,className:\"mr-2\"}),talkbackEnabled?'Disable Read Aloud Feature':'Enable Read Aloud Feature']}),talkbackEnabled&&/*#__PURE__*/_jsxs(\"p\",{className:\"mt-2 text-xs \".concat(darkMode?'text-gray-400':'text-gray-600'),children:[\"When enabled, look for \",/*#__PURE__*/_jsx(Volume2,{size:12,className:\"inline\"}),\" icons to have text read aloud.\"]})]})]})});};// --- Screen Components (Adapted for Accessibility) ---\nconst HomeScreen=_ref5=>{let{setCurrentPage,userName,userId,accessibilitySettings}=_ref5;return/*#__PURE__*/_jsxs(\"div\",{className:\"p-6 min-h-[calc(100vh-4rem)] flex flex-col justify-center items-center transition-colors duration-300\\n    \".concat(accessibilitySettings.darkMode?'bg-gradient-to-br from-gray-800 to-gray-900 text-white':'bg-gradient-to-br from-blue-500 to-indigo-600 text-white',\"\\n    \").concat(accessibilitySettings.highContrast&&accessibilitySettings.darkMode?'border-2 border-yellow-400':'',\"\\n    \").concat(accessibilitySettings.highContrast&&!accessibilitySettings.darkMode?'bg-white text-black border-2 border-blue-700':'',\"\\n    \"),children:[/*#__PURE__*/_jsx(UserCircle,{size:80,className:\"mb-4 \".concat(accessibilitySettings.darkMode?accessibilitySettings.highContrast?'text-yellow-300':'text-indigo-300':accessibilitySettings.highContrast?'text-blue-700':'text-indigo-200')}),/*#__PURE__*/_jsxs(\"h1\",{className:\"text-3xl font-bold mb-2 \".concat(accessibilitySettings.highContrast&&!accessibilitySettings.darkMode?'text-black':''),children:[\"Welcome, \",userName||'User',\"!\"]}),accessibilitySettings.talkbackEnabled&&/*#__PURE__*/_jsx(SpeakButton,{textToSpeak:\"Welcome, \".concat(userName||'User',\"!\"),darkMode:accessibilitySettings.darkMode,highContrast:accessibilitySettings.highContrast}),/*#__PURE__*/_jsxs(\"p\",{className:\"mb-1 text-sm \".concat(accessibilitySettings.darkMode?accessibilitySettings.highContrast?'text-yellow-200':'text-indigo-100':accessibilitySettings.highContrast?'text-gray-700':'text-indigo-100'),children:[\"User ID: \",/*#__PURE__*/_jsx(\"span\",{className:\"font-mono px-1 rounded \".concat(accessibilitySettings.darkMode?accessibilitySettings.highContrast?'bg-yellow-600 text-black':'bg-gray-700':accessibilitySettings.highContrast?'bg-blue-200 text-black':'bg-indigo-700'),children:userId||'N/A'})]}),/*#__PURE__*/_jsx(\"p\",{className:\"mb-6 text-center \".concat(accessibilitySettings.darkMode?accessibilitySettings.highContrast?'text-yellow-200':'text-indigo-100':accessibilitySettings.highContrast?'text-gray-700':'text-indigo-100'),children:\"Your personal health assistant. Ready to help you manage your medical needs.\"}),accessibilitySettings.talkbackEnabled&&/*#__PURE__*/_jsx(SpeakButton,{textToSpeak:\"Your personal health assistant. Ready to help you manage your medical needs.\",darkMode:accessibilitySettings.darkMode,highContrast:accessibilitySettings.highContrast}),/*#__PURE__*/_jsxs(\"div\",{className:\"grid grid-cols-2 gap-4 w-full max-w-md\",children:[[{page:'myAppointments',label:'My Appointments',icon:ListChecks},{page:'chat',label:'Chat with Doctor',icon:MessageSquare},{page:'prescriptions',label:'View Prescriptions',icon:ListChecks}].map(item=>/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setCurrentPage(item.page),className:\"p-4 rounded-lg shadow-md transition-all flex flex-col items-center justify-center aspect-square\\n        \".concat(accessibilitySettings.darkMode?accessibilitySettings.highContrast?'bg-black text-yellow-300 border border-yellow-400 hover:bg-gray-900':'bg-gray-700 text-indigo-300 hover:bg-gray-600':accessibilitySettings.highContrast?'bg-white text-blue-700 border border-blue-700 hover:bg-blue-50':'bg-white text-blue-600 hover:bg-blue-50',\"\\n          \"),children:[/*#__PURE__*/_jsx(item.icon,{size:32,className:\"mb-2\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold text-center\",children:item.label}),accessibilitySettings.talkbackEnabled&&/*#__PURE__*/_jsx(SpeakButton,{textToSpeak:item.label,darkMode:accessibilitySettings.darkMode,highContrast:accessibilitySettings.highContrast})]},item.page)),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setCurrentPage('makeAppointment')// Kept separate if logic differs, or merge if identical to 'My Appointments' button\n,className:\"p-4 rounded-lg shadow-md transition-all flex flex-col items-center justify-center aspect-square\\n      \".concat(accessibilitySettings.darkMode?accessibilitySettings.highContrast?'bg-black text-yellow-300 border border-yellow-400 hover:bg-gray-900':'bg-gray-700 text-indigo-300 hover:bg-gray-600':accessibilitySettings.highContrast?'bg-white text-blue-700 border border-blue-700 hover:bg-blue-50':'bg-white text-blue-600 hover:bg-blue-50',\"\\n        \"),children:[/*#__PURE__*/_jsx(CalendarPlus,{size:32,className:\"mb-2\"}),/*#__PURE__*/_jsx(\"span\",{className:\"font-semibold text-center\",children:\"Make Appointment\"}),accessibilitySettings.talkbackEnabled&&/*#__PURE__*/_jsx(SpeakButton,{textToSpeak:\"Make Appointment\",darkMode:accessibilitySettings.darkMode,highContrast:accessibilitySettings.highContrast})]})]})]});};const AppointmentsScreen=_ref6=>{var _MOCK_DOCTORS$;let{userId,showNotification,accessibilitySettings}=_ref6;const[appointments,setAppointments]=useState([]);const[isLoading,setIsLoading]=useState(true);const[isModalOpen,setIsModalOpen]=useState(false);const[confirmCancelModal,setConfirmCancelModal]=useState({isOpen:false,appointmentId:null});const[doctor,setDoctor]=useState(((_MOCK_DOCTORS$=MOCK_DOCTORS[0])===null||_MOCK_DOCTORS$===void 0?void 0:_MOCK_DOCTORS$.id)||'');const[date,setDate]=useState('');const[time,setTime]=useState('');const[reason,setReason]=useState('');const appointmentsCollectionPath=\"artifacts/\".concat(appId,\"/users/\").concat(userId,\"/appointments\");useEffect(()=>{if(!db||!userId){console.log(\"Using mock appointments as db or userId is not available.\");setAppointments([{id:'apt1',doctor:'Dr. Emily Carter',date:'2024-06-10',time:'10:00 AM',reason:'Check-up',status:'Scheduled'},{id:'apt2',doctor:'Dr. John Smith',date:'2024-06-15',time:'02:30 PM',reason:'Follow-up',status:'Scheduled'}]);setIsLoading(false);return;}setIsLoading(true);const q=query(collection(db,appointmentsCollectionPath));const unsubscribe=onSnapshot(q,querySnapshot=>{const userAppointments=[];querySnapshot.forEach(doc=>{userAppointments.push(_objectSpread({id:doc.id},doc.data()));});userAppointments.sort((a,b)=>new Date(\"\".concat(a.date,\" \").concat(a.time))-new Date(\"\".concat(b.date,\" \").concat(b.time)));setAppointments(userAppointments);setIsLoading(false);},error=>{console.error(\"Error fetching appointments: \",error);showNotification(\"Error fetching appointments.\",\"error\");setIsLoading(false);});return()=>unsubscribe();},[userId,showNotification,appointmentsCollectionPath]);const handleMakeAppointment=async e=>{var _MOCK_DOCTORS$find;e.preventDefault();if(!db||!userId){showNotification(\"Database not available.\",\"error\");return;}if(!doctor||!date||!time||!reason){showNotification(\"Please fill all fields.\",\"error\");return;}const newAppointment={doctor:((_MOCK_DOCTORS$find=MOCK_DOCTORS.find(d=>d.id===doctor))===null||_MOCK_DOCTORS$find===void 0?void 0:_MOCK_DOCTORS$find.name)||doctor,date,time,reason,status:'Scheduled',createdAt:new Date().toISOString()};try{var _MOCK_DOCTORS$2;await addDoc(collection(db,appointmentsCollectionPath),newAppointment);showNotification(\"Appointment booked successfully!\",\"success\");setDoctor(((_MOCK_DOCTORS$2=MOCK_DOCTORS[0])===null||_MOCK_DOCTORS$2===void 0?void 0:_MOCK_DOCTORS$2.id)||'');setDate('');setTime('');setReason('');setIsModalOpen(false);}catch(error){console.error(\"Error adding appointment: \",error);showNotification(\"Failed to book appointment.\",\"error\");}};const confirmCancel=appointmentId=>{setConfirmCancelModal({isOpen:true,appointmentId});};const executeCancelAppointment=async()=>{const appointmentId=confirmCancelModal.appointmentId;if(!db||!userId||!appointmentId){showNotification(\"Database not available or invalid request.\",\"error\");setConfirmCancelModal({isOpen:false,appointmentId:null});return;}try{const appointmentRef=doc(db,appointmentsCollectionPath,appointmentId);await updateDoc(appointmentRef,{status:'Cancelled'});showNotification(\"Appointment cancelled successfully.\",\"success\");}catch(error){console.error(\"Error cancelling appointment: \",error);showNotification(\"Failed to cancel appointment.\",\"error\");}setConfirmCancelModal({isOpen:false,appointmentId:null});};const{darkMode,highContrast,talkbackEnabled,fontSize}=accessibilitySettings;return/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 min-h-[calc(100vh-4rem)] \".concat(darkMode?'bg-gray-800 text-gray-200':'bg-gray-100 text-gray-800',\" \").concat(highContrast&&darkMode?'border border-yellow-400':'',\" \").concat(highContrast&&!darkMode?'border border-blue-600':''),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-between items-center mb-6\",children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-semibold \".concat(highContrast&&darkMode?'text-yellow-300':highContrast?'text-blue-700':''),children:\"My Appointments\"}),talkbackEnabled&&/*#__PURE__*/_jsx(SpeakButton,{textToSpeak:\"My Appointments page.\",darkMode:darkMode,highContrast:highContrast}),/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setIsModalOpen(true),className:\"font-semibold py-2 px-4 rounded-lg shadow-md flex items-center\\n      \".concat(darkMode?highContrast?'bg-yellow-500 text-black hover:bg-yellow-600':'bg-blue-600 hover:bg-blue-700 text-white':highContrast?'bg-blue-700 text-white hover:bg-blue-800':'bg-blue-500 hover:bg-blue-600 text-white',\"\\n      \"),children:[/*#__PURE__*/_jsx(PlusCircle,{size:20,className:\"mr-2\"}),\"New Appointment\"]})]}),isLoading?/*#__PURE__*/_jsx(\"p\",{className:\"\".concat(darkMode?'text-gray-400':'text-gray-600'),children:\"Loading appointments...\"}):appointments.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"\".concat(darkMode?'text-gray-400':'text-gray-600',\" text-center py-8\"),children:\"You have no upcoming appointments.\"}):/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:appointments.map(apt=>/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 rounded-lg shadow-md\\n            \".concat(apt.status==='Cancelled'?darkMode?'bg-gray-700 opacity-70':'bg-gray-200 opacity-70':darkMode?'bg-gray-700':'bg-white',\"\\n            \").concat(highContrast&&darkMode?'border border-yellow-300':'',\"\\n            \").concat(highContrast&&!darkMode&&apt.status!=='Cancelled'?'border border-blue-500':'',\"\\n            \").concat(highContrast&&!darkMode&&apt.status==='Cancelled'?'border border-gray-400':'',\"\\n            \"),children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold \".concat(darkMode?highContrast?'text-yellow-300':'text-blue-400':highContrast?'text-blue-700':'text-blue-600'),children:apt.doctor}),talkbackEnabled&&/*#__PURE__*/_jsx(SpeakButton,{textToSpeak:\"Appointment with \".concat(apt.doctor),darkMode:darkMode,highContrast:highContrast}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Date:\"}),\" \",apt.date,\" \",talkbackEnabled&&/*#__PURE__*/_jsx(SpeakButton,{textToSpeak:\"Date \".concat(apt.date),darkMode:darkMode,highContrast:highContrast})]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Time:\"}),\" \",apt.time,\" \",talkbackEnabled&&/*#__PURE__*/_jsx(SpeakButton,{textToSpeak:\"Time \".concat(apt.time),darkMode:darkMode,highContrast:highContrast})]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Reason:\"}),\" \",apt.reason,\" \",talkbackEnabled&&/*#__PURE__*/_jsx(SpeakButton,{textToSpeak:\"Reason \".concat(apt.reason),darkMode:darkMode,highContrast:highContrast})]}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Status:\"}),\" \",/*#__PURE__*/_jsx(\"span\",{className:\"\".concat(apt.status==='Cancelled'?darkMode?'text-red-400':'text-red-500':darkMode?'text-green-400':'text-green-500'),children:apt.status}),\" \",talkbackEnabled&&/*#__PURE__*/_jsx(SpeakButton,{textToSpeak:\"Status \".concat(apt.status),darkMode:darkMode,highContrast:highContrast})]}),apt.status!=='Cancelled'&&/*#__PURE__*/_jsxs(\"button\",{onClick:()=>confirmCancel(apt.id),className:\"mt-3 font-semibold py-1 px-3 rounded-md text-sm flex items-center\\n                \".concat(darkMode?highContrast?'bg-red-500 text-black hover:bg-red-600':'bg-red-600 hover:bg-red-700 text-white':highContrast?'bg-red-700 text-white hover:bg-red-800':'bg-red-500 hover:bg-red-600 text-white',\"\\n                \"),children:[/*#__PURE__*/_jsx(Trash2,{size:16,className:\"mr-1\"}),\"Cancel\"]})]},apt.id))}),/*#__PURE__*/_jsx(Modal,{isOpen:isModalOpen,onClose:()=>setIsModalOpen(false),title:\"Book a New Appointment\",darkMode:darkMode,highContrast:highContrast,fontSizeClass:accessibilitySettings.fontSize,children:/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleMakeAppointment,className:\"space-y-4\",children:[['doctor','date','time','reason'].map(field=>/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:field,className:\"block text-sm font-medium \".concat(darkMode?'text-gray-300':'text-gray-700',\" \").concat(highContrast&&darkMode?'text-yellow-200':''),children:field.charAt(0).toUpperCase()+field.slice(1).replace('rV','r V')}),field==='doctor'?/*#__PURE__*/_jsx(\"select\",{id:\"doctor\",value:doctor,onChange:e=>setDoctor(e.target.value),className:\"mt-1 block w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none sm:text-sm \".concat(darkMode?'bg-gray-700 border-gray-600 text-white focus:ring-blue-500 focus:border-blue-500':'border-gray-300 focus:ring-blue-500 focus:border-blue-500',\" \").concat(highContrast?darkMode?'border-yellow-400':'border-blue-600':''),children:MOCK_DOCTORS.map(doc=>/*#__PURE__*/_jsx(\"option\",{value:doc.id,children:doc.name},doc.id))}):field==='reason'?/*#__PURE__*/_jsx(\"textarea\",{id:\"reason\",rows:\"3\",value:reason,onChange:e=>setReason(e.target.value),placeholder:\"e.g., Annual check-up\",className:\"mt-1 block w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none sm:text-sm \".concat(darkMode?'bg-gray-700 border-gray-600 text-white focus:ring-blue-500 focus:border-blue-500':'border-gray-300 focus:ring-blue-500 focus:border-blue-500',\" \").concat(highContrast?darkMode?'border-yellow-400':'border-blue-600':'')}):/*#__PURE__*/_jsx(\"input\",{type:field,id:field,value:field==='date'?date:time,onChange:e=>field==='date'?setDate(e.target.value):setTime(e.target.value),min:field==='date'?new Date().toISOString().split('T')[0]:undefined,className:\"mt-1 block w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none sm:text-sm \".concat(darkMode?'bg-gray-700 border-gray-600 text-white focus:ring-blue-500 focus:border-blue-500':'border-gray-300 focus:ring-blue-500 focus:border-blue-500',\" \").concat(highContrast?darkMode?'border-yellow-400':'border-blue-600':'')})]},field)),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"w-full font-semibold py-2 px-4 rounded-lg shadow-md flex items-center justify-center \".concat(darkMode?highContrast?'bg-yellow-500 text-black hover:bg-yellow-600':'bg-blue-600 hover:bg-blue-700 text-white':highContrast?'bg-blue-700 text-white hover:bg-blue-800':'bg-blue-500 hover:bg-blue-600 text-white'),children:\"Confirm Appointment\"})]})}),/*#__PURE__*/_jsxs(Modal,{isOpen:confirmCancelModal.isOpen,onClose:()=>setConfirmCancelModal({isOpen:false,appointmentId:null}),title:\"Confirm Cancellation\",darkMode:darkMode,highContrast:highContrast,fontSizeClass:accessibilitySettings.fontSize,children:[/*#__PURE__*/_jsx(\"p\",{className:\"\".concat(darkMode?'text-gray-300':'text-gray-700',\" mb-4\"),children:\"Are you sure you want to cancel this appointment?\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex justify-end space-x-3\",children:[/*#__PURE__*/_jsx(\"button\",{onClick:()=>setConfirmCancelModal({isOpen:false,appointmentId:null}),className:\"px-4 py-2 rounded-md text-sm font-medium \".concat(darkMode?'bg-gray-600 hover:bg-gray-500 text-white':'bg-gray-300 hover:bg-gray-400 text-black'),children:\"No, Keep It\"}),/*#__PURE__*/_jsx(\"button\",{onClick:executeCancelAppointment,className:\"px-4 py-2 rounded-md text-sm font-medium \".concat(darkMode?highContrast?'bg-red-500 text-black hover:bg-red-600':'bg-red-600 hover:bg-red-700 text-white':highContrast?'bg-red-700 text-white hover:bg-red-800':'bg-red-500 hover:bg-red-600 text-white'),children:\"Yes, Cancel\"})]})]})]});};const ChatScreen=_ref7=>{var _MOCK_DOCTORS$3;let{userId,showNotification,accessibilitySettings}=_ref7;const[messages,setMessages]=useState([{id:'m1',text:'Hello! How can I help you today?',sender:'doctor',time:'10:00 AM'},{id:'m2',text:'I have a slight fever and a headache.',sender:'user',time:'10:01 AM'}]);const[newMessage,setNewMessage]=useState('');const[selectedDoctor,setSelectedDoctor]=useState(((_MOCK_DOCTORS$3=MOCK_DOCTORS[0])===null||_MOCK_DOCTORS$3===void 0?void 0:_MOCK_DOCTORS$3.id)||'');const messagesEndRef=useRef(null);// For scrolling to bottom\nconst{darkMode,highContrast,talkbackEnabled}=accessibilitySettings;useEffect(()=>{var _messagesEndRef$curre;// Scroll to bottom when new messages arrive\n(_messagesEndRef$curre=messagesEndRef.current)===null||_messagesEndRef$curre===void 0?void 0:_messagesEndRef$curre.scrollIntoView({behavior:\"smooth\"});},[messages]);const handleSendMessage=async e=>{e.preventDefault();if(!newMessage.trim())return;const messageData={text:newMessage,sender:'user',time:new Date().toLocaleTimeString([],{hour:'2-digit',minute:'2-digit'}),createdAt:new Date().toISOString(),userId:userId,doctorId:selectedDoctor};setMessages(prevMessages=>[...prevMessages,_objectSpread(_objectSpread({},messageData),{},{id:\"m\".concat(prevMessages.length+1)})]);setNewMessage('');setTimeout(()=>{setMessages(prev=>[...prev,{id:\"m\".concat(prev.length+1),text:\"Okay, I understand. Can you tell me more about your symptoms?\",sender:'doctor',time:new Date().toLocaleTimeString([],{hour:'2-digit',minute:'2-digit'})}]);},1500);};return/*#__PURE__*/_jsxs(\"div\",{className:\"flex flex-col h-[calc(100vh-4rem)] transition-colors duration-300 \".concat(darkMode?'bg-gray-900':'bg-gray-50',\" \").concat(highContrast&&darkMode?'border border-yellow-400':'',\" \").concat(highContrast&&!darkMode?'border border-blue-600':''),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 border-b shadow-sm \".concat(darkMode?'bg-gray-800 border-gray-700':'bg-white border-gray-200',\" \").concat(highContrast&&darkMode?'border-b-yellow-400':'',\" \").concat(highContrast&&!darkMode?'border-b-blue-600':''),children:[/*#__PURE__*/_jsx(\"label\",{htmlFor:\"doctorSelect\",className:\"text-sm font-medium mr-2 \".concat(darkMode?'text-gray-300':'text-gray-700',\" \").concat(highContrast&&darkMode?'text-yellow-200':''),children:\"Chat with:\"}),/*#__PURE__*/_jsx(\"select\",{id:\"doctorSelect\",value:selectedDoctor,onChange:e=>setSelectedDoctor(e.target.value),className:\"p-2 border rounded-md focus:outline-none \".concat(darkMode?'bg-gray-700 border-gray-600 text-white focus:ring-blue-500 focus:border-blue-500':'border-gray-300 focus:ring-blue-500 focus:border-blue-500',\" \").concat(highContrast?darkMode?'border-yellow-400':'border-blue-600':''),children:MOCK_DOCTORS.map(doc=>/*#__PURE__*/_jsx(\"option\",{value:doc.id,children:doc.name},doc.id))})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex-grow p-4 space-y-4 overflow-y-auto\",children:[messages.map(msg=>/*#__PURE__*/_jsx(\"div\",{className:\"flex \".concat(msg.sender==='user'?'justify-end':'justify-start'),children:/*#__PURE__*/_jsxs(\"div\",{className:\"max-w-xs lg:max-w-md px-4 py-2 rounded-xl shadow\\n        \".concat(msg.sender==='user'?darkMode?highContrast?'bg-blue-700 text-white rounded-br-none border border-white':'bg-blue-600 text-white rounded-br-none':highContrast?'bg-blue-600 text-white rounded-br-none border border-black':'bg-blue-500 text-white rounded-br-none':darkMode?highContrast?'bg-black text-yellow-300 rounded-bl-none border border-yellow-400':'bg-gray-700 text-gray-200 rounded-bl-none':highContrast?'bg-gray-300 text-black rounded-bl-none border border-black':'bg-gray-200 text-gray-800 rounded-bl-none',\"\\n        \"),children:[/*#__PURE__*/_jsxs(\"p\",{children:[msg.text,\" \",talkbackEnabled&&/*#__PURE__*/_jsx(SpeakButton,{textToSpeak:msg.text,darkMode:darkMode,highContrast:highContrast})]}),/*#__PURE__*/_jsx(\"p\",{className:\"text-xs mt-1 \".concat(msg.sender==='user'?darkMode?'text-blue-200 text-right':'text-blue-100 text-right':darkMode?'text-gray-400 text-left':'text-gray-500 text-left'),children:msg.time})]})},msg.id)),/*#__PURE__*/_jsx(\"div\",{ref:messagesEndRef})]}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSendMessage,className:\"p-4 border-t flex items-center \".concat(darkMode?'bg-gray-800 border-gray-700':'bg-white border-gray-200',\" \").concat(highContrast&&darkMode?'border-t-yellow-400':'',\" \").concat(highContrast&&!darkMode?'border-t-blue-600':''),children:[/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newMessage,onChange:e=>setNewMessage(e.target.value),placeholder:\"Type your message...\",className:\"flex-grow p-3 border rounded-l-lg focus:outline-none focus:ring-2 \".concat(darkMode?'bg-gray-700 border-gray-600 text-white placeholder-gray-400 focus:ring-blue-500':'border-gray-300 placeholder-gray-500 focus:ring-blue-400',\" \").concat(highContrast?darkMode?'border-yellow-400 focus:ring-yellow-300':'border-blue-600 focus:ring-blue-500':'')}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"p-3 rounded-r-lg focus:outline-none focus:ring-2\\n      \".concat(darkMode?highContrast?'bg-yellow-500 text-black hover:bg-yellow-600 focus:ring-yellow-300':'bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500':highContrast?'bg-blue-700 text-white hover:bg-blue-800 focus:ring-blue-600':'bg-blue-500 text-white hover:bg-blue-600 focus:ring-blue-400',\"\\n      \"),children:/*#__PURE__*/_jsx(Send,{size:24})})]})]});};const PrescriptionsScreen=_ref8=>{let{userId,showNotification,accessibilitySettings}=_ref8;const[prescriptions,setPrescriptions]=useState([]);const[isLoading,setIsLoading]=useState(true);const{darkMode,highContrast,talkbackEnabled}=accessibilitySettings;useEffect(()=>{setIsLoading(true);// Simulate fetching data (using mock for now)\n// TODO: Replace with Firestore fetching if needed\nsetPrescriptions(MOCK_PRESCRIPTIONS);setIsLoading(false);},[userId]);if(isLoading){return/*#__PURE__*/_jsx(\"p\",{className:\"p-6 \".concat(darkMode?'text-gray-400':'text-gray-600'),children:\"Loading prescriptions...\"});}return/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 min-h-[calc(100vh-4rem)] \".concat(darkMode?'bg-gray-800 text-gray-200':'bg-gray-100 text-gray-800',\" \").concat(highContrast&&darkMode?'border border-yellow-400':'',\" \").concat(highContrast&&!darkMode?'border border-blue-600':''),children:[/*#__PURE__*/_jsx(\"h2\",{className:\"text-2xl font-semibold mb-6 \".concat(highContrast&&darkMode?'text-yellow-300':highContrast?'text-blue-700':''),children:\"My Prescriptions\"}),talkbackEnabled&&/*#__PURE__*/_jsx(SpeakButton,{textToSpeak:\"My Prescriptions page.\",darkMode:darkMode,highContrast:highContrast}),prescriptions.length===0?/*#__PURE__*/_jsx(\"p\",{className:\"\".concat(darkMode?'text-gray-400':'text-gray-600',\" text-center py-8\"),children:\"You have no prescriptions on file.\"}):/*#__PURE__*/_jsx(\"div\",{className:\"space-y-4\",children:prescriptions.map(rx=>/*#__PURE__*/_jsxs(\"div\",{className:\"p-4 rounded-lg shadow-md\\n          \".concat(darkMode?'bg-gray-700 border-l-4 border-green-500':'bg-white border-l-4 border-green-500',\"\\n          \").concat(highContrast&&darkMode?'border-yellow-300 border-l-yellow-400':'',\"\\n          \").concat(highContrast&&!darkMode?'border-blue-500 border-l-blue-700':'',\"\\n          \"),children:[/*#__PURE__*/_jsx(\"h3\",{className:\"text-lg font-semibold \".concat(darkMode?highContrast?'text-yellow-300':'text-green-400':highContrast?'text-blue-700':'text-green-700'),children:rx.name}),talkbackEnabled&&/*#__PURE__*/_jsx(SpeakButton,{textToSpeak:\"Prescription: \".concat(rx.name),darkMode:darkMode,highContrast:highContrast}),/*#__PURE__*/_jsxs(\"p\",{children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Dosage:\"}),\" \",rx.dosage,\" \",talkbackEnabled&&/*#__PURE__*/_jsx(SpeakButton,{textToSpeak:\"Dosage \".concat(rx.dosage),darkMode:darkMode,highContrast:highContrast})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm \".concat(darkMode?'text-gray-400':'text-gray-600'),children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Prescribed on:\"}),\" \",rx.date,\" \",talkbackEnabled&&/*#__PURE__*/_jsx(SpeakButton,{textToSpeak:\"Prescribed on \".concat(rx.date),darkMode:darkMode,highContrast:highContrast})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-sm \".concat(darkMode?'text-gray-400':'text-gray-600'),children:[/*#__PURE__*/_jsx(\"strong\",{children:\"Prescribed by:\"}),\" \",rx.doctor,\" \",talkbackEnabled&&/*#__PURE__*/_jsx(SpeakButton,{textToSpeak:\"Prescribed by \".concat(rx.doctor),darkMode:darkMode,highContrast:highContrast})]})]},rx.id))})]});};// --- Main App Component ---\nconst App=()=>{const[currentPage,setCurrentPage]=useState('home');const[currentUser,setCurrentUser]=useState(null);const[isAuthReady,setIsAuthReady]=useState(false);const[userName,setUserName]=useState('');const[notification,setNotification]=useState({message:'',type:''});const[isSettingsModalOpen,setIsSettingsModalOpen]=useState(false);// Accessibility Settings State\nconst[accessibilitySettings,setAccessibilitySettings]=useState({fontSize:'text-base',// Tailwind classes: text-sm, text-base, text-lg, text-xl, text-2xl\nhighContrast:false,darkMode:false,talkbackEnabled:false// For simulated TalkBack feature\n});// Load settings from localStorage\nuseEffect(()=>{const savedSettings=localStorage.getItem('medicAssistAccessibilitySettings');if(savedSettings){setAccessibilitySettings(JSON.parse(savedSettings));}},[]);// Save settings to localStorage and apply dark mode\nuseEffect(()=>{localStorage.setItem('medicAssistAccessibilitySettings',JSON.stringify(accessibilitySettings));if(accessibilitySettings.darkMode){document.documentElement.classList.add('dark');}else{document.documentElement.classList.remove('dark');}},[accessibilitySettings]);const updateAccessibilitySetting=(key,value)=>{setAccessibilitySettings(prev=>_objectSpread(_objectSpread({},prev),{},{[key]:value}));};const showNotification=useCallback(function(message){let type=arguments.length>1&&arguments[1]!==undefined?arguments[1]:'info';let duration=arguments.length>2&&arguments[2]!==undefined?arguments[2]:3000;setNotification({message,type});setTimeout(()=>setNotification({message:'',type:''}),duration);},[]);useEffect(()=>{if(!auth){console.warn(\"Firebase Auth is not initialized.\");setIsAuthReady(true);return;}const unsubscribe=onAuthStateChanged(auth,async user=>{if(user){setCurrentUser(user);setUserName(user.displayName||\"User-\".concat(user.uid.substring(0,5)));}else{setCurrentUser(null);setUserName('');try{let __initial_auth_token='undefined';if(typeof __initial_auth_token!=='undefined'&&__initial_auth_token){await signInWithCustomToken(auth,__initial_auth_token);}else{await signInAnonymously(auth);}}catch(error){console.error(\"Error during auto sign-in:\",error);showNotification(\"Authentication issue. Some features might be limited.\",\"error\");}}setIsAuthReady(true);});return()=>unsubscribe();},[showNotification]);const handleSignOut=async()=>{if(!auth){showNotification(\"Auth service not available.\",\"error\");return;}try{await signOut(auth);setCurrentPage('home');showNotification(\"Signed out successfully.\",\"success\");}catch(error){console.error(\"Error signing out:\",error);showNotification(\"Error signing out.\",\"error\");}};const renderPage=()=>{if(!isAuthReady){return/*#__PURE__*/_jsx(\"div\",{className:\"flex justify-center items-center h-screen \".concat(accessibilitySettings.fontSize,\" \").concat(accessibilitySettings.darkMode?'bg-gray-900 text-white':'bg-gray-100 text-black'),children:/*#__PURE__*/_jsx(\"p\",{children:\"Initializing App...\"})});}const userId=currentUser?currentUser.uid:null;const commonProps={userId,showNotification,accessibilitySettings};switch(currentPage){case'home':return/*#__PURE__*/_jsx(HomeScreen,_objectSpread({setCurrentPage:setCurrentPage,userName:userName},commonProps));case'makeAppointment':// Fallthrough to myAppointments for now\ncase'myAppointments':return/*#__PURE__*/_jsx(AppointmentsScreen,_objectSpread({},commonProps));case'chat':return/*#__PURE__*/_jsx(ChatScreen,_objectSpread({},commonProps));case'prescriptions':return/*#__PURE__*/_jsx(PrescriptionsScreen,_objectSpread({},commonProps));default:return/*#__PURE__*/_jsx(HomeScreen,_objectSpread({setCurrentPage:setCurrentPage,userName:userName},commonProps));}};const NavItem=_ref9=>{let{page,label,icon:IconComponent}=_ref9;return/*#__PURE__*/_jsxs(\"button\",{onClick:()=>setCurrentPage(page),className:\"flex flex-col items-center justify-center p-2 w-full transition-colors duration-200 ease-in-out\\n      \".concat(accessibilitySettings.fontSize,\"\\n      \").concat(currentPage===page?accessibilitySettings.darkMode?accessibilitySettings.highContrast?'text-yellow-300':'text-blue-400':accessibilitySettings.highContrast?'text-blue-700 font-bold':'text-blue-500':accessibilitySettings.darkMode?accessibilitySettings.highContrast?'text-gray-400 hover:text-yellow-200':'text-gray-400 hover:text-blue-300':accessibilitySettings.highContrast?'text-gray-600 hover:text-blue-600':'text-gray-500 hover:text-blue-400',\"\\n      \"),children:[/*#__PURE__*/_jsx(IconComponent,{size:24,strokeWidth:currentPage===page?2.5:2}),/*#__PURE__*/_jsx(\"span\",{className:\"text-xs mt-1\",children:label})]});};// Apply base font size and high contrast classes to the main container\n// Dark mode is applied to documentElement\nlet appClasses=\"font-sans antialiased flex flex-col min-h-screen transition-colors duration-300 \".concat(accessibilitySettings.fontSize);if(accessibilitySettings.darkMode){appClasses+=accessibilitySettings.highContrast?' bg-black text-yellow-300':' bg-gray-900 text-gray-200';}else{appClasses+=accessibilitySettings.highContrast?' bg-white text-black border-2 border-blue-900':' bg-gray-100 text-gray-800';}return/*#__PURE__*/_jsxs(\"div\",{className:appClasses,children:[/*#__PURE__*/_jsx(Notification,{message:notification.message,type:notification.type,onDismiss:()=>setNotification({message:'',type:''}),darkMode:accessibilitySettings.darkMode}),/*#__PURE__*/_jsxs(\"header\",{className:\"p-4 shadow-md flex justify-between items-center sticky top-0 z-40\\n      \".concat(accessibilitySettings.darkMode?accessibilitySettings.highContrast?'bg-black text-yellow-300 border-b-2 border-yellow-400':'bg-gray-800 text-white':accessibilitySettings.highContrast?'bg-white text-blue-700 border-b-2 border-blue-700':'bg-blue-600 text-white',\"\\n        \"),children:[/*#__PURE__*/_jsx(\"h1\",{className:\"text-xl font-semibold\",children:\"Medic Assist\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"flex items-center space-x-2\",children:[currentUser&&/*#__PURE__*/_jsxs(\"button\",{onClick:handleSignOut,className:\"text-sm flex items-center p-2 rounded-md\\n            \".concat(accessibilitySettings.darkMode?accessibilitySettings.highContrast?'hover:bg-yellow-700 text-yellow-300 border border-yellow-300':'hover:bg-gray-700 text-gray-300':accessibilitySettings.highContrast?'hover:bg-blue-200 text-blue-700 border border-blue-700':'hover:bg-blue-700 text-blue-100',\"\\n              \"),children:[/*#__PURE__*/_jsx(LogOut,{size:18,className:\"mr-1\"}),\" Sign Out\"]}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setIsSettingsModalOpen(true),\"aria-label\":\"Open accessibility settings\",className:\"p-2 rounded-md\\n          \".concat(accessibilitySettings.darkMode?accessibilitySettings.highContrast?'hover:bg-yellow-700 text-yellow-300':'hover:bg-gray-700 text-gray-300':accessibilitySettings.highContrast?'hover:bg-blue-200 text-blue-700':'hover:bg-blue-700 text-blue-100',\"\\n            \"),children:/*#__PURE__*/_jsx(Settings,{size:22})})]})]}),/*#__PURE__*/_jsx(\"main\",{className:\"flex-grow overflow-y-auto\",children:renderPage()}),/*#__PURE__*/_jsxs(\"nav\",{className:\"fixed bottom-0 left-0 right-0 border-t shadow-t-md flex justify-around items-center h-16 z-40\\n              \".concat(accessibilitySettings.darkMode?accessibilitySettings.highContrast?'bg-black border-t-yellow-400':'bg-gray-800 border-gray-700':accessibilitySettings.highContrast?'bg-white border-t-blue-700':'bg-white border-gray-200',\"\\n                \"),children:[/*#__PURE__*/_jsx(NavItem,{page:\"home\",label:\"Home\",icon:Home}),/*#__PURE__*/_jsx(NavItem,{page:\"myAppointments\",label:\"Appointments\",icon:CalendarPlus}),/*#__PURE__*/_jsx(NavItem,{page:\"chat\",label:\"Chat\",icon:MessageSquare}),/*#__PURE__*/_jsx(NavItem,{page:\"prescriptions\",label:\"Prescriptions\",icon:ListChecks})]}),/*#__PURE__*/_jsx(\"div\",{className:\"h-16\"}),\" \",/*#__PURE__*/_jsx(AccessibilitySettingsModal,{isOpen:isSettingsModalOpen,onClose:()=>setIsSettingsModalOpen(false),settings:accessibilitySettings,updateSettings:updateAccessibilitySetting,darkMode:accessibilitySettings.darkMode,highContrast:accessibilitySettings.highContrast,fontSizeClass:accessibilitySettings.fontSize})]});};export default App;","map":{"version":3,"names":["React","useState","useEffect","useCallback","useRef","initializeApp","getAuth","signInAnonymously","signInWithCustomToken","onAuthStateChanged","signOut","getFirestore","collection","addDoc","getDocs","doc","updateDoc","deleteDoc","onSnapshot","query","where","setDoc","Home","CalendarPlus","MessageSquare","ListChecks","UserCircle","XCircle","Send","PlusCircle","Trash2","LogOut","CheckCircle","AlertTriangle","Info","Settings","Volume2","Eye","Moon","Sun","ZoomIn","ZoomOut","jsx","_jsx","jsxs","_jsxs","firebaseConfig","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","measurementId","app","auth","db","e","console","error","warn","navigator","serviceWorker","register","then","registration","log","concat","MOCK_PRESCRIPTIONS","id","name","dosage","date","doctor","MOCK_DOCTORS","Modal","_ref","isOpen","onClose","title","children","darkMode","highContrast","fontSizeClass","className","onClick","size","Notification","_ref2","message","type","onDismiss","bgColor","Icon","SpeakButton","_ref3","textToSpeak","handleSpeak","stopPropagation","window","utterance","SpeechSynthesisUtterance","speechSynthesis","cancel","speak","substring","AccessibilitySettingsModal","_ref4","settings","updateSettings","fontSize","hc","dm","talkbackEnabled","fontSizes","label","value","map","fs","HomeScreen","_ref5","setCurrentPage","userName","userId","accessibilitySettings","page","icon","item","AppointmentsScreen","_ref6","_MOCK_DOCTORS$","showNotification","appointments","setAppointments","isLoading","setIsLoading","isModalOpen","setIsModalOpen","confirmCancelModal","setConfirmCancelModal","appointmentId","setDoctor","setDate","time","setTime","reason","setReason","appointmentsCollectionPath","status","q","unsubscribe","querySnapshot","userAppointments","forEach","push","_objectSpread","data","sort","a","b","Date","handleMakeAppointment","_MOCK_DOCTORS$find","preventDefault","newAppointment","find","d","createdAt","toISOString","_MOCK_DOCTORS$2","confirmCancel","executeCancelAppointment","appointmentRef","length","apt","onSubmit","field","htmlFor","charAt","toUpperCase","slice","replace","onChange","target","rows","placeholder","min","split","undefined","ChatScreen","_ref7","_MOCK_DOCTORS$3","messages","setMessages","text","sender","newMessage","setNewMessage","selectedDoctor","setSelectedDoctor","messagesEndRef","_messagesEndRef$curre","current","scrollIntoView","behavior","handleSendMessage","trim","messageData","toLocaleTimeString","hour","minute","doctorId","prevMessages","setTimeout","prev","msg","ref","PrescriptionsScreen","_ref8","prescriptions","setPrescriptions","rx","App","currentPage","currentUser","setCurrentUser","isAuthReady","setIsAuthReady","setUserName","notification","setNotification","isSettingsModalOpen","setIsSettingsModalOpen","setAccessibilitySettings","savedSettings","localStorage","getItem","JSON","parse","setItem","stringify","document","documentElement","classList","add","remove","updateAccessibilitySetting","key","arguments","duration","user","displayName","uid","__initial_auth_token","handleSignOut","renderPage","commonProps","NavItem","_ref9","IconComponent","strokeWidth","appClasses"],"sources":["/home/diego/ExpoApp/my-app/src/App.jsx"],"sourcesContent":["import React, { useState, useEffect, useCallback, useRef } from 'react';\nimport { initializeApp } from 'firebase/app';\nimport { getAuth, signInAnonymously, signInWithCustomToken, onAuthStateChanged, signOut } from 'firebase/auth'; // Added signInWithCustomToken\nimport { getFirestore, collection, addDoc, getDocs, doc, updateDoc, deleteDoc, onSnapshot, query, where, setDoc } from 'firebase/firestore';\nimport { Home, CalendarPlus, MessageSquare, ListChecks, UserCircle, XCircle, Send, PlusCircle, Trash2, LogOut, CheckCircle, AlertTriangle, Info, Settings, Volume2, Eye, Moon, Sun, ZoomIn, ZoomOut } from 'lucide-react';\nimport './App.css';\n// --- Firebase Configuration ---\n// const firebaseConfig = {\n//   apiKey: \"YOUR_API_KEY\",\n//   authDomain: \"YOUR_AUTH_DOMAIN\",\n//   projectId: \"YOUR_PROJECT_ID\",\n//   storageBucket: \"YOUR_STORAGE_BUCKET\",\n//   messagingSenderId: \"YOUR_MESSAGING_SENDER_ID\",\n//   appId: \"YOUR_APP_ID\"\n// };\nconst firebaseConfig = {\n  apiKey: \"AIzaSyC9yqipXCN_ALWZFrFUaBbMG4LznCgt4MM\",\n  authDomain: \"medcare-app-9678b.firebaseapp.com\",\n  projectId: \"medcare-app-9678b\",\n  storageBucket: \"medcare-app-9678b.firebasestorage.app\",\n  messagingSenderId: \"805339182842\",\n  appId: \"1:805339182842:web:c4bab764c2c8b40527bb43\",\n  measurementId: \"G-L8444GNX38\"\n};\n\n\n// --- Global Firebase Variables (to be provided by the environment) ---\n//const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';\nconst appId = 'medcare-app-9678b';\n// const finalFirebaseConfig = typeof __firebase_config !== 'undefined' ? JSON.parse(__firebase_config) : firebaseConfig;\n//const finalFirebaseConfig ='false';\n\n// --- Initialize Firebase ---\nlet app;\nlet auth;\nlet db;\n\ntry {\n//   app = initializeApp(finalFirebaseConfig);\n  app = initializeApp(firebaseConfig);\n  auth = getAuth(app);\n  db = getFirestore(app);\n  // import { setLogLevel } from \"firebase/firestore\"; // For debugging\n  // setLogLevel('debug');\n} catch (e) {\n  console.error(\"Error initializing Firebase:\", e);\n  if (!db) {\n    console.warn(\"Firestore (db) is not initialized. App will run with mock data and no persistence.\");\n  }\n}\n\n// Service worker\n\nif ('serviceWorker' in navigator) {\n  // Register a service worker hosted at the root of the\n  // site using the default scope.\n  navigator.serviceWorker.register('./service-worker.js').then(\n    registration => {\n      console.log('Service worker registration succeeded:', registration);\n    },\n    /*catch*/ error => {\n      console.error(`Service worker registration failed: ${error}`);\n    }\n  );\n} else {\n  console.error('Service workers are not supported.');\n}\n\n// --- Mock Data ---\nconst MOCK_PRESCRIPTIONS = [\n  { id: 'p1', name: 'Amoxicillin 250mg', dosage: '1 tablet every 8 hours for 7 days', date: '2024-05-20', doctor: 'Dr. Smith' },\n{ id: 'p2', name: 'Ibuprofen 400mg', dosage: '1 tablet as needed for pain', date: '2024-05-15', doctor: 'Dr. Jones' },\n{ id: 'p3', name: 'Metformin 500mg', dosage: '1 tablet twice daily with meals', date: '2024-04-28', doctor: 'Dr. Brown' },\n];\n\nconst MOCK_DOCTORS = [\n  { id: 'doc1', name: 'Dr. Emily Carter (Cardiologist)' },\n  { id: 'doc2', name: 'Dr. John Smith (General Practitioner)' },\n  { id: 'doc3', name: 'Dr. Sarah Lee (Pediatrician)' },\n];\n\n// --- Helper Components ---\n\n// Modal Component\nconst Modal = ({ isOpen, onClose, title, children, darkMode, highContrast, fontSizeClass }) => {\n  if (!isOpen) return null;\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50\">\n    <div className={`rounded-lg shadow-xl p-6 w-full max-w-md ${fontSizeClass} ${darkMode ? 'bg-gray-800 text-white' : 'bg-white text-gray-800'} ${highContrast ? (darkMode ? 'border-2 border-yellow-400' : 'border-2 border-blue-600') : ''}`}>\n    <div className=\"flex justify-between items-center mb-4\">\n    <h3 className={`text-xl font-semibold ${highContrast && darkMode ? 'text-yellow-300' : highContrast ? 'text-blue-700' : (darkMode ? 'text-white' : 'text-gray-800')}`}>{title}</h3>\n    <button onClick={onClose} className={`${darkMode ? 'text-gray-300 hover:text-white' : 'text-gray-500 hover:text-gray-700'}`}>\n    <XCircle size={24} />\n    </button>\n    </div>\n    <div>{children}</div>\n    </div>\n    </div>\n  );\n};\n\n// Notification Component\nconst Notification = ({ message, type, onDismiss, darkMode }) => {\n  if (!message) return null;\n\n  let bgColor;\n  if (darkMode) {\n    bgColor = type === 'success' ? 'bg-green-700' : type === 'error' ? 'bg-red-700' : 'bg-blue-700';\n  } else {\n    bgColor = type === 'success' ? 'bg-green-500' : type === 'error' ? 'bg-red-500' : 'bg-blue-500';\n  }\n  const Icon = type === 'success' ? CheckCircle : type === 'error' ? AlertTriangle : Info;\n\n  return (\n    <div className={`fixed top-4 right-4 ${bgColor} text-white p-4 rounded-lg shadow-md flex items-center z-[100]`}>\n    <Icon size={24} className=\"mr-3\" />\n    <span>{message}</span>\n    {onDismiss && (\n      <button onClick={onDismiss} className=\"ml-4 text-white hover:text-gray-200\">\n      <XCircle size={20} />\n      </button>\n    )}\n    </div>\n  );\n};\n\n// SpeakButton for TalkBack simulation\nconst SpeakButton = ({ textToSpeak, darkMode, highContrast }) => {\n  const handleSpeak = (e) => {\n    e.stopPropagation(); // Prevent parent clicks if button is inside another clickable element\n    if ('speechSynthesis' in window && textToSpeak) {\n      const utterance = new SpeechSynthesisUtterance(textToSpeak);\n      // Optional: Configure voice, rate, pitch\n      // utterance.lang = 'en-US';\n      window.speechSynthesis.cancel(); // Cancel any previous speech\n      window.speechSynthesis.speak(utterance);\n    } else {\n      console.warn(\"Speech synthesis not supported or no text to speak.\");\n    }\n  };\n\n  return (\n    <button\n    onClick={handleSpeak}\n    aria-label={`Speak: ${textToSpeak.substring(0,30)}...`}\n    title=\"Read aloud\"\n    className={`ml-2 p-1 rounded ${darkMode ? (highContrast ? 'bg-yellow-500 text-black' : 'bg-gray-600 hover:bg-gray-500') : (highContrast ? 'bg-blue-500 text-white' : 'bg-gray-200 hover:bg-gray-300') }`}\n    >\n    <Volume2 size={16} />\n    </button>\n  );\n};\n\n\n// --- Accessibility Settings Modal ---\nconst AccessibilitySettingsModal = ({ isOpen, onClose, settings, updateSettings, darkMode, highContrast, fontSizeClass }) => {\n  const { fontSize, highContrast: hc, darkMode: dm, talkbackEnabled } = settings;\n\n  const fontSizes = [\n    { label: 'Normal', value: 'text-base' },\n    { label: 'Large', value: 'text-lg' },\n    { label: 'Extra Large', value: 'text-xl' },\n  ];\n\n  return (\n    <Modal isOpen={isOpen} onClose={onClose} title=\"Accessibility Settings\" darkMode={darkMode} highContrast={highContrast} fontSizeClass={fontSizeClass}>\n    <div className=\"space-y-6\">\n    {/* Font Size */}\n    <div>\n    <h4 className={`font-semibold mb-2 ${darkMode ? 'text-gray-200' : 'text-gray-700'}`}>Font Size</h4>\n    <div className=\"flex space-x-2\">\n    {fontSizes.map(fs => (\n      <button\n      key={fs.value}\n      onClick={() => updateSettings('fontSize', fs.value)}\n      className={`px-3 py-1.5 rounded-md text-sm font-medium transition-colors\n        ${fontSize === fs.value\n          ? (darkMode ? 'bg-blue-500 text-white' : 'bg-blue-600 text-white')\n          : (darkMode ? 'bg-gray-700 hover:bg-gray-600 text-gray-300' : 'bg-gray-200 hover:bg-gray-300 text-gray-700')}\n          ${highContrast && fontSize === fs.value ? (darkMode ? 'border-2 border-yellow-400' : 'border-2 border-blue-800') : ''}\n          ${highContrast && fontSize !== fs.value ? (darkMode ? 'border border-gray-500' : 'border border-gray-400') : ''}\n          `}\n          >\n          {fs.label}\n          </button>\n    ))}\n    </div>\n    </div>\n\n    {/* Dark Mode */}\n    <div>\n    <h4 className={`font-semibold mb-2 ${darkMode ? 'text-gray-200' : 'text-gray-700'}`}>Theme</h4>\n    <button\n    onClick={() => updateSettings('darkMode', !dm)}\n    className={`w-full flex items-center justify-center px-4 py-2 rounded-md text-sm font-medium transition-colors\n      ${dm ? (highContrast ? 'bg-gray-900 text-yellow-300 border-2 border-yellow-400' : 'bg-gray-700 text-white') : (highContrast ? 'bg-white text-blue-700 border-2 border-blue-700' : 'bg-gray-200 text-black')}\n      hover:${dm ? (highContrast ? 'bg-gray-800' : 'bg-gray-600') : (highContrast ? 'bg-gray-100' : 'bg-gray-300')}\n      `}\n      >\n      {dm ? <Sun size={18} className=\"mr-2\" /> : <Moon size={18} className=\"mr-2\" />}\n      {dm ? 'Switch to Light Mode' : 'Switch to Dark Mode'}\n      </button>\n      </div>\n\n      {/* High Contrast */}\n      <div>\n      <h4 className={`font-semibold mb-2 ${darkMode ? 'text-gray-200' : 'text-gray-700'}`}>Contrast</h4>\n      <button\n      onClick={() => updateSettings('highContrast', !hc)}\n      className={`w-full flex items-center justify-center px-4 py-2 rounded-md text-sm font-medium transition-colors\n        ${hc\n          ? (darkMode ? 'bg-yellow-400 text-black' : 'bg-blue-600 text-white')\n          : (darkMode ? 'bg-gray-700 hover:bg-gray-600 text-gray-300' : 'bg-gray-200 hover:bg-gray-300 text-gray-700')}\n          ${highContrast && hc ? (darkMode ? 'border-2 border-white': 'border-2 border-black') : ''}\n          `}\n          >\n          <Eye size={18} className=\"mr-2\" />\n          {hc ? 'Disable High Contrast' : 'Enable High Contrast'}\n          </button>\n          </div>\n\n          {/* TalkBack Simulation */}\n          <div>\n          <h4 className={`font-semibold mb-2 ${darkMode ? 'text-gray-200' : 'text-gray-700'}`}>Read Aloud (TalkBack Simulation)</h4>\n          <button\n          onClick={() => updateSettings('talkbackEnabled', !talkbackEnabled)}\n          className={`w-full flex items-center justify-center px-4 py-2 rounded-md text-sm font-medium transition-colors\n            ${talkbackEnabled\n              ? (darkMode ? 'bg-green-600 text-white' : 'bg-green-500 text-white')\n              : (darkMode ? 'bg-gray-700 hover:bg-gray-600 text-gray-300' : 'bg-gray-200 hover:bg-gray-300 text-gray-700')}\n              ${highContrast && talkbackEnabled ? (darkMode ? 'border-2 border-white': 'border-2 border-black') : ''}\n              `}\n              >\n              <Volume2 size={18} className=\"mr-2\" />\n              {talkbackEnabled ? 'Disable Read Aloud Feature' : 'Enable Read Aloud Feature'}\n              </button>\n              {talkbackEnabled && <p className={`mt-2 text-xs ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>When enabled, look for <Volume2 size={12} className=\"inline\" /> icons to have text read aloud.</p>}\n              </div>\n              </div>\n              </Modal>\n  );\n};\n\n\n// --- Screen Components (Adapted for Accessibility) ---\n\nconst HomeScreen = ({ setCurrentPage, userName, userId, accessibilitySettings }) => (\n  <div className={`p-6 min-h-[calc(100vh-4rem)] flex flex-col justify-center items-center transition-colors duration-300\n    ${accessibilitySettings.darkMode ? 'bg-gradient-to-br from-gray-800 to-gray-900 text-white' : 'bg-gradient-to-br from-blue-500 to-indigo-600 text-white'}\n    ${accessibilitySettings.highContrast && accessibilitySettings.darkMode ? 'border-2 border-yellow-400' : ''}\n    ${accessibilitySettings.highContrast && !accessibilitySettings.darkMode ? 'bg-white text-black border-2 border-blue-700' : ''}\n    `}>\n    <UserCircle size={80} className={`mb-4 ${accessibilitySettings.darkMode ? (accessibilitySettings.highContrast ? 'text-yellow-300' : 'text-indigo-300') : (accessibilitySettings.highContrast ? 'text-blue-700' : 'text-indigo-200')}`} />\n    <h1 className={`text-3xl font-bold mb-2 ${accessibilitySettings.highContrast && !accessibilitySettings.darkMode ? 'text-black' : ''}`}>Welcome, {userName || 'User'}!</h1>\n    {accessibilitySettings.talkbackEnabled && <SpeakButton textToSpeak={`Welcome, ${userName || 'User'}!`} darkMode={accessibilitySettings.darkMode} highContrast={accessibilitySettings.highContrast} />}\n\n    <p className={`mb-1 text-sm ${accessibilitySettings.darkMode ? (accessibilitySettings.highContrast ? 'text-yellow-200' : 'text-indigo-100') : (accessibilitySettings.highContrast ? 'text-gray-700' : 'text-indigo-100')}`}>\n    User ID: <span className={`font-mono px-1 rounded ${accessibilitySettings.darkMode ? (accessibilitySettings.highContrast ? 'bg-yellow-600 text-black' : 'bg-gray-700') : (accessibilitySettings.highContrast ? 'bg-blue-200 text-black' : 'bg-indigo-700')}`}>{userId || 'N/A'}</span>\n    </p>\n    <p className={`mb-6 text-center ${accessibilitySettings.darkMode ? (accessibilitySettings.highContrast ? 'text-yellow-200' : 'text-indigo-100') : (accessibilitySettings.highContrast ? 'text-gray-700' : 'text-indigo-100')}`}>Your personal health assistant. Ready to help you manage your medical needs.</p>\n    {accessibilitySettings.talkbackEnabled && <SpeakButton textToSpeak=\"Your personal health assistant. Ready to help you manage your medical needs.\" darkMode={accessibilitySettings.darkMode} highContrast={accessibilitySettings.highContrast} />}\n\n    <div className=\"grid grid-cols-2 gap-4 w-full max-w-md\">\n    {[\n      { page: 'myAppointments', label: 'My Appointments', icon: ListChecks },\n      { page: 'chat', label: 'Chat with Doctor', icon: MessageSquare },\n      { page: 'prescriptions', label: 'View Prescriptions', icon: ListChecks },\n    ].map(item => (\n      <button\n      key={item.page}\n      onClick={() => setCurrentPage(item.page)}\n      className={`p-4 rounded-lg shadow-md transition-all flex flex-col items-center justify-center aspect-square\n        ${accessibilitySettings.darkMode\n          ? (accessibilitySettings.highContrast ? 'bg-black text-yellow-300 border border-yellow-400 hover:bg-gray-900' : 'bg-gray-700 text-indigo-300 hover:bg-gray-600')\n          : (accessibilitySettings.highContrast ? 'bg-white text-blue-700 border border-blue-700 hover:bg-blue-50' : 'bg-white text-blue-600 hover:bg-blue-50')}\n          `}\n          >\n          <item.icon size={32} className=\"mb-2\" />\n          <span className=\"font-semibold text-center\">{item.label}</span>\n          {accessibilitySettings.talkbackEnabled && <SpeakButton textToSpeak={item.label} darkMode={accessibilitySettings.darkMode} highContrast={accessibilitySettings.highContrast} />}\n          </button>\n    ))}\n    <button\n    onClick={() => setCurrentPage('makeAppointment')} // Kept separate if logic differs, or merge if identical to 'My Appointments' button\n    className={`p-4 rounded-lg shadow-md transition-all flex flex-col items-center justify-center aspect-square\n      ${accessibilitySettings.darkMode\n        ? (accessibilitySettings.highContrast ? 'bg-black text-yellow-300 border border-yellow-400 hover:bg-gray-900' : 'bg-gray-700 text-indigo-300 hover:bg-gray-600')\n        : (accessibilitySettings.highContrast ? 'bg-white text-blue-700 border border-blue-700 hover:bg-blue-50' : 'bg-white text-blue-600 hover:bg-blue-50')}\n        `}\n        >\n        <CalendarPlus size={32} className=\"mb-2\" />\n        <span className=\"font-semibold text-center\">Make Appointment</span>\n        {accessibilitySettings.talkbackEnabled && <SpeakButton textToSpeak=\"Make Appointment\" darkMode={accessibilitySettings.darkMode} highContrast={accessibilitySettings.highContrast} />}\n        </button>\n        </div>\n        </div>\n);\n\nconst AppointmentsScreen = ({ userId, showNotification, accessibilitySettings }) => {\n  const [appointments, setAppointments] = useState([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  const [confirmCancelModal, setConfirmCancelModal] = useState({ isOpen: false, appointmentId: null });\n\n  const [doctor, setDoctor] = useState(MOCK_DOCTORS[0]?.id || '');\n  const [date, setDate] = useState('');\n  const [time, setTime] = useState('');\n  const [reason, setReason] = useState('');\n\n  const appointmentsCollectionPath = `artifacts/${appId}/users/${userId}/appointments`;\n\n  useEffect(() => {\n    if (!db || !userId) {\n      console.log(\"Using mock appointments as db or userId is not available.\");\n      setAppointments([\n        { id: 'apt1', doctor: 'Dr. Emily Carter', date: '2024-06-10', time: '10:00 AM', reason: 'Check-up', status: 'Scheduled' },\n        { id: 'apt2', doctor: 'Dr. John Smith', date: '2024-06-15', time: '02:30 PM', reason: 'Follow-up', status: 'Scheduled' },\n      ]);\n      setIsLoading(false);\n      return;\n    }\n\n    setIsLoading(true);\n    const q = query(collection(db, appointmentsCollectionPath));\n    const unsubscribe = onSnapshot(q, (querySnapshot) => {\n      const userAppointments = [];\n      querySnapshot.forEach((doc) => {\n        userAppointments.push({ id: doc.id, ...doc.data() });\n      });\n      userAppointments.sort((a, b) => new Date(`${a.date} ${a.time}`) - new Date(`${b.date} ${b.time}`));\n      setAppointments(userAppointments);\n      setIsLoading(false);\n    }, (error) => {\n      console.error(\"Error fetching appointments: \", error);\n      showNotification(\"Error fetching appointments.\", \"error\");\n      setIsLoading(false);\n    });\n    return () => unsubscribe();\n  }, [userId, showNotification, appointmentsCollectionPath]);\n\n  const handleMakeAppointment = async (e) => {\n    e.preventDefault();\n    if (!db || !userId) {\n      showNotification(\"Database not available.\", \"error\"); return;\n    }\n    if (!doctor || !date || !time || !reason) {\n      showNotification(\"Please fill all fields.\", \"error\"); return;\n    }\n    const newAppointment = {\n      doctor: MOCK_DOCTORS.find(d => d.id === doctor)?.name || doctor, date, time, reason,\n      status: 'Scheduled', createdAt: new Date().toISOString()\n    };\n    try {\n      await addDoc(collection(db, appointmentsCollectionPath), newAppointment);\n      showNotification(\"Appointment booked successfully!\", \"success\");\n      setDoctor(MOCK_DOCTORS[0]?.id || ''); setDate(''); setTime(''); setReason('');\n      setIsModalOpen(false);\n    } catch (error) {\n      console.error(\"Error adding appointment: \", error);\n      showNotification(\"Failed to book appointment.\", \"error\");\n    }\n  };\n\n  const confirmCancel = (appointmentId) => {\n    setConfirmCancelModal({ isOpen: true, appointmentId });\n  };\n\n  const executeCancelAppointment = async () => {\n    const appointmentId = confirmCancelModal.appointmentId;\n    if (!db || !userId || !appointmentId) {\n      showNotification(\"Database not available or invalid request.\", \"error\");\n      setConfirmCancelModal({ isOpen: false, appointmentId: null });\n      return;\n    }\n    try {\n      const appointmentRef = doc(db, appointmentsCollectionPath, appointmentId);\n      await updateDoc(appointmentRef, { status: 'Cancelled' });\n      showNotification(\"Appointment cancelled successfully.\", \"success\");\n    } catch (error) {\n      console.error(\"Error cancelling appointment: \", error);\n      showNotification(\"Failed to cancel appointment.\", \"error\");\n    }\n    setConfirmCancelModal({ isOpen: false, appointmentId: null });\n  };\n\n  const { darkMode, highContrast, talkbackEnabled, fontSize } = accessibilitySettings;\n\n  return (\n    <div className={`p-4 min-h-[calc(100vh-4rem)] ${darkMode ? 'bg-gray-800 text-gray-200' : 'bg-gray-100 text-gray-800'} ${highContrast && darkMode ? 'border border-yellow-400' : ''} ${highContrast && !darkMode ? 'border border-blue-600' : ''}`}>\n    <div className=\"flex justify-between items-center mb-6\">\n    <h2 className={`text-2xl font-semibold ${highContrast && darkMode ? 'text-yellow-300' : highContrast ? 'text-blue-700' : ''}`}>My Appointments</h2>\n    {talkbackEnabled && <SpeakButton textToSpeak=\"My Appointments page.\" darkMode={darkMode} highContrast={highContrast}/>}\n    <button\n    onClick={() => setIsModalOpen(true)}\n    className={`font-semibold py-2 px-4 rounded-lg shadow-md flex items-center\n      ${darkMode ? (highContrast ? 'bg-yellow-500 text-black hover:bg-yellow-600' : 'bg-blue-600 hover:bg-blue-700 text-white') : (highContrast ? 'bg-blue-700 text-white hover:bg-blue-800' : 'bg-blue-500 hover:bg-blue-600 text-white')}\n      `}\n      >\n      <PlusCircle size={20} className=\"mr-2\" />\n      New Appointment\n      </button>\n      </div>\n\n      {isLoading ? (\n        <p className={`${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>Loading appointments...</p>\n      ) : appointments.length === 0 ? (\n        <p className={`${darkMode ? 'text-gray-400' : 'text-gray-600'} text-center py-8`}>You have no upcoming appointments.</p>\n      ) : (\n        <div className=\"space-y-4\">\n        {appointments.map(apt => (\n          <div key={apt.id} className={`p-4 rounded-lg shadow-md\n            ${apt.status === 'Cancelled' ? (darkMode ? 'bg-gray-700 opacity-70' : 'bg-gray-200 opacity-70') : (darkMode ? 'bg-gray-700' : 'bg-white')}\n            ${highContrast && darkMode ? 'border border-yellow-300' : ''}\n            ${highContrast && !darkMode && apt.status !== 'Cancelled' ? 'border border-blue-500' : ''}\n            ${highContrast && !darkMode && apt.status === 'Cancelled' ? 'border border-gray-400' : ''}\n            `}>\n            <h3 className={`text-lg font-semibold ${darkMode ? (highContrast ? 'text-yellow-300' : 'text-blue-400') : (highContrast ? 'text-blue-700' : 'text-blue-600')}`}>{apt.doctor}</h3>\n            {talkbackEnabled && <SpeakButton textToSpeak={`Appointment with ${apt.doctor}`} darkMode={darkMode} highContrast={highContrast}/>}\n            <p><strong>Date:</strong> {apt.date} {talkbackEnabled && <SpeakButton textToSpeak={`Date ${apt.date}`} darkMode={darkMode} highContrast={highContrast}/>}</p>\n            <p><strong>Time:</strong> {apt.time} {talkbackEnabled && <SpeakButton textToSpeak={`Time ${apt.time}`} darkMode={darkMode} highContrast={highContrast}/>}</p>\n            <p><strong>Reason:</strong> {apt.reason} {talkbackEnabled && <SpeakButton textToSpeak={`Reason ${apt.reason}`} darkMode={darkMode} highContrast={highContrast}/>}</p>\n            <p><strong>Status:</strong> <span className={`${apt.status === 'Cancelled' ? (darkMode ? 'text-red-400' : 'text-red-500') : (darkMode ? 'text-green-400' : 'text-green-500')}`}>{apt.status}</span> {talkbackEnabled && <SpeakButton textToSpeak={`Status ${apt.status}`} darkMode={darkMode} highContrast={highContrast}/>}</p>\n            {apt.status !== 'Cancelled' && (\n              <button\n              onClick={() => confirmCancel(apt.id)}\n              className={`mt-3 font-semibold py-1 px-3 rounded-md text-sm flex items-center\n                ${darkMode ? (highContrast ? 'bg-red-500 text-black hover:bg-red-600' : 'bg-red-600 hover:bg-red-700 text-white') : (highContrast ? 'bg-red-700 text-white hover:bg-red-800' : 'bg-red-500 hover:bg-red-600 text-white')}\n                `}\n                >\n                <Trash2 size={16} className=\"mr-1\" />\n                Cancel\n                </button>\n            )}\n            </div>\n        ))}\n        </div>\n      )}\n\n      <Modal isOpen={isModalOpen} onClose={() => setIsModalOpen(false)} title=\"Book a New Appointment\" darkMode={darkMode} highContrast={highContrast} fontSizeClass={accessibilitySettings.fontSize}>\n      <form onSubmit={handleMakeAppointment} className=\"space-y-4\">\n      {/* Form fields adapted for accessibility settings */}\n      {['doctor', 'date', 'time', 'reason'].map(field => (\n        <div key={field}>\n        <label htmlFor={field} className={`block text-sm font-medium ${darkMode ? 'text-gray-300' : 'text-gray-700'} ${highContrast && darkMode ? 'text-yellow-200':''}`}>\n        {field.charAt(0).toUpperCase() + field.slice(1).replace('rV', 'r V')}\n        </label>\n        {field === 'doctor' ? (\n          <select id=\"doctor\" value={doctor} onChange={(e) => setDoctor(e.target.value)} className={`mt-1 block w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none sm:text-sm ${darkMode ? 'bg-gray-700 border-gray-600 text-white focus:ring-blue-500 focus:border-blue-500' : 'border-gray-300 focus:ring-blue-500 focus:border-blue-500'} ${highContrast ? (darkMode ? 'border-yellow-400' : 'border-blue-600') : ''}`}>\n          {MOCK_DOCTORS.map(doc => <option key={doc.id} value={doc.id}>{doc.name}</option>)}\n          </select>\n        ) : field === 'reason' ? (\n          <textarea id=\"reason\" rows=\"3\" value={reason} onChange={(e) => setReason(e.target.value)} placeholder=\"e.g., Annual check-up\" className={`mt-1 block w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none sm:text-sm ${darkMode ? 'bg-gray-700 border-gray-600 text-white focus:ring-blue-500 focus:border-blue-500' : 'border-gray-300 focus:ring-blue-500 focus:border-blue-500'} ${highContrast ? (darkMode ? 'border-yellow-400' : 'border-blue-600') : ''}`}></textarea>\n        ) : (\n          <input type={field} id={field} value={field === 'date' ? date : time} onChange={(e) => field === 'date' ? setDate(e.target.value) : setTime(e.target.value)} min={field === 'date' ? new Date().toISOString().split('T')[0] : undefined} className={`mt-1 block w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none sm:text-sm ${darkMode ? 'bg-gray-700 border-gray-600 text-white focus:ring-blue-500 focus:border-blue-500' : 'border-gray-300 focus:ring-blue-500 focus:border-blue-500'} ${highContrast ? (darkMode ? 'border-yellow-400' : 'border-blue-600') : ''}`} />\n        )}\n        </div>\n      ))}\n      <button type=\"submit\" className={`w-full font-semibold py-2 px-4 rounded-lg shadow-md flex items-center justify-center ${darkMode ? (highContrast ? 'bg-yellow-500 text-black hover:bg-yellow-600' : 'bg-blue-600 hover:bg-blue-700 text-white') : (highContrast ? 'bg-blue-700 text-white hover:bg-blue-800' : 'bg-blue-500 hover:bg-blue-600 text-white')}`}>\n      Confirm Appointment\n      </button>\n      </form>\n      </Modal>\n      <Modal isOpen={confirmCancelModal.isOpen} onClose={() => setConfirmCancelModal({ isOpen: false, appointmentId: null })} title=\"Confirm Cancellation\" darkMode={darkMode} highContrast={highContrast} fontSizeClass={accessibilitySettings.fontSize}>\n      <p className={`${darkMode ? 'text-gray-300' : 'text-gray-700'} mb-4`}>Are you sure you want to cancel this appointment?</p>\n      <div className=\"flex justify-end space-x-3\">\n      <button onClick={() => setConfirmCancelModal({ isOpen: false, appointmentId: null })} className={`px-4 py-2 rounded-md text-sm font-medium ${darkMode ? 'bg-gray-600 hover:bg-gray-500 text-white' : 'bg-gray-300 hover:bg-gray-400 text-black'}`}>No, Keep It</button>\n      <button onClick={executeCancelAppointment} className={`px-4 py-2 rounded-md text-sm font-medium ${darkMode ? (highContrast ? 'bg-red-500 text-black hover:bg-red-600' : 'bg-red-600 hover:bg-red-700 text-white') : (highContrast ? 'bg-red-700 text-white hover:bg-red-800' : 'bg-red-500 hover:bg-red-600 text-white')}`}>Yes, Cancel</button>\n      </div>\n      </Modal>\n      </div>\n  );\n};\n\nconst ChatScreen = ({ userId, showNotification, accessibilitySettings }) => {\n  const [messages, setMessages] = useState([\n    { id: 'm1', text: 'Hello! How can I help you today?', sender: 'doctor', time: '10:00 AM' },\n    { id: 'm2', text: 'I have a slight fever and a headache.', sender: 'user', time: '10:01 AM' },\n  ]);\n  const [newMessage, setNewMessage] = useState('');\n  const [selectedDoctor, setSelectedDoctor] = useState(MOCK_DOCTORS[0]?.id || '');\n  const messagesEndRef = useRef(null); // For scrolling to bottom\n\n  const { darkMode, highContrast, talkbackEnabled } = accessibilitySettings;\n\n  useEffect(() => { // Scroll to bottom when new messages arrive\n    messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\n  }, [messages]);\n\n  const handleSendMessage = async (e) => {\n    e.preventDefault();\n    if (!newMessage.trim()) return;\n    const messageData = {\n      text: newMessage, sender: 'user', time: new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' }),\n      createdAt: new Date().toISOString(), userId: userId, doctorId: selectedDoctor\n    };\n    setMessages(prevMessages => [...prevMessages, { ...messageData, id: `m${prevMessages.length + 1}` }]);\n    setNewMessage('');\n    setTimeout(() => {\n      setMessages(prev => [...prev, {\n        id: `m${prev.length + 1}`, text: \"Okay, I understand. Can you tell me more about your symptoms?\",\n        sender: 'doctor', time: new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })\n      }]);\n    }, 1500);\n  };\n\n  return (\n    <div className={`flex flex-col h-[calc(100vh-4rem)] transition-colors duration-300 ${darkMode ? 'bg-gray-900' : 'bg-gray-50'} ${highContrast && darkMode ? 'border border-yellow-400' : ''} ${highContrast && !darkMode ? 'border border-blue-600' : ''}`}>\n    <div className={`p-4 border-b shadow-sm ${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-white border-gray-200'} ${highContrast && darkMode ? 'border-b-yellow-400':''} ${highContrast && !darkMode ? 'border-b-blue-600':''}`}>\n    <label htmlFor=\"doctorSelect\" className={`text-sm font-medium mr-2 ${darkMode ? 'text-gray-300' : 'text-gray-700'} ${highContrast && darkMode ? 'text-yellow-200':''}`}>Chat with:</label>\n    <select\n    id=\"doctorSelect\" value={selectedDoctor} onChange={(e) => setSelectedDoctor(e.target.value)}\n    className={`p-2 border rounded-md focus:outline-none ${darkMode ? 'bg-gray-700 border-gray-600 text-white focus:ring-blue-500 focus:border-blue-500' : 'border-gray-300 focus:ring-blue-500 focus:border-blue-500'} ${highContrast ? (darkMode ? 'border-yellow-400' : 'border-blue-600') : ''}`}\n    >\n    {MOCK_DOCTORS.map(doc => <option key={doc.id} value={doc.id}>{doc.name}</option>)}\n    </select>\n    </div>\n\n    <div className=\"flex-grow p-4 space-y-4 overflow-y-auto\">\n    {messages.map(msg => (\n      <div key={msg.id} className={`flex ${msg.sender === 'user' ? 'justify-end' : 'justify-start'}`}>\n      <div className={`max-w-xs lg:max-w-md px-4 py-2 rounded-xl shadow\n        ${msg.sender === 'user'\n          ? (darkMode ? (highContrast ? 'bg-blue-700 text-white rounded-br-none border border-white' : 'bg-blue-600 text-white rounded-br-none') : (highContrast ? 'bg-blue-600 text-white rounded-br-none border border-black' : 'bg-blue-500 text-white rounded-br-none'))\n          : (darkMode ? (highContrast ? 'bg-black text-yellow-300 rounded-bl-none border border-yellow-400' : 'bg-gray-700 text-gray-200 rounded-bl-none') : (highContrast ? 'bg-gray-300 text-black rounded-bl-none border border-black' : 'bg-gray-200 text-gray-800 rounded-bl-none'))\n        }\n        `}>\n        <p>{msg.text} {talkbackEnabled && <SpeakButton textToSpeak={msg.text} darkMode={darkMode} highContrast={highContrast}/>}</p>\n        <p className={`text-xs mt-1 ${msg.sender === 'user' ? (darkMode ? 'text-blue-200 text-right' : 'text-blue-100 text-right') : (darkMode ? 'text-gray-400 text-left' : 'text-gray-500 text-left')}`}>\n        {msg.time}\n        </p>\n        </div>\n        </div>\n    ))}\n    <div ref={messagesEndRef} />\n    </div>\n\n    <form onSubmit={handleSendMessage} className={`p-4 border-t flex items-center ${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-white border-gray-200'} ${highContrast && darkMode ? 'border-t-yellow-400':''} ${highContrast && !darkMode ? 'border-t-blue-600':''}`}>\n    <input\n    type=\"text\" value={newMessage} onChange={(e) => setNewMessage(e.target.value)} placeholder=\"Type your message...\"\n    className={`flex-grow p-3 border rounded-l-lg focus:outline-none focus:ring-2 ${darkMode ? 'bg-gray-700 border-gray-600 text-white placeholder-gray-400 focus:ring-blue-500' : 'border-gray-300 placeholder-gray-500 focus:ring-blue-400'} ${highContrast ? (darkMode ? 'border-yellow-400 focus:ring-yellow-300' : 'border-blue-600 focus:ring-blue-500') : ''}`}\n    />\n    <button type=\"submit\" className={`p-3 rounded-r-lg focus:outline-none focus:ring-2\n      ${darkMode ? (highContrast ? 'bg-yellow-500 text-black hover:bg-yellow-600 focus:ring-yellow-300' : 'bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500') : (highContrast ? 'bg-blue-700 text-white hover:bg-blue-800 focus:ring-blue-600' : 'bg-blue-500 text-white hover:bg-blue-600 focus:ring-blue-400')}\n      `}>\n      <Send size={24} />\n      </button>\n      </form>\n      </div>\n  );\n};\n\nconst PrescriptionsScreen = ({ userId, showNotification, accessibilitySettings }) => {\n  const [prescriptions, setPrescriptions] = useState([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const { darkMode, highContrast, talkbackEnabled } = accessibilitySettings;\n\n  useEffect(() => {\n    setIsLoading(true);\n    // Simulate fetching data (using mock for now)\n    // TODO: Replace with Firestore fetching if needed\n    setPrescriptions(MOCK_PRESCRIPTIONS);\n    setIsLoading(false);\n  }, [userId]);\n\n  if (isLoading) {\n    return <p className={`p-6 ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>Loading prescriptions...</p>;\n  }\n\n  return (\n    <div className={`p-4 min-h-[calc(100vh-4rem)] ${darkMode ? 'bg-gray-800 text-gray-200' : 'bg-gray-100 text-gray-800'} ${highContrast && darkMode ? 'border border-yellow-400' : ''} ${highContrast && !darkMode ? 'border border-blue-600' : ''}`}>\n    <h2 className={`text-2xl font-semibold mb-6 ${highContrast && darkMode ? 'text-yellow-300' : highContrast ? 'text-blue-700' : ''}`}>My Prescriptions</h2>\n    {talkbackEnabled && <SpeakButton textToSpeak=\"My Prescriptions page.\" darkMode={darkMode} highContrast={highContrast}/>}\n    {prescriptions.length === 0 ? (\n      <p className={`${darkMode ? 'text-gray-400' : 'text-gray-600'} text-center py-8`}>You have no prescriptions on file.</p>\n    ) : (\n      <div className=\"space-y-4\">\n      {prescriptions.map(rx => (\n        <div key={rx.id} className={`p-4 rounded-lg shadow-md\n          ${darkMode ? 'bg-gray-700 border-l-4 border-green-500' : 'bg-white border-l-4 border-green-500'}\n          ${highContrast && darkMode ? 'border-yellow-300 border-l-yellow-400' : ''}\n          ${highContrast && !darkMode ? 'border-blue-500 border-l-blue-700' : ''}\n          `}>\n          <h3 className={`text-lg font-semibold ${darkMode ? (highContrast ? 'text-yellow-300' : 'text-green-400') : (highContrast ? 'text-blue-700' : 'text-green-700')}`}>{rx.name}</h3>\n          {talkbackEnabled && <SpeakButton textToSpeak={`Prescription: ${rx.name}`} darkMode={darkMode} highContrast={highContrast}/>}\n          <p><strong>Dosage:</strong> {rx.dosage} {talkbackEnabled && <SpeakButton textToSpeak={`Dosage ${rx.dosage}`} darkMode={darkMode} highContrast={highContrast}/>}</p>\n          <p className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}><strong>Prescribed on:</strong> {rx.date} {talkbackEnabled && <SpeakButton textToSpeak={`Prescribed on ${rx.date}`} darkMode={darkMode} highContrast={highContrast}/>}</p>\n          <p className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}><strong>Prescribed by:</strong> {rx.doctor} {talkbackEnabled && <SpeakButton textToSpeak={`Prescribed by ${rx.doctor}`} darkMode={darkMode} highContrast={highContrast}/>}</p>\n          </div>\n      ))}\n      </div>\n    )}\n    </div>\n  );\n};\n\n\n// --- Main App Component ---\nconst App = () => {\n  const [currentPage, setCurrentPage] = useState('home');\n  const [currentUser, setCurrentUser] = useState(null);\n  const [isAuthReady, setIsAuthReady] = useState(false);\n  const [userName, setUserName] = useState('');\n  const [notification, setNotification] = useState({ message: '', type: '' });\n  const [isSettingsModalOpen, setIsSettingsModalOpen] = useState(false);\n\n  // Accessibility Settings State\n  const [accessibilitySettings, setAccessibilitySettings] = useState({\n    fontSize: 'text-base', // Tailwind classes: text-sm, text-base, text-lg, text-xl, text-2xl\n    highContrast: false,\n    darkMode: false,\n    talkbackEnabled: false, // For simulated TalkBack feature\n  });\n\n  // Load settings from localStorage\n  useEffect(() => {\n    const savedSettings = localStorage.getItem('medicAssistAccessibilitySettings');\n    if (savedSettings) {\n      setAccessibilitySettings(JSON.parse(savedSettings));\n    }\n  }, []);\n\n  // Save settings to localStorage and apply dark mode\n  useEffect(() => {\n    localStorage.setItem('medicAssistAccessibilitySettings', JSON.stringify(accessibilitySettings));\n    if (accessibilitySettings.darkMode) {\n      document.documentElement.classList.add('dark');\n    } else {\n      document.documentElement.classList.remove('dark');\n    }\n  }, [accessibilitySettings]);\n\n  const updateAccessibilitySetting = (key, value) => {\n    setAccessibilitySettings(prev => ({ ...prev, [key]: value }));\n  };\n\n  const showNotification = useCallback((message, type = 'info', duration = 3000) => {\n    setNotification({ message, type });\n    setTimeout(() => setNotification({ message: '', type: '' }), duration);\n  }, []);\n\n  useEffect(() => {\n    if (!auth) {\n      console.warn(\"Firebase Auth is not initialized.\");\n      setIsAuthReady(true); return;\n    }\n    const unsubscribe = onAuthStateChanged(auth, async (user) => {\n      if (user) {\n        setCurrentUser(user);\n        setUserName(user.displayName || `User-${user.uid.substring(0,5)}`);\n      } else {\n        setCurrentUser(null); setUserName('');\n        try {\n          let __initial_auth_token = 'undefined';\n          if (typeof __initial_auth_token !== 'undefined' && __initial_auth_token) {\n            await signInWithCustomToken(auth, __initial_auth_token);\n          } else {\n            await signInAnonymously(auth);\n          }\n        } catch (error) {\n          console.error(\"Error during auto sign-in:\", error);\n          showNotification(\"Authentication issue. Some features might be limited.\", \"error\");\n        }\n      }\n      setIsAuthReady(true);\n    });\n    return () => unsubscribe();\n  }, [showNotification]);\n\n  const handleSignOut = async () => {\n    if (!auth) { showNotification(\"Auth service not available.\", \"error\"); return; }\n    try {\n      await signOut(auth);\n      setCurrentPage('home');\n      showNotification(\"Signed out successfully.\", \"success\");\n    } catch (error) {\n      console.error(\"Error signing out:\", error);\n      showNotification(\"Error signing out.\", \"error\");\n    }\n  };\n\n  const renderPage = () => {\n    if (!isAuthReady) {\n      return <div className={`flex justify-center items-center h-screen ${accessibilitySettings.fontSize} ${accessibilitySettings.darkMode ? 'bg-gray-900 text-white' : 'bg-gray-100 text-black'}`}><p>Initializing App...</p></div>;\n    }\n    const userId = currentUser ? currentUser.uid : null;\n    const commonProps = { userId, showNotification, accessibilitySettings };\n\n    switch (currentPage) {\n      case 'home': return <HomeScreen setCurrentPage={setCurrentPage} userName={userName} {...commonProps} />;\n      case 'makeAppointment': // Fallthrough to myAppointments for now\n      case 'myAppointments': return <AppointmentsScreen {...commonProps} />;\n      case 'chat': return <ChatScreen {...commonProps} />;\n      case 'prescriptions': return <PrescriptionsScreen {...commonProps} />;\n      default: return <HomeScreen setCurrentPage={setCurrentPage} userName={userName} {...commonProps} />;\n    }\n  };\n\n  const NavItem = ({ page, label, icon: IconComponent }) => (\n    <button\n    onClick={() => setCurrentPage(page)}\n    className={`flex flex-col items-center justify-center p-2 w-full transition-colors duration-200 ease-in-out\n      ${accessibilitySettings.fontSize}\n      ${currentPage === page\n        ? (accessibilitySettings.darkMode ? (accessibilitySettings.highContrast ? 'text-yellow-300' : 'text-blue-400') : (accessibilitySettings.highContrast ? 'text-blue-700 font-bold' : 'text-blue-500'))\n        : (accessibilitySettings.darkMode ? (accessibilitySettings.highContrast ? 'text-gray-400 hover:text-yellow-200' : 'text-gray-400 hover:text-blue-300') : (accessibilitySettings.highContrast ? 'text-gray-600 hover:text-blue-600' : 'text-gray-500 hover:text-blue-400'))\n      }\n      `}\n      >\n      <IconComponent size={24} strokeWidth={currentPage === page ? 2.5 : 2} />\n      <span className=\"text-xs mt-1\">{label}</span>\n      </button>\n  );\n\n  // Apply base font size and high contrast classes to the main container\n  // Dark mode is applied to documentElement\n  let appClasses = `font-sans antialiased flex flex-col min-h-screen transition-colors duration-300 ${accessibilitySettings.fontSize}`;\n  if (accessibilitySettings.darkMode) {\n    appClasses += accessibilitySettings.highContrast ? ' bg-black text-yellow-300' : ' bg-gray-900 text-gray-200';\n  } else {\n    appClasses += accessibilitySettings.highContrast ? ' bg-white text-black border-2 border-blue-900' : ' bg-gray-100 text-gray-800';\n  }\n\n\n  return (\n    <div className={appClasses}>\n    <Notification message={notification.message} type={notification.type} onDismiss={() => setNotification({message: '', type: ''})} darkMode={accessibilitySettings.darkMode} />\n\n    <header className={`p-4 shadow-md flex justify-between items-center sticky top-0 z-40\n      ${accessibilitySettings.darkMode\n        ? (accessibilitySettings.highContrast ? 'bg-black text-yellow-300 border-b-2 border-yellow-400' : 'bg-gray-800 text-white')\n        : (accessibilitySettings.highContrast ? 'bg-white text-blue-700 border-b-2 border-blue-700' : 'bg-blue-600 text-white')}\n        `}>\n        <h1 className=\"text-xl font-semibold\">Medic Assist</h1>\n        <div className=\"flex items-center space-x-2\">\n        {currentUser && (\n          <button onClick={handleSignOut} className={`text-sm flex items-center p-2 rounded-md\n            ${accessibilitySettings.darkMode\n              ? (accessibilitySettings.highContrast ? 'hover:bg-yellow-700 text-yellow-300 border border-yellow-300' : 'hover:bg-gray-700 text-gray-300')\n              : (accessibilitySettings.highContrast ? 'hover:bg-blue-200 text-blue-700 border border-blue-700' : 'hover:bg-blue-700 text-blue-100')}\n              `}>\n              <LogOut size={18} className=\"mr-1\" /> Sign Out\n              </button>\n        )}\n        <button\n        onClick={() => setIsSettingsModalOpen(true)}\n        aria-label=\"Open accessibility settings\"\n        className={`p-2 rounded-md\n          ${accessibilitySettings.darkMode\n            ? (accessibilitySettings.highContrast ? 'hover:bg-yellow-700 text-yellow-300' : 'hover:bg-gray-700 text-gray-300')\n            : (accessibilitySettings.highContrast ? 'hover:bg-blue-200 text-blue-700' : 'hover:bg-blue-700 text-blue-100')}\n            `}\n            >\n            <Settings size={22} />\n            </button>\n            </div>\n            </header>\n\n            <main className=\"flex-grow overflow-y-auto\">\n            {renderPage()}\n            </main>\n\n            <nav className={`fixed bottom-0 left-0 right-0 border-t shadow-t-md flex justify-around items-center h-16 z-40\n              ${accessibilitySettings.darkMode\n                ? (accessibilitySettings.highContrast ? 'bg-black border-t-yellow-400' : 'bg-gray-800 border-gray-700')\n                : (accessibilitySettings.highContrast ? 'bg-white border-t-blue-700' : 'bg-white border-gray-200')}\n                `}>\n                <NavItem page=\"home\" label=\"Home\" icon={Home} />\n                <NavItem page=\"myAppointments\" label=\"Appointments\" icon={CalendarPlus} />\n                <NavItem page=\"chat\" label=\"Chat\" icon={MessageSquare} />\n                <NavItem page=\"prescriptions\" label=\"Prescriptions\" icon={ListChecks} />\n                </nav>\n                <div className=\"h-16\"></div> {/* Spacer for bottom nav */}\n\n                <AccessibilitySettingsModal\n                isOpen={isSettingsModalOpen}\n                onClose={() => setIsSettingsModalOpen(false)}\n                settings={accessibilitySettings}\n                updateSettings={updateAccessibilitySetting}\n                darkMode={accessibilitySettings.darkMode}\n                highContrast={accessibilitySettings.highContrast}\n                fontSizeClass={accessibilitySettings.fontSize}\n                />\n                </div>\n  );\n};\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}