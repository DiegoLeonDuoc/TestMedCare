{"ast":null,"code":"var _jsxFileName = \"/home/diego/ExpoApp/my-app/src/App.jsx\",\n  _s = $RefreshSig$(),\n  _s2 = $RefreshSig$(),\n  _s3 = $RefreshSig$(),\n  _s4 = $RefreshSig$();\nimport React, { useState, useEffect, useCallback, useRef } from 'react';\nimport { initializeApp } from 'firebase/app';\nimport { getAuth, signInAnonymously, signInWithCustomToken, onAuthStateChanged, signOut } from 'firebase/auth'; // Added signInWithCustomToken\nimport { getFirestore, collection, addDoc, getDocs, doc, updateDoc, deleteDoc, onSnapshot, query, where, setDoc } from 'firebase/firestore';\nimport { Home, CalendarPlus, MessageSquare, ListChecks, UserCircle, XCircle, Send, PlusCircle, Trash2, LogOut, CheckCircle, AlertTriangle, Info, Settings, Volume2, Eye, Moon, Sun, ZoomIn, ZoomOut } from 'lucide-react';\nimport './index.css';\n// --- Firebase Configuration ---\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst firebaseConfig = {\n  apiKey: \"YOUR_API_KEY\",\n  authDomain: \"YOUR_AUTH_DOMAIN\",\n  projectId: \"YOUR_PROJECT_ID\",\n  storageBucket: \"YOUR_STORAGE_BUCKET\",\n  messagingSenderId: \"YOUR_MESSAGING_SENDER_ID\",\n  appId: \"YOUR_APP_ID\"\n};\n\n// --- Global Firebase Variables (to be provided by the environment) ---\n//const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';\nconst appId = 'default-app-id';\n//const finalFirebaseConfig = typeof __firebase_config !== 'undefined' ? JSON.parse(__firebase_config) : firebaseConfig;\nconst finalFirebaseConfig = 'false';\n\n// --- Initialize Firebase ---\nlet app;\nlet auth;\nlet db;\ntry {\n  app = initializeApp(finalFirebaseConfig);\n  auth = getAuth(app);\n  db = getFirestore(app);\n  // import { setLogLevel } from \"firebase/firestore\"; // For debugging\n  // setLogLevel('debug');\n} catch (e) {\n  console.error(\"Error initializing Firebase:\", e);\n  if (!db) {\n    console.warn(\"Firestore (db) is not initialized. App will run with mock data and no persistence.\");\n  }\n}\n\n// --- Mock Data ---\nconst MOCK_PRESCRIPTIONS = [{\n  id: 'p1',\n  name: 'Amoxicillin 250mg',\n  dosage: '1 tablet every 8 hours for 7 days',\n  date: '2024-05-20',\n  doctor: 'Dr. Smith'\n}, {\n  id: 'p2',\n  name: 'Ibuprofen 400mg',\n  dosage: '1 tablet as needed for pain',\n  date: '2024-05-15',\n  doctor: 'Dr. Jones'\n}, {\n  id: 'p3',\n  name: 'Metformin 500mg',\n  dosage: '1 tablet twice daily with meals',\n  date: '2024-04-28',\n  doctor: 'Dr. Brown'\n}];\nconst MOCK_DOCTORS = [{\n  id: 'doc1',\n  name: 'Dr. Emily Carter (Cardiologist)'\n}, {\n  id: 'doc2',\n  name: 'Dr. John Smith (General Practitioner)'\n}, {\n  id: 'doc3',\n  name: 'Dr. Sarah Lee (Pediatrician)'\n}];\n\n// --- Helper Components ---\n\n// Modal Component\nconst Modal = ({\n  isOpen,\n  onClose,\n  title,\n  children,\n  darkMode,\n  highContrast,\n  fontSizeClass\n}) => {\n  if (!isOpen) return null;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: `rounded-lg shadow-xl p-6 w-full max-w-md ${fontSizeClass} ${darkMode ? 'bg-gray-800 text-white' : 'bg-white text-gray-800'} ${highContrast ? darkMode ? 'border-2 border-yellow-400' : 'border-2 border-blue-600' : ''}`,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex justify-between items-center mb-4\",\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: `text-xl font-semibold ${highContrast && darkMode ? 'text-yellow-300' : highContrast ? 'text-blue-700' : darkMode ? 'text-white' : 'text-gray-800'}`,\n          children: title\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 5\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: onClose,\n          className: `${darkMode ? 'text-gray-300 hover:text-white' : 'text-gray-500 hover:text-gray-700'}`,\n          children: /*#__PURE__*/_jsxDEV(XCircle, {\n            size: 24\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 66,\n            columnNumber: 5\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 5\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: children\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 5\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 61,\n    columnNumber: 5\n  }, this);\n};\n\n// Notification Component\n_c = Modal;\nconst Notification = ({\n  message,\n  type,\n  onDismiss,\n  darkMode\n}) => {\n  if (!message) return null;\n  let bgColor;\n  if (darkMode) {\n    bgColor = type === 'success' ? 'bg-green-700' : type === 'error' ? 'bg-red-700' : 'bg-blue-700';\n  } else {\n    bgColor = type === 'success' ? 'bg-green-500' : type === 'error' ? 'bg-red-500' : 'bg-blue-500';\n  }\n  const Icon = type === 'success' ? CheckCircle : type === 'error' ? AlertTriangle : Info;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `fixed top-4 right-4 ${bgColor} text-white p-4 rounded-lg shadow-md flex items-center z-[100]`,\n    children: [/*#__PURE__*/_jsxDEV(Icon, {\n      size: 24,\n      className: \"mr-3\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n      children: message\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 5\n    }, this), onDismiss && /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: onDismiss,\n      className: \"ml-4 text-white hover:text-gray-200\",\n      children: /*#__PURE__*/_jsxDEV(XCircle, {\n        size: 20\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 7\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 92,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 88,\n    columnNumber: 5\n  }, this);\n};\n\n// SpeakButton for TalkBack simulation\n_c2 = Notification;\nconst SpeakButton = ({\n  textToSpeak,\n  darkMode,\n  highContrast\n}) => {\n  const handleSpeak = e => {\n    e.stopPropagation(); // Prevent parent clicks if button is inside another clickable element\n    if ('speechSynthesis' in window && textToSpeak) {\n      const utterance = new SpeechSynthesisUtterance(textToSpeak);\n      // Optional: Configure voice, rate, pitch\n      // utterance.lang = 'en-US';\n      window.speechSynthesis.cancel(); // Cancel any previous speech\n      window.speechSynthesis.speak(utterance);\n    } else {\n      console.warn(\"Speech synthesis not supported or no text to speak.\");\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(\"button\", {\n    onClick: handleSpeak,\n    \"aria-label\": `Speak: ${textToSpeak.substring(0, 30)}...`,\n    title: \"Read aloud\",\n    className: `ml-2 p-1 rounded ${darkMode ? highContrast ? 'bg-yellow-500 text-black' : 'bg-gray-600 hover:bg-gray-500' : highContrast ? 'bg-blue-500 text-white' : 'bg-gray-200 hover:bg-gray-300'}`,\n    children: /*#__PURE__*/_jsxDEV(Volume2, {\n      size: 16\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 5\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 116,\n    columnNumber: 5\n  }, this);\n};\n\n// --- Accessibility Settings Modal ---\n_c3 = SpeakButton;\nconst AccessibilitySettingsModal = ({\n  isOpen,\n  onClose,\n  settings,\n  updateSettings,\n  darkMode,\n  highContrast,\n  fontSizeClass\n}) => {\n  const {\n    fontSize,\n    highContrast: hc,\n    darkMode: dm,\n    talkbackEnabled\n  } = settings;\n  const fontSizes = [{\n    label: 'Normal',\n    value: 'text-base'\n  }, {\n    label: 'Large',\n    value: 'text-lg'\n  }, {\n    label: 'Extra Large',\n    value: 'text-xl'\n  }];\n  return /*#__PURE__*/_jsxDEV(Modal, {\n    isOpen: isOpen,\n    onClose: onClose,\n    title: \"Accessibility Settings\",\n    darkMode: darkMode,\n    highContrast: highContrast,\n    fontSizeClass: fontSizeClass,\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"space-y-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          className: `font-semibold mb-2 ${darkMode ? 'text-gray-200' : 'text-gray-700'}`,\n          children: \"Font Size\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 143,\n          columnNumber: 5\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"flex space-x-2\",\n          children: fontSizes.map(fs => /*#__PURE__*/_jsxDEV(\"button\", {\n            onClick: () => updateSettings('fontSize', fs.value),\n            className: `px-3 py-1.5 rounded-md text-sm font-medium transition-colors\n        ${fontSize === fs.value ? darkMode ? 'bg-blue-500 text-white' : 'bg-blue-600 text-white' : darkMode ? 'bg-gray-700 hover:bg-gray-600 text-gray-300' : 'bg-gray-200 hover:bg-gray-300 text-gray-700'}\n          ${highContrast && fontSize === fs.value ? darkMode ? 'border-2 border-yellow-400' : 'border-2 border-blue-800' : ''}\n          ${highContrast && fontSize !== fs.value ? darkMode ? 'border border-gray-500' : 'border border-gray-400' : ''}\n          `,\n            children: fs.label\n          }, fs.value, false, {\n            fileName: _jsxFileName,\n            lineNumber: 146,\n            columnNumber: 7\n          }, this))\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 144,\n          columnNumber: 5\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          className: `font-semibold mb-2 ${darkMode ? 'text-gray-200' : 'text-gray-700'}`,\n          children: \"Theme\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 165,\n          columnNumber: 5\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => updateSettings('darkMode', !dm),\n          className: `w-full flex items-center justify-center px-4 py-2 rounded-md text-sm font-medium transition-colors\n      ${dm ? highContrast ? 'bg-gray-900 text-yellow-300 border-2 border-yellow-400' : 'bg-gray-700 text-white' : highContrast ? 'bg-white text-blue-700 border-2 border-blue-700' : 'bg-gray-200 text-black'}\n      hover:${dm ? highContrast ? 'bg-gray-800' : 'bg-gray-600' : highContrast ? 'bg-gray-100' : 'bg-gray-300'}\n      `,\n          children: [dm ? /*#__PURE__*/_jsxDEV(Sun, {\n            size: 18,\n            className: \"mr-2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 173,\n            columnNumber: 13\n          }, this) : /*#__PURE__*/_jsxDEV(Moon, {\n            size: 18,\n            className: \"mr-2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 173,\n            columnNumber: 50\n          }, this), dm ? 'Switch to Light Mode' : 'Switch to Dark Mode']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 166,\n          columnNumber: 5\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 164,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          className: `font-semibold mb-2 ${darkMode ? 'text-gray-200' : 'text-gray-700'}`,\n          children: \"Contrast\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 180,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => updateSettings('highContrast', !hc),\n          className: `w-full flex items-center justify-center px-4 py-2 rounded-md text-sm font-medium transition-colors\n        ${hc ? darkMode ? 'bg-yellow-400 text-black' : 'bg-blue-600 text-white' : darkMode ? 'bg-gray-700 hover:bg-gray-600 text-gray-300' : 'bg-gray-200 hover:bg-gray-300 text-gray-700'}\n          ${highContrast && hc ? darkMode ? 'border-2 border-white' : 'border-2 border-black' : ''}\n          `,\n          children: [/*#__PURE__*/_jsxDEV(Eye, {\n            size: 18,\n            className: \"mr-2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 190,\n            columnNumber: 11\n          }, this), hc ? 'Disable High Contrast' : 'Enable High Contrast']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 181,\n          columnNumber: 7\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 179,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n          className: `font-semibold mb-2 ${darkMode ? 'text-gray-200' : 'text-gray-700'}`,\n          children: \"Read Aloud (TalkBack Simulation)\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 197,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => updateSettings('talkbackEnabled', !talkbackEnabled),\n          className: `w-full flex items-center justify-center px-4 py-2 rounded-md text-sm font-medium transition-colors\n            ${talkbackEnabled ? darkMode ? 'bg-green-600 text-white' : 'bg-green-500 text-white' : darkMode ? 'bg-gray-700 hover:bg-gray-600 text-gray-300' : 'bg-gray-200 hover:bg-gray-300 text-gray-700'}\n              ${highContrast && talkbackEnabled ? darkMode ? 'border-2 border-white' : 'border-2 border-black' : ''}\n              `,\n          children: [/*#__PURE__*/_jsxDEV(Volume2, {\n            size: 18,\n            className: \"mr-2\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 207,\n            columnNumber: 15\n          }, this), talkbackEnabled ? 'Disable Read Aloud Feature' : 'Enable Read Aloud Feature']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 198,\n          columnNumber: 11\n        }, this), talkbackEnabled && /*#__PURE__*/_jsxDEV(\"p\", {\n          className: `mt-2 text-xs ${darkMode ? 'text-gray-400' : 'text-gray-600'}`,\n          children: [\"When enabled, look for \", /*#__PURE__*/_jsxDEV(Volume2, {\n            size: 12,\n            className: \"inline\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 210,\n            columnNumber: 136\n          }, this), \" icons to have text read aloud.\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 210,\n          columnNumber: 35\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 196,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 140,\n      columnNumber: 5\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 139,\n    columnNumber: 5\n  }, this);\n};\n\n// --- Screen Components (Adapted for Accessibility) ---\n_c4 = AccessibilitySettingsModal;\nconst HomeScreen = ({\n  setCurrentPage,\n  userName,\n  userId,\n  accessibilitySettings\n}) => /*#__PURE__*/_jsxDEV(\"div\", {\n  className: `p-6 min-h-[calc(100vh-4rem)] flex flex-col justify-center items-center transition-colors duration-300\n    ${accessibilitySettings.darkMode ? 'bg-gradient-to-br from-gray-800 to-gray-900 text-white' : 'bg-gradient-to-br from-blue-500 to-indigo-600 text-white'}\n    ${accessibilitySettings.highContrast && accessibilitySettings.darkMode ? 'border-2 border-yellow-400' : ''}\n    ${accessibilitySettings.highContrast && !accessibilitySettings.darkMode ? 'bg-white text-black border-2 border-blue-700' : ''}\n    `,\n  children: [/*#__PURE__*/_jsxDEV(UserCircle, {\n    size: 80,\n    className: `mb-4 ${accessibilitySettings.darkMode ? accessibilitySettings.highContrast ? 'text-yellow-300' : 'text-indigo-300' : accessibilitySettings.highContrast ? 'text-blue-700' : 'text-indigo-200'}`\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 226,\n    columnNumber: 5\n  }, this), /*#__PURE__*/_jsxDEV(\"h1\", {\n    className: `text-3xl font-bold mb-2 ${accessibilitySettings.highContrast && !accessibilitySettings.darkMode ? 'text-black' : ''}`,\n    children: [\"Welcome, \", userName || 'User', \"!\"]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 227,\n    columnNumber: 5\n  }, this), accessibilitySettings.talkbackEnabled && /*#__PURE__*/_jsxDEV(SpeakButton, {\n    textToSpeak: `Welcome, ${userName || 'User'}!`,\n    darkMode: accessibilitySettings.darkMode,\n    highContrast: accessibilitySettings.highContrast\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 228,\n    columnNumber: 47\n  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n    className: `mb-1 text-sm ${accessibilitySettings.darkMode ? accessibilitySettings.highContrast ? 'text-yellow-200' : 'text-indigo-100' : accessibilitySettings.highContrast ? 'text-gray-700' : 'text-indigo-100'}`,\n    children: [\"User ID: \", /*#__PURE__*/_jsxDEV(\"span\", {\n      className: `font-mono px-1 rounded ${accessibilitySettings.darkMode ? accessibilitySettings.highContrast ? 'bg-yellow-600 text-black' : 'bg-gray-700' : accessibilitySettings.highContrast ? 'bg-blue-200 text-black' : 'bg-indigo-700'}`,\n      children: userId || 'N/A'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 231,\n      columnNumber: 14\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 230,\n    columnNumber: 5\n  }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n    className: `mb-6 text-center ${accessibilitySettings.darkMode ? accessibilitySettings.highContrast ? 'text-yellow-200' : 'text-indigo-100' : accessibilitySettings.highContrast ? 'text-gray-700' : 'text-indigo-100'}`,\n    children: \"Your personal health assistant. Ready to help you manage your medical needs.\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 233,\n    columnNumber: 5\n  }, this), accessibilitySettings.talkbackEnabled && /*#__PURE__*/_jsxDEV(SpeakButton, {\n    textToSpeak: \"Your personal health assistant. Ready to help you manage your medical needs.\",\n    darkMode: accessibilitySettings.darkMode,\n    highContrast: accessibilitySettings.highContrast\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 234,\n    columnNumber: 47\n  }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"grid grid-cols-2 gap-4 w-full max-w-md\",\n    children: [[{\n      page: 'myAppointments',\n      label: 'My Appointments',\n      icon: ListChecks\n    }, {\n      page: 'chat',\n      label: 'Chat with Doctor',\n      icon: MessageSquare\n    }, {\n      page: 'prescriptions',\n      label: 'View Prescriptions',\n      icon: ListChecks\n    }].map(item => /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => setCurrentPage(item.page),\n      className: `p-4 rounded-lg shadow-md transition-all flex flex-col items-center justify-center aspect-square\n        ${accessibilitySettings.darkMode ? accessibilitySettings.highContrast ? 'bg-black text-yellow-300 border border-yellow-400 hover:bg-gray-900' : 'bg-gray-700 text-indigo-300 hover:bg-gray-600' : accessibilitySettings.highContrast ? 'bg-white text-blue-700 border border-blue-700 hover:bg-blue-50' : 'bg-white text-blue-600 hover:bg-blue-50'}\n          `,\n      children: [/*#__PURE__*/_jsxDEV(item.icon, {\n        size: 32,\n        className: \"mb-2\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 251,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"font-semibold text-center\",\n        children: item.label\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 252,\n        columnNumber: 11\n      }, this), accessibilitySettings.talkbackEnabled && /*#__PURE__*/_jsxDEV(SpeakButton, {\n        textToSpeak: item.label,\n        darkMode: accessibilitySettings.darkMode,\n        highContrast: accessibilitySettings.highContrast\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 253,\n        columnNumber: 53\n      }, this)]\n    }, item.page, true, {\n      fileName: _jsxFileName,\n      lineNumber: 242,\n      columnNumber: 7\n    }, this)), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: () => setCurrentPage('makeAppointment') // Kept separate if logic differs, or merge if identical to 'My Appointments' button\n      ,\n      className: `p-4 rounded-lg shadow-md transition-all flex flex-col items-center justify-center aspect-square\n      ${accessibilitySettings.darkMode ? accessibilitySettings.highContrast ? 'bg-black text-yellow-300 border border-yellow-400 hover:bg-gray-900' : 'bg-gray-700 text-indigo-300 hover:bg-gray-600' : accessibilitySettings.highContrast ? 'bg-white text-blue-700 border border-blue-700 hover:bg-blue-50' : 'bg-white text-blue-600 hover:bg-blue-50'}\n        `,\n      children: [/*#__PURE__*/_jsxDEV(CalendarPlus, {\n        size: 32,\n        className: \"mb-2\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 264,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"font-semibold text-center\",\n        children: \"Make Appointment\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 265,\n        columnNumber: 9\n      }, this), accessibilitySettings.talkbackEnabled && /*#__PURE__*/_jsxDEV(SpeakButton, {\n        textToSpeak: \"Make Appointment\",\n        darkMode: accessibilitySettings.darkMode,\n        highContrast: accessibilitySettings.highContrast\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 266,\n        columnNumber: 51\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 256,\n      columnNumber: 5\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 236,\n    columnNumber: 5\n  }, this)]\n}, void 0, true, {\n  fileName: _jsxFileName,\n  lineNumber: 221,\n  columnNumber: 3\n}, this);\n_c5 = HomeScreen;\nconst AppointmentsScreen = ({\n  userId,\n  showNotification,\n  accessibilitySettings\n}) => {\n  _s();\n  var _MOCK_DOCTORS$;\n  const [appointments, setAppointments] = useState([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  const [confirmCancelModal, setConfirmCancelModal] = useState({\n    isOpen: false,\n    appointmentId: null\n  });\n  const [doctor, setDoctor] = useState(((_MOCK_DOCTORS$ = MOCK_DOCTORS[0]) === null || _MOCK_DOCTORS$ === void 0 ? void 0 : _MOCK_DOCTORS$.id) || '');\n  const [date, setDate] = useState('');\n  const [time, setTime] = useState('');\n  const [reason, setReason] = useState('');\n  const appointmentsCollectionPath = `artifacts/${appId}/users/${userId}/appointments`;\n  useEffect(() => {\n    if (!db || !userId) {\n      console.log(\"Using mock appointments as db or userId is not available.\");\n      setAppointments([{\n        id: 'apt1',\n        doctor: 'Dr. Emily Carter',\n        date: '2024-06-10',\n        time: '10:00 AM',\n        reason: 'Check-up',\n        status: 'Scheduled'\n      }, {\n        id: 'apt2',\n        doctor: 'Dr. John Smith',\n        date: '2024-06-15',\n        time: '02:30 PM',\n        reason: 'Follow-up',\n        status: 'Scheduled'\n      }]);\n      setIsLoading(false);\n      return;\n    }\n    setIsLoading(true);\n    const q = query(collection(db, appointmentsCollectionPath));\n    const unsubscribe = onSnapshot(q, querySnapshot => {\n      const userAppointments = [];\n      querySnapshot.forEach(doc => {\n        userAppointments.push({\n          id: doc.id,\n          ...doc.data()\n        });\n      });\n      userAppointments.sort((a, b) => new Date(`${a.date} ${a.time}`) - new Date(`${b.date} ${b.time}`));\n      setAppointments(userAppointments);\n      setIsLoading(false);\n    }, error => {\n      console.error(\"Error fetching appointments: \", error);\n      showNotification(\"Error fetching appointments.\", \"error\");\n      setIsLoading(false);\n    });\n    return () => unsubscribe();\n  }, [userId, showNotification, appointmentsCollectionPath]);\n  const handleMakeAppointment = async e => {\n    var _MOCK_DOCTORS$find;\n    e.preventDefault();\n    if (!db || !userId) {\n      showNotification(\"Database not available.\", \"error\");\n      return;\n    }\n    if (!doctor || !date || !time || !reason) {\n      showNotification(\"Please fill all fields.\", \"error\");\n      return;\n    }\n    const newAppointment = {\n      doctor: ((_MOCK_DOCTORS$find = MOCK_DOCTORS.find(d => d.id === doctor)) === null || _MOCK_DOCTORS$find === void 0 ? void 0 : _MOCK_DOCTORS$find.name) || doctor,\n      date,\n      time,\n      reason,\n      status: 'Scheduled',\n      createdAt: new Date().toISOString()\n    };\n    try {\n      var _MOCK_DOCTORS$2;\n      await addDoc(collection(db, appointmentsCollectionPath), newAppointment);\n      showNotification(\"Appointment booked successfully!\", \"success\");\n      setDoctor(((_MOCK_DOCTORS$2 = MOCK_DOCTORS[0]) === null || _MOCK_DOCTORS$2 === void 0 ? void 0 : _MOCK_DOCTORS$2.id) || '');\n      setDate('');\n      setTime('');\n      setReason('');\n      setIsModalOpen(false);\n    } catch (error) {\n      console.error(\"Error adding appointment: \", error);\n      showNotification(\"Failed to book appointment.\", \"error\");\n    }\n  };\n  const confirmCancel = appointmentId => {\n    setConfirmCancelModal({\n      isOpen: true,\n      appointmentId\n    });\n  };\n  const executeCancelAppointment = async () => {\n    const appointmentId = confirmCancelModal.appointmentId;\n    if (!db || !userId || !appointmentId) {\n      showNotification(\"Database not available or invalid request.\", \"error\");\n      setConfirmCancelModal({\n        isOpen: false,\n        appointmentId: null\n      });\n      return;\n    }\n    try {\n      const appointmentRef = doc(db, appointmentsCollectionPath, appointmentId);\n      await updateDoc(appointmentRef, {\n        status: 'Cancelled'\n      });\n      showNotification(\"Appointment cancelled successfully.\", \"success\");\n    } catch (error) {\n      console.error(\"Error cancelling appointment: \", error);\n      showNotification(\"Failed to cancel appointment.\", \"error\");\n    }\n    setConfirmCancelModal({\n      isOpen: false,\n      appointmentId: null\n    });\n  };\n  const {\n    darkMode,\n    highContrast,\n    talkbackEnabled,\n    fontSize\n  } = accessibilitySettings;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `p-4 min-h-[calc(100vh-4rem)] ${darkMode ? 'bg-gray-800 text-gray-200' : 'bg-gray-100 text-gray-800'} ${highContrast && darkMode ? 'border border-yellow-400' : ''} ${highContrast && !darkMode ? 'border border-blue-600' : ''}`,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex justify-between items-center mb-6\",\n      children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n        className: `text-2xl font-semibold ${highContrast && darkMode ? 'text-yellow-300' : highContrast ? 'text-blue-700' : ''}`,\n        children: \"My Appointments\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 364,\n        columnNumber: 5\n      }, this), talkbackEnabled && /*#__PURE__*/_jsxDEV(SpeakButton, {\n        textToSpeak: \"My Appointments page.\",\n        darkMode: darkMode,\n        highContrast: highContrast\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 365,\n        columnNumber: 25\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: () => setIsModalOpen(true),\n        className: `font-semibold py-2 px-4 rounded-lg shadow-md flex items-center\n      ${darkMode ? highContrast ? 'bg-yellow-500 text-black hover:bg-yellow-600' : 'bg-blue-600 hover:bg-blue-700 text-white' : highContrast ? 'bg-blue-700 text-white hover:bg-blue-800' : 'bg-blue-500 hover:bg-blue-600 text-white'}\n      `,\n        children: [/*#__PURE__*/_jsxDEV(PlusCircle, {\n          size: 20,\n          className: \"mr-2\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 372,\n          columnNumber: 7\n        }, this), \"New Appointment\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 366,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 363,\n      columnNumber: 5\n    }, this), isLoading ? /*#__PURE__*/_jsxDEV(\"p\", {\n      className: `${darkMode ? 'text-gray-400' : 'text-gray-600'}`,\n      children: \"Loading appointments...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 378,\n      columnNumber: 9\n    }, this) : appointments.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n      className: `${darkMode ? 'text-gray-400' : 'text-gray-600'} text-center py-8`,\n      children: \"You have no upcoming appointments.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 380,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"space-y-4\",\n      children: appointments.map(apt => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `p-4 rounded-lg shadow-md\n            ${apt.status === 'Cancelled' ? darkMode ? 'bg-gray-700 opacity-70' : 'bg-gray-200 opacity-70' : darkMode ? 'bg-gray-700' : 'bg-white'}\n            ${highContrast && darkMode ? 'border border-yellow-300' : ''}\n            ${highContrast && !darkMode && apt.status !== 'Cancelled' ? 'border border-blue-500' : ''}\n            ${highContrast && !darkMode && apt.status === 'Cancelled' ? 'border border-gray-400' : ''}\n            `,\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: `text-lg font-semibold ${darkMode ? highContrast ? 'text-yellow-300' : 'text-blue-400' : highContrast ? 'text-blue-700' : 'text-blue-600'}`,\n          children: apt.doctor\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 390,\n          columnNumber: 13\n        }, this), talkbackEnabled && /*#__PURE__*/_jsxDEV(SpeakButton, {\n          textToSpeak: `Appointment with ${apt.doctor}`,\n          darkMode: darkMode,\n          highContrast: highContrast\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 391,\n          columnNumber: 33\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Date:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 392,\n            columnNumber: 16\n          }, this), \" \", apt.date, \" \", talkbackEnabled && /*#__PURE__*/_jsxDEV(SpeakButton, {\n            textToSpeak: `Date ${apt.date}`,\n            darkMode: darkMode,\n            highContrast: highContrast\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 392,\n            columnNumber: 70\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 392,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Time:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 393,\n            columnNumber: 16\n          }, this), \" \", apt.time, \" \", talkbackEnabled && /*#__PURE__*/_jsxDEV(SpeakButton, {\n            textToSpeak: `Time ${apt.time}`,\n            darkMode: darkMode,\n            highContrast: highContrast\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 393,\n            columnNumber: 70\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 393,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Reason:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 394,\n            columnNumber: 16\n          }, this), \" \", apt.reason, \" \", talkbackEnabled && /*#__PURE__*/_jsxDEV(SpeakButton, {\n            textToSpeak: `Reason ${apt.reason}`,\n            darkMode: darkMode,\n            highContrast: highContrast\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 394,\n            columnNumber: 74\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 394,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Status:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 395,\n            columnNumber: 16\n          }, this), \" \", /*#__PURE__*/_jsxDEV(\"span\", {\n            className: `${apt.status === 'Cancelled' ? darkMode ? 'text-red-400' : 'text-red-500' : darkMode ? 'text-green-400' : 'text-green-500'}`,\n            children: apt.status\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 395,\n            columnNumber: 41\n          }, this), \" \", talkbackEnabled && /*#__PURE__*/_jsxDEV(SpeakButton, {\n            textToSpeak: `Status ${apt.status}`,\n            darkMode: darkMode,\n            highContrast: highContrast\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 395,\n            columnNumber: 229\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 395,\n          columnNumber: 13\n        }, this), apt.status !== 'Cancelled' && /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => confirmCancel(apt.id),\n          className: `mt-3 font-semibold py-1 px-3 rounded-md text-sm flex items-center\n                ${darkMode ? highContrast ? 'bg-red-500 text-black hover:bg-red-600' : 'bg-red-600 hover:bg-red-700 text-white' : highContrast ? 'bg-red-700 text-white hover:bg-red-800' : 'bg-red-500 hover:bg-red-600 text-white'}\n                `,\n          children: [/*#__PURE__*/_jsxDEV(Trash2, {\n            size: 16,\n            className: \"mr-1\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 403,\n            columnNumber: 17\n          }, this), \"Cancel\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 397,\n          columnNumber: 15\n        }, this)]\n      }, apt.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 384,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 382,\n      columnNumber: 9\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      isOpen: isModalOpen,\n      onClose: () => setIsModalOpen(false),\n      title: \"Book a New Appointment\",\n      darkMode: darkMode,\n      highContrast: highContrast,\n      fontSizeClass: accessibilitySettings.fontSize,\n      children: /*#__PURE__*/_jsxDEV(\"form\", {\n        onSubmit: handleMakeAppointment,\n        className: \"space-y-4\",\n        children: [['doctor', 'date', 'time', 'reason'].map(field => /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(\"label\", {\n            htmlFor: field,\n            className: `block text-sm font-medium ${darkMode ? 'text-gray-300' : 'text-gray-700'} ${highContrast && darkMode ? 'text-yellow-200' : ''}`,\n            children: field.charAt(0).toUpperCase() + field.slice(1).replace('rV', 'r V')\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 417,\n            columnNumber: 9\n          }, this), field === 'doctor' ? /*#__PURE__*/_jsxDEV(\"select\", {\n            id: \"doctor\",\n            value: doctor,\n            onChange: e => setDoctor(e.target.value),\n            className: `mt-1 block w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none sm:text-sm ${darkMode ? 'bg-gray-700 border-gray-600 text-white focus:ring-blue-500 focus:border-blue-500' : 'border-gray-300 focus:ring-blue-500 focus:border-blue-500'} ${highContrast ? darkMode ? 'border-yellow-400' : 'border-blue-600' : ''}`,\n            children: MOCK_DOCTORS.map(doc => /*#__PURE__*/_jsxDEV(\"option\", {\n              value: doc.id,\n              children: doc.name\n            }, doc.id, false, {\n              fileName: _jsxFileName,\n              lineNumber: 422,\n              columnNumber: 36\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 421,\n            columnNumber: 11\n          }, this) : field === 'reason' ? /*#__PURE__*/_jsxDEV(\"textarea\", {\n            id: \"reason\",\n            rows: \"3\",\n            value: reason,\n            onChange: e => setReason(e.target.value),\n            placeholder: \"e.g., Annual check-up\",\n            className: `mt-1 block w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none sm:text-sm ${darkMode ? 'bg-gray-700 border-gray-600 text-white focus:ring-blue-500 focus:border-blue-500' : 'border-gray-300 focus:ring-blue-500 focus:border-blue-500'} ${highContrast ? darkMode ? 'border-yellow-400' : 'border-blue-600' : ''}`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 425,\n            columnNumber: 11\n          }, this) : /*#__PURE__*/_jsxDEV(\"input\", {\n            type: field,\n            id: field,\n            value: field === 'date' ? date : time,\n            onChange: e => field === 'date' ? setDate(e.target.value) : setTime(e.target.value),\n            min: field === 'date' ? new Date().toISOString().split('T')[0] : undefined,\n            className: `mt-1 block w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none sm:text-sm ${darkMode ? 'bg-gray-700 border-gray-600 text-white focus:ring-blue-500 focus:border-blue-500' : 'border-gray-300 focus:ring-blue-500 focus:border-blue-500'} ${highContrast ? darkMode ? 'border-yellow-400' : 'border-blue-600' : ''}`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 427,\n            columnNumber: 11\n          }, this)]\n        }, field, true, {\n          fileName: _jsxFileName,\n          lineNumber: 416,\n          columnNumber: 9\n        }, this)), /*#__PURE__*/_jsxDEV(\"button\", {\n          type: \"submit\",\n          className: `w-full font-semibold py-2 px-4 rounded-lg shadow-md flex items-center justify-center ${darkMode ? highContrast ? 'bg-yellow-500 text-black hover:bg-yellow-600' : 'bg-blue-600 hover:bg-blue-700 text-white' : highContrast ? 'bg-blue-700 text-white hover:bg-blue-800' : 'bg-blue-500 hover:bg-blue-600 text-white'}`,\n          children: \"Confirm Appointment\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 431,\n          columnNumber: 7\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 413,\n        columnNumber: 7\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 412,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      isOpen: confirmCancelModal.isOpen,\n      onClose: () => setConfirmCancelModal({\n        isOpen: false,\n        appointmentId: null\n      }),\n      title: \"Confirm Cancellation\",\n      darkMode: darkMode,\n      highContrast: highContrast,\n      fontSizeClass: accessibilitySettings.fontSize,\n      children: [/*#__PURE__*/_jsxDEV(\"p\", {\n        className: `${darkMode ? 'text-gray-300' : 'text-gray-700'} mb-4`,\n        children: \"Are you sure you want to cancel this appointment?\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 437,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex justify-end space-x-3\",\n        children: [/*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setConfirmCancelModal({\n            isOpen: false,\n            appointmentId: null\n          }),\n          className: `px-4 py-2 rounded-md text-sm font-medium ${darkMode ? 'bg-gray-600 hover:bg-gray-500 text-white' : 'bg-gray-300 hover:bg-gray-400 text-black'}`,\n          children: \"No, Keep It\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 439,\n          columnNumber: 7\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: executeCancelAppointment,\n          className: `px-4 py-2 rounded-md text-sm font-medium ${darkMode ? highContrast ? 'bg-red-500 text-black hover:bg-red-600' : 'bg-red-600 hover:bg-red-700 text-white' : highContrast ? 'bg-red-700 text-white hover:bg-red-800' : 'bg-red-500 hover:bg-red-600 text-white'}`,\n          children: \"Yes, Cancel\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 440,\n          columnNumber: 7\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 438,\n        columnNumber: 7\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 436,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 362,\n    columnNumber: 5\n  }, this);\n};\n_s(AppointmentsScreen, \"W55kFCBcyCggQStZzQ2j83Con5w=\");\n_c6 = AppointmentsScreen;\nconst ChatScreen = ({\n  userId,\n  showNotification,\n  accessibilitySettings\n}) => {\n  _s2();\n  var _MOCK_DOCTORS$3;\n  const [messages, setMessages] = useState([{\n    id: 'm1',\n    text: 'Hello! How can I help you today?',\n    sender: 'doctor',\n    time: '10:00 AM'\n  }, {\n    id: 'm2',\n    text: 'I have a slight fever and a headache.',\n    sender: 'user',\n    time: '10:01 AM'\n  }]);\n  const [newMessage, setNewMessage] = useState('');\n  const [selectedDoctor, setSelectedDoctor] = useState(((_MOCK_DOCTORS$3 = MOCK_DOCTORS[0]) === null || _MOCK_DOCTORS$3 === void 0 ? void 0 : _MOCK_DOCTORS$3.id) || '');\n  const messagesEndRef = useRef(null); // For scrolling to bottom\n\n  const {\n    darkMode,\n    highContrast,\n    talkbackEnabled\n  } = accessibilitySettings;\n  useEffect(() => {\n    var _messagesEndRef$curre;\n    // Scroll to bottom when new messages arrive\n    (_messagesEndRef$curre = messagesEndRef.current) === null || _messagesEndRef$curre === void 0 ? void 0 : _messagesEndRef$curre.scrollIntoView({\n      behavior: \"smooth\"\n    });\n  }, [messages]);\n  const handleSendMessage = async e => {\n    e.preventDefault();\n    if (!newMessage.trim()) return;\n    const messageData = {\n      text: newMessage,\n      sender: 'user',\n      time: new Date().toLocaleTimeString([], {\n        hour: '2-digit',\n        minute: '2-digit'\n      }),\n      createdAt: new Date().toISOString(),\n      userId: userId,\n      doctorId: selectedDoctor\n    };\n    setMessages(prevMessages => [...prevMessages, {\n      ...messageData,\n      id: `m${prevMessages.length + 1}`\n    }]);\n    setNewMessage('');\n    setTimeout(() => {\n      setMessages(prev => [...prev, {\n        id: `m${prev.length + 1}`,\n        text: \"Okay, I understand. Can you tell me more about your symptoms?\",\n        sender: 'doctor',\n        time: new Date().toLocaleTimeString([], {\n          hour: '2-digit',\n          minute: '2-digit'\n        })\n      }]);\n    }, 1500);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `flex flex-col h-[calc(100vh-4rem)] transition-colors duration-300 ${darkMode ? 'bg-gray-900' : 'bg-gray-50'} ${highContrast && darkMode ? 'border border-yellow-400' : ''} ${highContrast && !darkMode ? 'border border-blue-600' : ''}`,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: `p-4 border-b shadow-sm ${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-white border-gray-200'} ${highContrast && darkMode ? 'border-b-yellow-400' : ''} ${highContrast && !darkMode ? 'border-b-blue-600' : ''}`,\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        htmlFor: \"doctorSelect\",\n        className: `text-sm font-medium mr-2 ${darkMode ? 'text-gray-300' : 'text-gray-700'} ${highContrast && darkMode ? 'text-yellow-200' : ''}`,\n        children: \"Chat with:\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 482,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"select\", {\n        id: \"doctorSelect\",\n        value: selectedDoctor,\n        onChange: e => setSelectedDoctor(e.target.value),\n        className: `p-2 border rounded-md focus:outline-none ${darkMode ? 'bg-gray-700 border-gray-600 text-white focus:ring-blue-500 focus:border-blue-500' : 'border-gray-300 focus:ring-blue-500 focus:border-blue-500'} ${highContrast ? darkMode ? 'border-yellow-400' : 'border-blue-600' : ''}`,\n        children: MOCK_DOCTORS.map(doc => /*#__PURE__*/_jsxDEV(\"option\", {\n          value: doc.id,\n          children: doc.name\n        }, doc.id, false, {\n          fileName: _jsxFileName,\n          lineNumber: 487,\n          columnNumber: 30\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 483,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 481,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"flex-grow p-4 space-y-4 overflow-y-auto\",\n      children: [messages.map(msg => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `flex ${msg.sender === 'user' ? 'justify-end' : 'justify-start'}`,\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: `max-w-xs lg:max-w-md px-4 py-2 rounded-xl shadow\n        ${msg.sender === 'user' ? darkMode ? highContrast ? 'bg-blue-700 text-white rounded-br-none border border-white' : 'bg-blue-600 text-white rounded-br-none' : highContrast ? 'bg-blue-600 text-white rounded-br-none border border-black' : 'bg-blue-500 text-white rounded-br-none' : darkMode ? highContrast ? 'bg-black text-yellow-300 rounded-bl-none border border-yellow-400' : 'bg-gray-700 text-gray-200 rounded-bl-none' : highContrast ? 'bg-gray-300 text-black rounded-bl-none border border-black' : 'bg-gray-200 text-gray-800 rounded-bl-none'}\n        `,\n          children: [/*#__PURE__*/_jsxDEV(\"p\", {\n            children: [msg.text, \" \", talkbackEnabled && /*#__PURE__*/_jsxDEV(SpeakButton, {\n              textToSpeak: msg.text,\n              darkMode: darkMode,\n              highContrast: highContrast\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 500,\n              columnNumber: 43\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 500,\n            columnNumber: 9\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            className: `text-xs mt-1 ${msg.sender === 'user' ? darkMode ? 'text-blue-200 text-right' : 'text-blue-100 text-right' : darkMode ? 'text-gray-400 text-left' : 'text-gray-500 text-left'}`,\n            children: msg.time\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 501,\n            columnNumber: 9\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 494,\n          columnNumber: 7\n        }, this)\n      }, msg.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 493,\n        columnNumber: 7\n      }, this)), /*#__PURE__*/_jsxDEV(\"div\", {\n        ref: messagesEndRef\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 507,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 491,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: handleSendMessage,\n      className: `p-4 border-t flex items-center ${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-white border-gray-200'} ${highContrast && darkMode ? 'border-t-yellow-400' : ''} ${highContrast && !darkMode ? 'border-t-blue-600' : ''}`,\n      children: [/*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"text\",\n        value: newMessage,\n        onChange: e => setNewMessage(e.target.value),\n        placeholder: \"Type your message...\",\n        className: `flex-grow p-3 border rounded-l-lg focus:outline-none focus:ring-2 ${darkMode ? 'bg-gray-700 border-gray-600 text-white placeholder-gray-400 focus:ring-blue-500' : 'border-gray-300 placeholder-gray-500 focus:ring-blue-400'} ${highContrast ? darkMode ? 'border-yellow-400 focus:ring-yellow-300' : 'border-blue-600 focus:ring-blue-500' : ''}`\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 511,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"submit\",\n        className: `p-3 rounded-r-lg focus:outline-none focus:ring-2\n      ${darkMode ? highContrast ? 'bg-yellow-500 text-black hover:bg-yellow-600 focus:ring-yellow-300' : 'bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500' : highContrast ? 'bg-blue-700 text-white hover:bg-blue-800 focus:ring-blue-600' : 'bg-blue-500 text-white hover:bg-blue-600 focus:ring-blue-400'}\n      `,\n        children: /*#__PURE__*/_jsxDEV(Send, {\n          size: 24\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 518,\n          columnNumber: 7\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 515,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 510,\n      columnNumber: 5\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 480,\n    columnNumber: 5\n  }, this);\n};\n_s2(ChatScreen, \"TPLf7ltEIuCeNXWDoHiNA1ATmJg=\");\n_c7 = ChatScreen;\nconst PrescriptionsScreen = ({\n  userId,\n  showNotification,\n  accessibilitySettings\n}) => {\n  _s3();\n  const [prescriptions, setPrescriptions] = useState([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const {\n    darkMode,\n    highContrast,\n    talkbackEnabled\n  } = accessibilitySettings;\n  useEffect(() => {\n    setIsLoading(true);\n    // Simulate fetching data (using mock for now)\n    // TODO: Replace with Firestore fetching if needed\n    setPrescriptions(MOCK_PRESCRIPTIONS);\n    setIsLoading(false);\n  }, [userId]);\n  if (isLoading) {\n    return /*#__PURE__*/_jsxDEV(\"p\", {\n      className: `p-6 ${darkMode ? 'text-gray-400' : 'text-gray-600'}`,\n      children: \"Loading prescriptions...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 539,\n      columnNumber: 12\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: `p-4 min-h-[calc(100vh-4rem)] ${darkMode ? 'bg-gray-800 text-gray-200' : 'bg-gray-100 text-gray-800'} ${highContrast && darkMode ? 'border border-yellow-400' : ''} ${highContrast && !darkMode ? 'border border-blue-600' : ''}`,\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: `text-2xl font-semibold mb-6 ${highContrast && darkMode ? 'text-yellow-300' : highContrast ? 'text-blue-700' : ''}`,\n      children: \"My Prescriptions\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 544,\n      columnNumber: 5\n    }, this), talkbackEnabled && /*#__PURE__*/_jsxDEV(SpeakButton, {\n      textToSpeak: \"My Prescriptions page.\",\n      darkMode: darkMode,\n      highContrast: highContrast\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 545,\n      columnNumber: 25\n    }, this), prescriptions.length === 0 ? /*#__PURE__*/_jsxDEV(\"p\", {\n      className: `${darkMode ? 'text-gray-400' : 'text-gray-600'} text-center py-8`,\n      children: \"You have no prescriptions on file.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 547,\n      columnNumber: 7\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"space-y-4\",\n      children: prescriptions.map(rx => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `p-4 rounded-lg shadow-md\n          ${darkMode ? 'bg-gray-700 border-l-4 border-green-500' : 'bg-white border-l-4 border-green-500'}\n          ${highContrast && darkMode ? 'border-yellow-300 border-l-yellow-400' : ''}\n          ${highContrast && !darkMode ? 'border-blue-500 border-l-blue-700' : ''}\n          `,\n        children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n          className: `text-lg font-semibold ${darkMode ? highContrast ? 'text-yellow-300' : 'text-green-400' : highContrast ? 'text-blue-700' : 'text-green-700'}`,\n          children: rx.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 556,\n          columnNumber: 11\n        }, this), talkbackEnabled && /*#__PURE__*/_jsxDEV(SpeakButton, {\n          textToSpeak: `Prescription: ${rx.name}`,\n          darkMode: darkMode,\n          highContrast: highContrast\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 557,\n          columnNumber: 31\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Dosage:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 558,\n            columnNumber: 14\n          }, this), \" \", rx.dosage, \" \", talkbackEnabled && /*#__PURE__*/_jsxDEV(SpeakButton, {\n            textToSpeak: `Dosage ${rx.dosage}`,\n            darkMode: darkMode,\n            highContrast: highContrast\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 558,\n            columnNumber: 71\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 558,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: `text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'}`,\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Prescribed on:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 559,\n            columnNumber: 84\n          }, this), \" \", rx.date, \" \", talkbackEnabled && /*#__PURE__*/_jsxDEV(SpeakButton, {\n            textToSpeak: `Prescribed on ${rx.date}`,\n            darkMode: darkMode,\n            highContrast: highContrast\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 559,\n            columnNumber: 146\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 559,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n          className: `text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'}`,\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Prescribed by:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 560,\n            columnNumber: 84\n          }, this), \" \", rx.doctor, \" \", talkbackEnabled && /*#__PURE__*/_jsxDEV(SpeakButton, {\n            textToSpeak: `Prescribed by ${rx.doctor}`,\n            darkMode: darkMode,\n            highContrast: highContrast\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 560,\n            columnNumber: 148\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 560,\n          columnNumber: 11\n        }, this)]\n      }, rx.id, true, {\n        fileName: _jsxFileName,\n        lineNumber: 551,\n        columnNumber: 9\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 549,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 543,\n    columnNumber: 5\n  }, this);\n};\n\n// --- Main App Component ---\n_s3(PrescriptionsScreen, \"4TTPA92ftk9of4sfJ+/uzSY85gE=\");\n_c8 = PrescriptionsScreen;\nconst App = () => {\n  _s4();\n  const [currentPage, setCurrentPage] = useState('home');\n  const [currentUser, setCurrentUser] = useState(null);\n  const [isAuthReady, setIsAuthReady] = useState(false);\n  const [userName, setUserName] = useState('');\n  const [notification, setNotification] = useState({\n    message: '',\n    type: ''\n  });\n  const [isSettingsModalOpen, setIsSettingsModalOpen] = useState(false);\n\n  // Accessibility Settings State\n  const [accessibilitySettings, setAccessibilitySettings] = useState({\n    fontSize: 'text-base',\n    // Tailwind classes: text-sm, text-base, text-lg, text-xl, text-2xl\n    highContrast: false,\n    darkMode: false,\n    talkbackEnabled: false // For simulated TalkBack feature\n  });\n\n  // Load settings from localStorage\n  useEffect(() => {\n    const savedSettings = localStorage.getItem('medicAssistAccessibilitySettings');\n    if (savedSettings) {\n      setAccessibilitySettings(JSON.parse(savedSettings));\n    }\n  }, []);\n\n  // Save settings to localStorage and apply dark mode\n  useEffect(() => {\n    localStorage.setItem('medicAssistAccessibilitySettings', JSON.stringify(accessibilitySettings));\n    if (accessibilitySettings.darkMode) {\n      document.documentElement.classList.add('dark');\n    } else {\n      document.documentElement.classList.remove('dark');\n    }\n  }, [accessibilitySettings]);\n  const updateAccessibilitySetting = (key, value) => {\n    setAccessibilitySettings(prev => ({\n      ...prev,\n      [key]: value\n    }));\n  };\n  const showNotification = useCallback((message, type = 'info', duration = 3000) => {\n    setNotification({\n      message,\n      type\n    });\n    setTimeout(() => setNotification({\n      message: '',\n      type: ''\n    }), duration);\n  }, []);\n  useEffect(() => {\n    if (!auth) {\n      console.warn(\"Firebase Auth is not initialized.\");\n      setIsAuthReady(true);\n      return;\n    }\n    const unsubscribe = onAuthStateChanged(auth, async user => {\n      if (user) {\n        setCurrentUser(user);\n        setUserName(user.displayName || `User-${user.uid.substring(0, 5)}`);\n      } else {\n        setCurrentUser(null);\n        setUserName('');\n        try {\n          let __initial_auth_token = 'undefined';\n          if (typeof __initial_auth_token !== 'undefined' && __initial_auth_token) {\n            await signInWithCustomToken(auth, __initial_auth_token);\n          } else {\n            await signInAnonymously(auth);\n          }\n        } catch (error) {\n          console.error(\"Error during auto sign-in:\", error);\n          showNotification(\"Authentication issue. Some features might be limited.\", \"error\");\n        }\n      }\n      setIsAuthReady(true);\n    });\n    return () => unsubscribe();\n  }, [showNotification]);\n  const handleSignOut = async () => {\n    if (!auth) {\n      showNotification(\"Auth service not available.\", \"error\");\n      return;\n    }\n    try {\n      await signOut(auth);\n      setCurrentPage('home');\n      showNotification(\"Signed out successfully.\", \"success\");\n    } catch (error) {\n      console.error(\"Error signing out:\", error);\n      showNotification(\"Error signing out.\", \"error\");\n    }\n  };\n  const renderPage = () => {\n    if (!isAuthReady) {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `flex justify-center items-center h-screen ${accessibilitySettings.fontSize} ${accessibilitySettings.darkMode ? 'bg-gray-900 text-white' : 'bg-gray-100 text-black'}`,\n        children: /*#__PURE__*/_jsxDEV(\"p\", {\n          children: \"Initializing App...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 656,\n          columnNumber: 197\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 656,\n        columnNumber: 14\n      }, this);\n    }\n    const userId = currentUser ? currentUser.uid : null;\n    const commonProps = {\n      userId,\n      showNotification,\n      accessibilitySettings\n    };\n    switch (currentPage) {\n      case 'home':\n        return /*#__PURE__*/_jsxDEV(HomeScreen, {\n          setCurrentPage: setCurrentPage,\n          userName: userName,\n          ...commonProps\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 662,\n          columnNumber: 27\n        }, this);\n      case 'makeAppointment': // Fallthrough to myAppointments for now\n      case 'myAppointments':\n        return /*#__PURE__*/_jsxDEV(AppointmentsScreen, {\n          ...commonProps\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 664,\n          columnNumber: 37\n        }, this);\n      case 'chat':\n        return /*#__PURE__*/_jsxDEV(ChatScreen, {\n          ...commonProps\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 665,\n          columnNumber: 27\n        }, this);\n      case 'prescriptions':\n        return /*#__PURE__*/_jsxDEV(PrescriptionsScreen, {\n          ...commonProps\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 666,\n          columnNumber: 36\n        }, this);\n      default:\n        return /*#__PURE__*/_jsxDEV(HomeScreen, {\n          setCurrentPage: setCurrentPage,\n          userName: userName,\n          ...commonProps\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 667,\n          columnNumber: 23\n        }, this);\n    }\n  };\n  const NavItem = ({\n    page,\n    label,\n    icon: IconComponent\n  }) => /*#__PURE__*/_jsxDEV(\"button\", {\n    onClick: () => setCurrentPage(page),\n    className: `flex flex-col items-center justify-center p-2 w-full transition-colors duration-200 ease-in-out\n      ${accessibilitySettings.fontSize}\n      ${currentPage === page ? accessibilitySettings.darkMode ? accessibilitySettings.highContrast ? 'text-yellow-300' : 'text-blue-400' : accessibilitySettings.highContrast ? 'text-blue-700 font-bold' : 'text-blue-500' : accessibilitySettings.darkMode ? accessibilitySettings.highContrast ? 'text-gray-400 hover:text-yellow-200' : 'text-gray-400 hover:text-blue-300' : accessibilitySettings.highContrast ? 'text-gray-600 hover:text-blue-600' : 'text-gray-500 hover:text-blue-400'}\n      `,\n    children: [/*#__PURE__*/_jsxDEV(IconComponent, {\n      size: 24,\n      strokeWidth: currentPage === page ? 2.5 : 2\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 682,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n      className: \"text-xs mt-1\",\n      children: label\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 683,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 672,\n    columnNumber: 5\n  }, this);\n\n  // Apply base font size and high contrast classes to the main container\n  // Dark mode is applied to documentElement\n  let appClasses = `font-sans antialiased flex flex-col min-h-screen transition-colors duration-300 ${accessibilitySettings.fontSize}`;\n  if (accessibilitySettings.darkMode) {\n    appClasses += accessibilitySettings.highContrast ? ' bg-black text-yellow-300' : ' bg-gray-900 text-gray-200';\n  } else {\n    appClasses += accessibilitySettings.highContrast ? ' bg-white text-black border-2 border-blue-900' : ' bg-gray-100 text-gray-800';\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: appClasses,\n    children: [/*#__PURE__*/_jsxDEV(Notification, {\n      message: notification.message,\n      type: notification.type,\n      onDismiss: () => setNotification({\n        message: '',\n        type: ''\n      }),\n      darkMode: accessibilitySettings.darkMode\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 699,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"header\", {\n      className: `p-4 shadow-md flex justify-between items-center sticky top-0 z-40\n      ${accessibilitySettings.darkMode ? accessibilitySettings.highContrast ? 'bg-black text-yellow-300 border-b-2 border-yellow-400' : 'bg-gray-800 text-white' : accessibilitySettings.highContrast ? 'bg-white text-blue-700 border-b-2 border-blue-700' : 'bg-blue-600 text-white'}\n        `,\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        className: \"text-xl font-semibold\",\n        children: \"Medic Assist\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 706,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"flex items-center space-x-2\",\n        children: [currentUser && /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: handleSignOut,\n          className: `text-sm flex items-center p-2 rounded-md\n            ${accessibilitySettings.darkMode ? accessibilitySettings.highContrast ? 'hover:bg-yellow-700 text-yellow-300 border border-yellow-300' : 'hover:bg-gray-700 text-gray-300' : accessibilitySettings.highContrast ? 'hover:bg-blue-200 text-blue-700 border border-blue-700' : 'hover:bg-blue-700 text-blue-100'}\n              `,\n          children: [/*#__PURE__*/_jsxDEV(LogOut, {\n            size: 18,\n            className: \"mr-1\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 714,\n            columnNumber: 15\n          }, this), \" Sign Out\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 709,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n          onClick: () => setIsSettingsModalOpen(true),\n          \"aria-label\": \"Open accessibility settings\",\n          className: `p-2 rounded-md\n          ${accessibilitySettings.darkMode ? accessibilitySettings.highContrast ? 'hover:bg-yellow-700 text-yellow-300' : 'hover:bg-gray-700 text-gray-300' : accessibilitySettings.highContrast ? 'hover:bg-blue-200 text-blue-700' : 'hover:bg-blue-700 text-blue-100'}\n            `,\n          children: /*#__PURE__*/_jsxDEV(Settings, {\n            size: 22\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 726,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 717,\n          columnNumber: 9\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 707,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 701,\n      columnNumber: 5\n    }, this), /*#__PURE__*/_jsxDEV(\"main\", {\n      className: \"flex-grow overflow-y-auto\",\n      children: renderPage()\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 731,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"nav\", {\n      className: `fixed bottom-0 left-0 right-0 border-t shadow-t-md flex justify-around items-center h-16 z-40\n              ${accessibilitySettings.darkMode ? accessibilitySettings.highContrast ? 'bg-black border-t-yellow-400' : 'bg-gray-800 border-gray-700' : accessibilitySettings.highContrast ? 'bg-white border-t-blue-700' : 'bg-white border-gray-200'}\n                `,\n      children: [/*#__PURE__*/_jsxDEV(NavItem, {\n        page: \"home\",\n        label: \"Home\",\n        icon: Home\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 740,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(NavItem, {\n        page: \"myAppointments\",\n        label: \"Appointments\",\n        icon: CalendarPlus\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 741,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(NavItem, {\n        page: \"chat\",\n        label: \"Chat\",\n        icon: MessageSquare\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 742,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(NavItem, {\n        page: \"prescriptions\",\n        label: \"Prescriptions\",\n        icon: ListChecks\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 743,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 735,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"h-16\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 745,\n      columnNumber: 17\n    }, this), \" \", /*#__PURE__*/_jsxDEV(AccessibilitySettingsModal, {\n      isOpen: isSettingsModalOpen,\n      onClose: () => setIsSettingsModalOpen(false),\n      settings: accessibilitySettings,\n      updateSettings: updateAccessibilitySetting,\n      darkMode: accessibilitySettings.darkMode,\n      highContrast: accessibilitySettings.highContrast,\n      fontSizeClass: accessibilitySettings.fontSize\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 747,\n      columnNumber: 17\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 698,\n    columnNumber: 5\n  }, this);\n};\n_s4(App, \"k0kKmiOL10yikJh4oOTjf1RNrDg=\");\n_c9 = App;\nexport default App;\nvar _c, _c2, _c3, _c4, _c5, _c6, _c7, _c8, _c9;\n$RefreshReg$(_c, \"Modal\");\n$RefreshReg$(_c2, \"Notification\");\n$RefreshReg$(_c3, \"SpeakButton\");\n$RefreshReg$(_c4, \"AccessibilitySettingsModal\");\n$RefreshReg$(_c5, \"HomeScreen\");\n$RefreshReg$(_c6, \"AppointmentsScreen\");\n$RefreshReg$(_c7, \"ChatScreen\");\n$RefreshReg$(_c8, \"PrescriptionsScreen\");\n$RefreshReg$(_c9, \"App\");","map":{"version":3,"names":["React","useState","useEffect","useCallback","useRef","initializeApp","getAuth","signInAnonymously","signInWithCustomToken","onAuthStateChanged","signOut","getFirestore","collection","addDoc","getDocs","doc","updateDoc","deleteDoc","onSnapshot","query","where","setDoc","Home","CalendarPlus","MessageSquare","ListChecks","UserCircle","XCircle","Send","PlusCircle","Trash2","LogOut","CheckCircle","AlertTriangle","Info","Settings","Volume2","Eye","Moon","Sun","ZoomIn","ZoomOut","jsxDEV","_jsxDEV","firebaseConfig","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","finalFirebaseConfig","app","auth","db","e","console","error","warn","MOCK_PRESCRIPTIONS","id","name","dosage","date","doctor","MOCK_DOCTORS","Modal","isOpen","onClose","title","children","darkMode","highContrast","fontSizeClass","className","fileName","_jsxFileName","lineNumber","columnNumber","onClick","size","_c","Notification","message","type","onDismiss","bgColor","Icon","_c2","SpeakButton","textToSpeak","handleSpeak","stopPropagation","window","utterance","SpeechSynthesisUtterance","speechSynthesis","cancel","speak","substring","_c3","AccessibilitySettingsModal","settings","updateSettings","fontSize","hc","dm","talkbackEnabled","fontSizes","label","value","map","fs","_c4","HomeScreen","setCurrentPage","userName","userId","accessibilitySettings","page","icon","item","_c5","AppointmentsScreen","showNotification","_s","_MOCK_DOCTORS$","appointments","setAppointments","isLoading","setIsLoading","isModalOpen","setIsModalOpen","confirmCancelModal","setConfirmCancelModal","appointmentId","setDoctor","setDate","time","setTime","reason","setReason","appointmentsCollectionPath","log","status","q","unsubscribe","querySnapshot","userAppointments","forEach","push","data","sort","a","b","Date","handleMakeAppointment","_MOCK_DOCTORS$find","preventDefault","newAppointment","find","d","createdAt","toISOString","_MOCK_DOCTORS$2","confirmCancel","executeCancelAppointment","appointmentRef","length","apt","onSubmit","field","htmlFor","charAt","toUpperCase","slice","replace","onChange","target","rows","placeholder","min","split","undefined","_c6","ChatScreen","_s2","_MOCK_DOCTORS$3","messages","setMessages","text","sender","newMessage","setNewMessage","selectedDoctor","setSelectedDoctor","messagesEndRef","_messagesEndRef$curre","current","scrollIntoView","behavior","handleSendMessage","trim","messageData","toLocaleTimeString","hour","minute","doctorId","prevMessages","setTimeout","prev","msg","ref","_c7","PrescriptionsScreen","_s3","prescriptions","setPrescriptions","rx","_c8","App","_s4","currentPage","currentUser","setCurrentUser","isAuthReady","setIsAuthReady","setUserName","notification","setNotification","isSettingsModalOpen","setIsSettingsModalOpen","setAccessibilitySettings","savedSettings","localStorage","getItem","JSON","parse","setItem","stringify","document","documentElement","classList","add","remove","updateAccessibilitySetting","key","duration","user","displayName","uid","__initial_auth_token","handleSignOut","renderPage","commonProps","NavItem","IconComponent","strokeWidth","appClasses","_c9","$RefreshReg$"],"sources":["/home/diego/ExpoApp/my-app/src/App.jsx"],"sourcesContent":["import React, { useState, useEffect, useCallback, useRef } from 'react';\nimport { initializeApp } from 'firebase/app';\nimport { getAuth, signInAnonymously, signInWithCustomToken, onAuthStateChanged, signOut } from 'firebase/auth'; // Added signInWithCustomToken\nimport { getFirestore, collection, addDoc, getDocs, doc, updateDoc, deleteDoc, onSnapshot, query, where, setDoc } from 'firebase/firestore';\nimport { Home, CalendarPlus, MessageSquare, ListChecks, UserCircle, XCircle, Send, PlusCircle, Trash2, LogOut, CheckCircle, AlertTriangle, Info, Settings, Volume2, Eye, Moon, Sun, ZoomIn, ZoomOut } from 'lucide-react';\nimport './index.css';\n// --- Firebase Configuration ---\nconst firebaseConfig = {\n  apiKey: \"YOUR_API_KEY\",\n  authDomain: \"YOUR_AUTH_DOMAIN\",\n  projectId: \"YOUR_PROJECT_ID\",\n  storageBucket: \"YOUR_STORAGE_BUCKET\",\n  messagingSenderId: \"YOUR_MESSAGING_SENDER_ID\",\n  appId: \"YOUR_APP_ID\"\n};\n\n// --- Global Firebase Variables (to be provided by the environment) ---\n//const appId = typeof __app_id !== 'undefined' ? __app_id : 'default-app-id';\nconst appId = 'default-app-id';\n//const finalFirebaseConfig = typeof __firebase_config !== 'undefined' ? JSON.parse(__firebase_config) : firebaseConfig;\nconst finalFirebaseConfig ='false';\n\n// --- Initialize Firebase ---\nlet app;\nlet auth;\nlet db;\n\ntry {\n  app = initializeApp(finalFirebaseConfig);\n  auth = getAuth(app);\n  db = getFirestore(app);\n  // import { setLogLevel } from \"firebase/firestore\"; // For debugging\n  // setLogLevel('debug');\n} catch (e) {\n  console.error(\"Error initializing Firebase:\", e);\n  if (!db) {\n    console.warn(\"Firestore (db) is not initialized. App will run with mock data and no persistence.\");\n  }\n}\n\n// --- Mock Data ---\nconst MOCK_PRESCRIPTIONS = [\n  { id: 'p1', name: 'Amoxicillin 250mg', dosage: '1 tablet every 8 hours for 7 days', date: '2024-05-20', doctor: 'Dr. Smith' },\n{ id: 'p2', name: 'Ibuprofen 400mg', dosage: '1 tablet as needed for pain', date: '2024-05-15', doctor: 'Dr. Jones' },\n{ id: 'p3', name: 'Metformin 500mg', dosage: '1 tablet twice daily with meals', date: '2024-04-28', doctor: 'Dr. Brown' },\n];\n\nconst MOCK_DOCTORS = [\n  { id: 'doc1', name: 'Dr. Emily Carter (Cardiologist)' },\n  { id: 'doc2', name: 'Dr. John Smith (General Practitioner)' },\n  { id: 'doc3', name: 'Dr. Sarah Lee (Pediatrician)' },\n];\n\n// --- Helper Components ---\n\n// Modal Component\nconst Modal = ({ isOpen, onClose, title, children, darkMode, highContrast, fontSizeClass }) => {\n  if (!isOpen) return null;\n\n  return (\n    <div className=\"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center p-4 z-50\">\n    <div className={`rounded-lg shadow-xl p-6 w-full max-w-md ${fontSizeClass} ${darkMode ? 'bg-gray-800 text-white' : 'bg-white text-gray-800'} ${highContrast ? (darkMode ? 'border-2 border-yellow-400' : 'border-2 border-blue-600') : ''}`}>\n    <div className=\"flex justify-between items-center mb-4\">\n    <h3 className={`text-xl font-semibold ${highContrast && darkMode ? 'text-yellow-300' : highContrast ? 'text-blue-700' : (darkMode ? 'text-white' : 'text-gray-800')}`}>{title}</h3>\n    <button onClick={onClose} className={`${darkMode ? 'text-gray-300 hover:text-white' : 'text-gray-500 hover:text-gray-700'}`}>\n    <XCircle size={24} />\n    </button>\n    </div>\n    <div>{children}</div>\n    </div>\n    </div>\n  );\n};\n\n// Notification Component\nconst Notification = ({ message, type, onDismiss, darkMode }) => {\n  if (!message) return null;\n\n  let bgColor;\n  if (darkMode) {\n    bgColor = type === 'success' ? 'bg-green-700' : type === 'error' ? 'bg-red-700' : 'bg-blue-700';\n  } else {\n    bgColor = type === 'success' ? 'bg-green-500' : type === 'error' ? 'bg-red-500' : 'bg-blue-500';\n  }\n  const Icon = type === 'success' ? CheckCircle : type === 'error' ? AlertTriangle : Info;\n\n  return (\n    <div className={`fixed top-4 right-4 ${bgColor} text-white p-4 rounded-lg shadow-md flex items-center z-[100]`}>\n    <Icon size={24} className=\"mr-3\" />\n    <span>{message}</span>\n    {onDismiss && (\n      <button onClick={onDismiss} className=\"ml-4 text-white hover:text-gray-200\">\n      <XCircle size={20} />\n      </button>\n    )}\n    </div>\n  );\n};\n\n// SpeakButton for TalkBack simulation\nconst SpeakButton = ({ textToSpeak, darkMode, highContrast }) => {\n  const handleSpeak = (e) => {\n    e.stopPropagation(); // Prevent parent clicks if button is inside another clickable element\n    if ('speechSynthesis' in window && textToSpeak) {\n      const utterance = new SpeechSynthesisUtterance(textToSpeak);\n      // Optional: Configure voice, rate, pitch\n      // utterance.lang = 'en-US';\n      window.speechSynthesis.cancel(); // Cancel any previous speech\n      window.speechSynthesis.speak(utterance);\n    } else {\n      console.warn(\"Speech synthesis not supported or no text to speak.\");\n    }\n  };\n\n  return (\n    <button\n    onClick={handleSpeak}\n    aria-label={`Speak: ${textToSpeak.substring(0,30)}...`}\n    title=\"Read aloud\"\n    className={`ml-2 p-1 rounded ${darkMode ? (highContrast ? 'bg-yellow-500 text-black' : 'bg-gray-600 hover:bg-gray-500') : (highContrast ? 'bg-blue-500 text-white' : 'bg-gray-200 hover:bg-gray-300') }`}\n    >\n    <Volume2 size={16} />\n    </button>\n  );\n};\n\n\n// --- Accessibility Settings Modal ---\nconst AccessibilitySettingsModal = ({ isOpen, onClose, settings, updateSettings, darkMode, highContrast, fontSizeClass }) => {\n  const { fontSize, highContrast: hc, darkMode: dm, talkbackEnabled } = settings;\n\n  const fontSizes = [\n    { label: 'Normal', value: 'text-base' },\n    { label: 'Large', value: 'text-lg' },\n    { label: 'Extra Large', value: 'text-xl' },\n  ];\n\n  return (\n    <Modal isOpen={isOpen} onClose={onClose} title=\"Accessibility Settings\" darkMode={darkMode} highContrast={highContrast} fontSizeClass={fontSizeClass}>\n    <div className=\"space-y-6\">\n    {/* Font Size */}\n    <div>\n    <h4 className={`font-semibold mb-2 ${darkMode ? 'text-gray-200' : 'text-gray-700'}`}>Font Size</h4>\n    <div className=\"flex space-x-2\">\n    {fontSizes.map(fs => (\n      <button\n      key={fs.value}\n      onClick={() => updateSettings('fontSize', fs.value)}\n      className={`px-3 py-1.5 rounded-md text-sm font-medium transition-colors\n        ${fontSize === fs.value\n          ? (darkMode ? 'bg-blue-500 text-white' : 'bg-blue-600 text-white')\n          : (darkMode ? 'bg-gray-700 hover:bg-gray-600 text-gray-300' : 'bg-gray-200 hover:bg-gray-300 text-gray-700')}\n          ${highContrast && fontSize === fs.value ? (darkMode ? 'border-2 border-yellow-400' : 'border-2 border-blue-800') : ''}\n          ${highContrast && fontSize !== fs.value ? (darkMode ? 'border border-gray-500' : 'border border-gray-400') : ''}\n          `}\n          >\n          {fs.label}\n          </button>\n    ))}\n    </div>\n    </div>\n\n    {/* Dark Mode */}\n    <div>\n    <h4 className={`font-semibold mb-2 ${darkMode ? 'text-gray-200' : 'text-gray-700'}`}>Theme</h4>\n    <button\n    onClick={() => updateSettings('darkMode', !dm)}\n    className={`w-full flex items-center justify-center px-4 py-2 rounded-md text-sm font-medium transition-colors\n      ${dm ? (highContrast ? 'bg-gray-900 text-yellow-300 border-2 border-yellow-400' : 'bg-gray-700 text-white') : (highContrast ? 'bg-white text-blue-700 border-2 border-blue-700' : 'bg-gray-200 text-black')}\n      hover:${dm ? (highContrast ? 'bg-gray-800' : 'bg-gray-600') : (highContrast ? 'bg-gray-100' : 'bg-gray-300')}\n      `}\n      >\n      {dm ? <Sun size={18} className=\"mr-2\" /> : <Moon size={18} className=\"mr-2\" />}\n      {dm ? 'Switch to Light Mode' : 'Switch to Dark Mode'}\n      </button>\n      </div>\n\n      {/* High Contrast */}\n      <div>\n      <h4 className={`font-semibold mb-2 ${darkMode ? 'text-gray-200' : 'text-gray-700'}`}>Contrast</h4>\n      <button\n      onClick={() => updateSettings('highContrast', !hc)}\n      className={`w-full flex items-center justify-center px-4 py-2 rounded-md text-sm font-medium transition-colors\n        ${hc\n          ? (darkMode ? 'bg-yellow-400 text-black' : 'bg-blue-600 text-white')\n          : (darkMode ? 'bg-gray-700 hover:bg-gray-600 text-gray-300' : 'bg-gray-200 hover:bg-gray-300 text-gray-700')}\n          ${highContrast && hc ? (darkMode ? 'border-2 border-white': 'border-2 border-black') : ''}\n          `}\n          >\n          <Eye size={18} className=\"mr-2\" />\n          {hc ? 'Disable High Contrast' : 'Enable High Contrast'}\n          </button>\n          </div>\n\n          {/* TalkBack Simulation */}\n          <div>\n          <h4 className={`font-semibold mb-2 ${darkMode ? 'text-gray-200' : 'text-gray-700'}`}>Read Aloud (TalkBack Simulation)</h4>\n          <button\n          onClick={() => updateSettings('talkbackEnabled', !talkbackEnabled)}\n          className={`w-full flex items-center justify-center px-4 py-2 rounded-md text-sm font-medium transition-colors\n            ${talkbackEnabled\n              ? (darkMode ? 'bg-green-600 text-white' : 'bg-green-500 text-white')\n              : (darkMode ? 'bg-gray-700 hover:bg-gray-600 text-gray-300' : 'bg-gray-200 hover:bg-gray-300 text-gray-700')}\n              ${highContrast && talkbackEnabled ? (darkMode ? 'border-2 border-white': 'border-2 border-black') : ''}\n              `}\n              >\n              <Volume2 size={18} className=\"mr-2\" />\n              {talkbackEnabled ? 'Disable Read Aloud Feature' : 'Enable Read Aloud Feature'}\n              </button>\n              {talkbackEnabled && <p className={`mt-2 text-xs ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>When enabled, look for <Volume2 size={12} className=\"inline\" /> icons to have text read aloud.</p>}\n              </div>\n              </div>\n              </Modal>\n  );\n};\n\n\n// --- Screen Components (Adapted for Accessibility) ---\n\nconst HomeScreen = ({ setCurrentPage, userName, userId, accessibilitySettings }) => (\n  <div className={`p-6 min-h-[calc(100vh-4rem)] flex flex-col justify-center items-center transition-colors duration-300\n    ${accessibilitySettings.darkMode ? 'bg-gradient-to-br from-gray-800 to-gray-900 text-white' : 'bg-gradient-to-br from-blue-500 to-indigo-600 text-white'}\n    ${accessibilitySettings.highContrast && accessibilitySettings.darkMode ? 'border-2 border-yellow-400' : ''}\n    ${accessibilitySettings.highContrast && !accessibilitySettings.darkMode ? 'bg-white text-black border-2 border-blue-700' : ''}\n    `}>\n    <UserCircle size={80} className={`mb-4 ${accessibilitySettings.darkMode ? (accessibilitySettings.highContrast ? 'text-yellow-300' : 'text-indigo-300') : (accessibilitySettings.highContrast ? 'text-blue-700' : 'text-indigo-200')}`} />\n    <h1 className={`text-3xl font-bold mb-2 ${accessibilitySettings.highContrast && !accessibilitySettings.darkMode ? 'text-black' : ''}`}>Welcome, {userName || 'User'}!</h1>\n    {accessibilitySettings.talkbackEnabled && <SpeakButton textToSpeak={`Welcome, ${userName || 'User'}!`} darkMode={accessibilitySettings.darkMode} highContrast={accessibilitySettings.highContrast} />}\n\n    <p className={`mb-1 text-sm ${accessibilitySettings.darkMode ? (accessibilitySettings.highContrast ? 'text-yellow-200' : 'text-indigo-100') : (accessibilitySettings.highContrast ? 'text-gray-700' : 'text-indigo-100')}`}>\n    User ID: <span className={`font-mono px-1 rounded ${accessibilitySettings.darkMode ? (accessibilitySettings.highContrast ? 'bg-yellow-600 text-black' : 'bg-gray-700') : (accessibilitySettings.highContrast ? 'bg-blue-200 text-black' : 'bg-indigo-700')}`}>{userId || 'N/A'}</span>\n    </p>\n    <p className={`mb-6 text-center ${accessibilitySettings.darkMode ? (accessibilitySettings.highContrast ? 'text-yellow-200' : 'text-indigo-100') : (accessibilitySettings.highContrast ? 'text-gray-700' : 'text-indigo-100')}`}>Your personal health assistant. Ready to help you manage your medical needs.</p>\n    {accessibilitySettings.talkbackEnabled && <SpeakButton textToSpeak=\"Your personal health assistant. Ready to help you manage your medical needs.\" darkMode={accessibilitySettings.darkMode} highContrast={accessibilitySettings.highContrast} />}\n\n    <div className=\"grid grid-cols-2 gap-4 w-full max-w-md\">\n    {[\n      { page: 'myAppointments', label: 'My Appointments', icon: ListChecks },\n      { page: 'chat', label: 'Chat with Doctor', icon: MessageSquare },\n      { page: 'prescriptions', label: 'View Prescriptions', icon: ListChecks },\n    ].map(item => (\n      <button\n      key={item.page}\n      onClick={() => setCurrentPage(item.page)}\n      className={`p-4 rounded-lg shadow-md transition-all flex flex-col items-center justify-center aspect-square\n        ${accessibilitySettings.darkMode\n          ? (accessibilitySettings.highContrast ? 'bg-black text-yellow-300 border border-yellow-400 hover:bg-gray-900' : 'bg-gray-700 text-indigo-300 hover:bg-gray-600')\n          : (accessibilitySettings.highContrast ? 'bg-white text-blue-700 border border-blue-700 hover:bg-blue-50' : 'bg-white text-blue-600 hover:bg-blue-50')}\n          `}\n          >\n          <item.icon size={32} className=\"mb-2\" />\n          <span className=\"font-semibold text-center\">{item.label}</span>\n          {accessibilitySettings.talkbackEnabled && <SpeakButton textToSpeak={item.label} darkMode={accessibilitySettings.darkMode} highContrast={accessibilitySettings.highContrast} />}\n          </button>\n    ))}\n    <button\n    onClick={() => setCurrentPage('makeAppointment')} // Kept separate if logic differs, or merge if identical to 'My Appointments' button\n    className={`p-4 rounded-lg shadow-md transition-all flex flex-col items-center justify-center aspect-square\n      ${accessibilitySettings.darkMode\n        ? (accessibilitySettings.highContrast ? 'bg-black text-yellow-300 border border-yellow-400 hover:bg-gray-900' : 'bg-gray-700 text-indigo-300 hover:bg-gray-600')\n        : (accessibilitySettings.highContrast ? 'bg-white text-blue-700 border border-blue-700 hover:bg-blue-50' : 'bg-white text-blue-600 hover:bg-blue-50')}\n        `}\n        >\n        <CalendarPlus size={32} className=\"mb-2\" />\n        <span className=\"font-semibold text-center\">Make Appointment</span>\n        {accessibilitySettings.talkbackEnabled && <SpeakButton textToSpeak=\"Make Appointment\" darkMode={accessibilitySettings.darkMode} highContrast={accessibilitySettings.highContrast} />}\n        </button>\n        </div>\n        </div>\n);\n\nconst AppointmentsScreen = ({ userId, showNotification, accessibilitySettings }) => {\n  const [appointments, setAppointments] = useState([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const [isModalOpen, setIsModalOpen] = useState(false);\n  const [confirmCancelModal, setConfirmCancelModal] = useState({ isOpen: false, appointmentId: null });\n\n  const [doctor, setDoctor] = useState(MOCK_DOCTORS[0]?.id || '');\n  const [date, setDate] = useState('');\n  const [time, setTime] = useState('');\n  const [reason, setReason] = useState('');\n\n  const appointmentsCollectionPath = `artifacts/${appId}/users/${userId}/appointments`;\n\n  useEffect(() => {\n    if (!db || !userId) {\n      console.log(\"Using mock appointments as db or userId is not available.\");\n      setAppointments([\n        { id: 'apt1', doctor: 'Dr. Emily Carter', date: '2024-06-10', time: '10:00 AM', reason: 'Check-up', status: 'Scheduled' },\n        { id: 'apt2', doctor: 'Dr. John Smith', date: '2024-06-15', time: '02:30 PM', reason: 'Follow-up', status: 'Scheduled' },\n      ]);\n      setIsLoading(false);\n      return;\n    }\n\n    setIsLoading(true);\n    const q = query(collection(db, appointmentsCollectionPath));\n    const unsubscribe = onSnapshot(q, (querySnapshot) => {\n      const userAppointments = [];\n      querySnapshot.forEach((doc) => {\n        userAppointments.push({ id: doc.id, ...doc.data() });\n      });\n      userAppointments.sort((a, b) => new Date(`${a.date} ${a.time}`) - new Date(`${b.date} ${b.time}`));\n      setAppointments(userAppointments);\n      setIsLoading(false);\n    }, (error) => {\n      console.error(\"Error fetching appointments: \", error);\n      showNotification(\"Error fetching appointments.\", \"error\");\n      setIsLoading(false);\n    });\n    return () => unsubscribe();\n  }, [userId, showNotification, appointmentsCollectionPath]);\n\n  const handleMakeAppointment = async (e) => {\n    e.preventDefault();\n    if (!db || !userId) {\n      showNotification(\"Database not available.\", \"error\"); return;\n    }\n    if (!doctor || !date || !time || !reason) {\n      showNotification(\"Please fill all fields.\", \"error\"); return;\n    }\n    const newAppointment = {\n      doctor: MOCK_DOCTORS.find(d => d.id === doctor)?.name || doctor, date, time, reason,\n      status: 'Scheduled', createdAt: new Date().toISOString()\n    };\n    try {\n      await addDoc(collection(db, appointmentsCollectionPath), newAppointment);\n      showNotification(\"Appointment booked successfully!\", \"success\");\n      setDoctor(MOCK_DOCTORS[0]?.id || ''); setDate(''); setTime(''); setReason('');\n      setIsModalOpen(false);\n    } catch (error) {\n      console.error(\"Error adding appointment: \", error);\n      showNotification(\"Failed to book appointment.\", \"error\");\n    }\n  };\n\n  const confirmCancel = (appointmentId) => {\n    setConfirmCancelModal({ isOpen: true, appointmentId });\n  };\n\n  const executeCancelAppointment = async () => {\n    const appointmentId = confirmCancelModal.appointmentId;\n    if (!db || !userId || !appointmentId) {\n      showNotification(\"Database not available or invalid request.\", \"error\");\n      setConfirmCancelModal({ isOpen: false, appointmentId: null });\n      return;\n    }\n    try {\n      const appointmentRef = doc(db, appointmentsCollectionPath, appointmentId);\n      await updateDoc(appointmentRef, { status: 'Cancelled' });\n      showNotification(\"Appointment cancelled successfully.\", \"success\");\n    } catch (error) {\n      console.error(\"Error cancelling appointment: \", error);\n      showNotification(\"Failed to cancel appointment.\", \"error\");\n    }\n    setConfirmCancelModal({ isOpen: false, appointmentId: null });\n  };\n\n  const { darkMode, highContrast, talkbackEnabled, fontSize } = accessibilitySettings;\n\n  return (\n    <div className={`p-4 min-h-[calc(100vh-4rem)] ${darkMode ? 'bg-gray-800 text-gray-200' : 'bg-gray-100 text-gray-800'} ${highContrast && darkMode ? 'border border-yellow-400' : ''} ${highContrast && !darkMode ? 'border border-blue-600' : ''}`}>\n    <div className=\"flex justify-between items-center mb-6\">\n    <h2 className={`text-2xl font-semibold ${highContrast && darkMode ? 'text-yellow-300' : highContrast ? 'text-blue-700' : ''}`}>My Appointments</h2>\n    {talkbackEnabled && <SpeakButton textToSpeak=\"My Appointments page.\" darkMode={darkMode} highContrast={highContrast}/>}\n    <button\n    onClick={() => setIsModalOpen(true)}\n    className={`font-semibold py-2 px-4 rounded-lg shadow-md flex items-center\n      ${darkMode ? (highContrast ? 'bg-yellow-500 text-black hover:bg-yellow-600' : 'bg-blue-600 hover:bg-blue-700 text-white') : (highContrast ? 'bg-blue-700 text-white hover:bg-blue-800' : 'bg-blue-500 hover:bg-blue-600 text-white')}\n      `}\n      >\n      <PlusCircle size={20} className=\"mr-2\" />\n      New Appointment\n      </button>\n      </div>\n\n      {isLoading ? (\n        <p className={`${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>Loading appointments...</p>\n      ) : appointments.length === 0 ? (\n        <p className={`${darkMode ? 'text-gray-400' : 'text-gray-600'} text-center py-8`}>You have no upcoming appointments.</p>\n      ) : (\n        <div className=\"space-y-4\">\n        {appointments.map(apt => (\n          <div key={apt.id} className={`p-4 rounded-lg shadow-md\n            ${apt.status === 'Cancelled' ? (darkMode ? 'bg-gray-700 opacity-70' : 'bg-gray-200 opacity-70') : (darkMode ? 'bg-gray-700' : 'bg-white')}\n            ${highContrast && darkMode ? 'border border-yellow-300' : ''}\n            ${highContrast && !darkMode && apt.status !== 'Cancelled' ? 'border border-blue-500' : ''}\n            ${highContrast && !darkMode && apt.status === 'Cancelled' ? 'border border-gray-400' : ''}\n            `}>\n            <h3 className={`text-lg font-semibold ${darkMode ? (highContrast ? 'text-yellow-300' : 'text-blue-400') : (highContrast ? 'text-blue-700' : 'text-blue-600')}`}>{apt.doctor}</h3>\n            {talkbackEnabled && <SpeakButton textToSpeak={`Appointment with ${apt.doctor}`} darkMode={darkMode} highContrast={highContrast}/>}\n            <p><strong>Date:</strong> {apt.date} {talkbackEnabled && <SpeakButton textToSpeak={`Date ${apt.date}`} darkMode={darkMode} highContrast={highContrast}/>}</p>\n            <p><strong>Time:</strong> {apt.time} {talkbackEnabled && <SpeakButton textToSpeak={`Time ${apt.time}`} darkMode={darkMode} highContrast={highContrast}/>}</p>\n            <p><strong>Reason:</strong> {apt.reason} {talkbackEnabled && <SpeakButton textToSpeak={`Reason ${apt.reason}`} darkMode={darkMode} highContrast={highContrast}/>}</p>\n            <p><strong>Status:</strong> <span className={`${apt.status === 'Cancelled' ? (darkMode ? 'text-red-400' : 'text-red-500') : (darkMode ? 'text-green-400' : 'text-green-500')}`}>{apt.status}</span> {talkbackEnabled && <SpeakButton textToSpeak={`Status ${apt.status}`} darkMode={darkMode} highContrast={highContrast}/>}</p>\n            {apt.status !== 'Cancelled' && (\n              <button\n              onClick={() => confirmCancel(apt.id)}\n              className={`mt-3 font-semibold py-1 px-3 rounded-md text-sm flex items-center\n                ${darkMode ? (highContrast ? 'bg-red-500 text-black hover:bg-red-600' : 'bg-red-600 hover:bg-red-700 text-white') : (highContrast ? 'bg-red-700 text-white hover:bg-red-800' : 'bg-red-500 hover:bg-red-600 text-white')}\n                `}\n                >\n                <Trash2 size={16} className=\"mr-1\" />\n                Cancel\n                </button>\n            )}\n            </div>\n        ))}\n        </div>\n      )}\n\n      <Modal isOpen={isModalOpen} onClose={() => setIsModalOpen(false)} title=\"Book a New Appointment\" darkMode={darkMode} highContrast={highContrast} fontSizeClass={accessibilitySettings.fontSize}>\n      <form onSubmit={handleMakeAppointment} className=\"space-y-4\">\n      {/* Form fields adapted for accessibility settings */}\n      {['doctor', 'date', 'time', 'reason'].map(field => (\n        <div key={field}>\n        <label htmlFor={field} className={`block text-sm font-medium ${darkMode ? 'text-gray-300' : 'text-gray-700'} ${highContrast && darkMode ? 'text-yellow-200':''}`}>\n        {field.charAt(0).toUpperCase() + field.slice(1).replace('rV', 'r V')}\n        </label>\n        {field === 'doctor' ? (\n          <select id=\"doctor\" value={doctor} onChange={(e) => setDoctor(e.target.value)} className={`mt-1 block w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none sm:text-sm ${darkMode ? 'bg-gray-700 border-gray-600 text-white focus:ring-blue-500 focus:border-blue-500' : 'border-gray-300 focus:ring-blue-500 focus:border-blue-500'} ${highContrast ? (darkMode ? 'border-yellow-400' : 'border-blue-600') : ''}`}>\n          {MOCK_DOCTORS.map(doc => <option key={doc.id} value={doc.id}>{doc.name}</option>)}\n          </select>\n        ) : field === 'reason' ? (\n          <textarea id=\"reason\" rows=\"3\" value={reason} onChange={(e) => setReason(e.target.value)} placeholder=\"e.g., Annual check-up\" className={`mt-1 block w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none sm:text-sm ${darkMode ? 'bg-gray-700 border-gray-600 text-white focus:ring-blue-500 focus:border-blue-500' : 'border-gray-300 focus:ring-blue-500 focus:border-blue-500'} ${highContrast ? (darkMode ? 'border-yellow-400' : 'border-blue-600') : ''}`}></textarea>\n        ) : (\n          <input type={field} id={field} value={field === 'date' ? date : time} onChange={(e) => field === 'date' ? setDate(e.target.value) : setTime(e.target.value)} min={field === 'date' ? new Date().toISOString().split('T')[0] : undefined} className={`mt-1 block w-full px-3 py-2 border rounded-md shadow-sm focus:outline-none sm:text-sm ${darkMode ? 'bg-gray-700 border-gray-600 text-white focus:ring-blue-500 focus:border-blue-500' : 'border-gray-300 focus:ring-blue-500 focus:border-blue-500'} ${highContrast ? (darkMode ? 'border-yellow-400' : 'border-blue-600') : ''}`} />\n        )}\n        </div>\n      ))}\n      <button type=\"submit\" className={`w-full font-semibold py-2 px-4 rounded-lg shadow-md flex items-center justify-center ${darkMode ? (highContrast ? 'bg-yellow-500 text-black hover:bg-yellow-600' : 'bg-blue-600 hover:bg-blue-700 text-white') : (highContrast ? 'bg-blue-700 text-white hover:bg-blue-800' : 'bg-blue-500 hover:bg-blue-600 text-white')}`}>\n      Confirm Appointment\n      </button>\n      </form>\n      </Modal>\n      <Modal isOpen={confirmCancelModal.isOpen} onClose={() => setConfirmCancelModal({ isOpen: false, appointmentId: null })} title=\"Confirm Cancellation\" darkMode={darkMode} highContrast={highContrast} fontSizeClass={accessibilitySettings.fontSize}>\n      <p className={`${darkMode ? 'text-gray-300' : 'text-gray-700'} mb-4`}>Are you sure you want to cancel this appointment?</p>\n      <div className=\"flex justify-end space-x-3\">\n      <button onClick={() => setConfirmCancelModal({ isOpen: false, appointmentId: null })} className={`px-4 py-2 rounded-md text-sm font-medium ${darkMode ? 'bg-gray-600 hover:bg-gray-500 text-white' : 'bg-gray-300 hover:bg-gray-400 text-black'}`}>No, Keep It</button>\n      <button onClick={executeCancelAppointment} className={`px-4 py-2 rounded-md text-sm font-medium ${darkMode ? (highContrast ? 'bg-red-500 text-black hover:bg-red-600' : 'bg-red-600 hover:bg-red-700 text-white') : (highContrast ? 'bg-red-700 text-white hover:bg-red-800' : 'bg-red-500 hover:bg-red-600 text-white')}`}>Yes, Cancel</button>\n      </div>\n      </Modal>\n      </div>\n  );\n};\n\nconst ChatScreen = ({ userId, showNotification, accessibilitySettings }) => {\n  const [messages, setMessages] = useState([\n    { id: 'm1', text: 'Hello! How can I help you today?', sender: 'doctor', time: '10:00 AM' },\n    { id: 'm2', text: 'I have a slight fever and a headache.', sender: 'user', time: '10:01 AM' },\n  ]);\n  const [newMessage, setNewMessage] = useState('');\n  const [selectedDoctor, setSelectedDoctor] = useState(MOCK_DOCTORS[0]?.id || '');\n  const messagesEndRef = useRef(null); // For scrolling to bottom\n\n  const { darkMode, highContrast, talkbackEnabled } = accessibilitySettings;\n\n  useEffect(() => { // Scroll to bottom when new messages arrive\n    messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\n  }, [messages]);\n\n  const handleSendMessage = async (e) => {\n    e.preventDefault();\n    if (!newMessage.trim()) return;\n    const messageData = {\n      text: newMessage, sender: 'user', time: new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' }),\n      createdAt: new Date().toISOString(), userId: userId, doctorId: selectedDoctor\n    };\n    setMessages(prevMessages => [...prevMessages, { ...messageData, id: `m${prevMessages.length + 1}` }]);\n    setNewMessage('');\n    setTimeout(() => {\n      setMessages(prev => [...prev, {\n        id: `m${prev.length + 1}`, text: \"Okay, I understand. Can you tell me more about your symptoms?\",\n        sender: 'doctor', time: new Date().toLocaleTimeString([], { hour: '2-digit', minute: '2-digit' })\n      }]);\n    }, 1500);\n  };\n\n  return (\n    <div className={`flex flex-col h-[calc(100vh-4rem)] transition-colors duration-300 ${darkMode ? 'bg-gray-900' : 'bg-gray-50'} ${highContrast && darkMode ? 'border border-yellow-400' : ''} ${highContrast && !darkMode ? 'border border-blue-600' : ''}`}>\n    <div className={`p-4 border-b shadow-sm ${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-white border-gray-200'} ${highContrast && darkMode ? 'border-b-yellow-400':''} ${highContrast && !darkMode ? 'border-b-blue-600':''}`}>\n    <label htmlFor=\"doctorSelect\" className={`text-sm font-medium mr-2 ${darkMode ? 'text-gray-300' : 'text-gray-700'} ${highContrast && darkMode ? 'text-yellow-200':''}`}>Chat with:</label>\n    <select\n    id=\"doctorSelect\" value={selectedDoctor} onChange={(e) => setSelectedDoctor(e.target.value)}\n    className={`p-2 border rounded-md focus:outline-none ${darkMode ? 'bg-gray-700 border-gray-600 text-white focus:ring-blue-500 focus:border-blue-500' : 'border-gray-300 focus:ring-blue-500 focus:border-blue-500'} ${highContrast ? (darkMode ? 'border-yellow-400' : 'border-blue-600') : ''}`}\n    >\n    {MOCK_DOCTORS.map(doc => <option key={doc.id} value={doc.id}>{doc.name}</option>)}\n    </select>\n    </div>\n\n    <div className=\"flex-grow p-4 space-y-4 overflow-y-auto\">\n    {messages.map(msg => (\n      <div key={msg.id} className={`flex ${msg.sender === 'user' ? 'justify-end' : 'justify-start'}`}>\n      <div className={`max-w-xs lg:max-w-md px-4 py-2 rounded-xl shadow\n        ${msg.sender === 'user'\n          ? (darkMode ? (highContrast ? 'bg-blue-700 text-white rounded-br-none border border-white' : 'bg-blue-600 text-white rounded-br-none') : (highContrast ? 'bg-blue-600 text-white rounded-br-none border border-black' : 'bg-blue-500 text-white rounded-br-none'))\n          : (darkMode ? (highContrast ? 'bg-black text-yellow-300 rounded-bl-none border border-yellow-400' : 'bg-gray-700 text-gray-200 rounded-bl-none') : (highContrast ? 'bg-gray-300 text-black rounded-bl-none border border-black' : 'bg-gray-200 text-gray-800 rounded-bl-none'))\n        }\n        `}>\n        <p>{msg.text} {talkbackEnabled && <SpeakButton textToSpeak={msg.text} darkMode={darkMode} highContrast={highContrast}/>}</p>\n        <p className={`text-xs mt-1 ${msg.sender === 'user' ? (darkMode ? 'text-blue-200 text-right' : 'text-blue-100 text-right') : (darkMode ? 'text-gray-400 text-left' : 'text-gray-500 text-left')}`}>\n        {msg.time}\n        </p>\n        </div>\n        </div>\n    ))}\n    <div ref={messagesEndRef} />\n    </div>\n\n    <form onSubmit={handleSendMessage} className={`p-4 border-t flex items-center ${darkMode ? 'bg-gray-800 border-gray-700' : 'bg-white border-gray-200'} ${highContrast && darkMode ? 'border-t-yellow-400':''} ${highContrast && !darkMode ? 'border-t-blue-600':''}`}>\n    <input\n    type=\"text\" value={newMessage} onChange={(e) => setNewMessage(e.target.value)} placeholder=\"Type your message...\"\n    className={`flex-grow p-3 border rounded-l-lg focus:outline-none focus:ring-2 ${darkMode ? 'bg-gray-700 border-gray-600 text-white placeholder-gray-400 focus:ring-blue-500' : 'border-gray-300 placeholder-gray-500 focus:ring-blue-400'} ${highContrast ? (darkMode ? 'border-yellow-400 focus:ring-yellow-300' : 'border-blue-600 focus:ring-blue-500') : ''}`}\n    />\n    <button type=\"submit\" className={`p-3 rounded-r-lg focus:outline-none focus:ring-2\n      ${darkMode ? (highContrast ? 'bg-yellow-500 text-black hover:bg-yellow-600 focus:ring-yellow-300' : 'bg-blue-600 text-white hover:bg-blue-700 focus:ring-blue-500') : (highContrast ? 'bg-blue-700 text-white hover:bg-blue-800 focus:ring-blue-600' : 'bg-blue-500 text-white hover:bg-blue-600 focus:ring-blue-400')}\n      `}>\n      <Send size={24} />\n      </button>\n      </form>\n      </div>\n  );\n};\n\nconst PrescriptionsScreen = ({ userId, showNotification, accessibilitySettings }) => {\n  const [prescriptions, setPrescriptions] = useState([]);\n  const [isLoading, setIsLoading] = useState(true);\n  const { darkMode, highContrast, talkbackEnabled } = accessibilitySettings;\n\n  useEffect(() => {\n    setIsLoading(true);\n    // Simulate fetching data (using mock for now)\n    // TODO: Replace with Firestore fetching if needed\n    setPrescriptions(MOCK_PRESCRIPTIONS);\n    setIsLoading(false);\n  }, [userId]);\n\n  if (isLoading) {\n    return <p className={`p-6 ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}>Loading prescriptions...</p>;\n  }\n\n  return (\n    <div className={`p-4 min-h-[calc(100vh-4rem)] ${darkMode ? 'bg-gray-800 text-gray-200' : 'bg-gray-100 text-gray-800'} ${highContrast && darkMode ? 'border border-yellow-400' : ''} ${highContrast && !darkMode ? 'border border-blue-600' : ''}`}>\n    <h2 className={`text-2xl font-semibold mb-6 ${highContrast && darkMode ? 'text-yellow-300' : highContrast ? 'text-blue-700' : ''}`}>My Prescriptions</h2>\n    {talkbackEnabled && <SpeakButton textToSpeak=\"My Prescriptions page.\" darkMode={darkMode} highContrast={highContrast}/>}\n    {prescriptions.length === 0 ? (\n      <p className={`${darkMode ? 'text-gray-400' : 'text-gray-600'} text-center py-8`}>You have no prescriptions on file.</p>\n    ) : (\n      <div className=\"space-y-4\">\n      {prescriptions.map(rx => (\n        <div key={rx.id} className={`p-4 rounded-lg shadow-md\n          ${darkMode ? 'bg-gray-700 border-l-4 border-green-500' : 'bg-white border-l-4 border-green-500'}\n          ${highContrast && darkMode ? 'border-yellow-300 border-l-yellow-400' : ''}\n          ${highContrast && !darkMode ? 'border-blue-500 border-l-blue-700' : ''}\n          `}>\n          <h3 className={`text-lg font-semibold ${darkMode ? (highContrast ? 'text-yellow-300' : 'text-green-400') : (highContrast ? 'text-blue-700' : 'text-green-700')}`}>{rx.name}</h3>\n          {talkbackEnabled && <SpeakButton textToSpeak={`Prescription: ${rx.name}`} darkMode={darkMode} highContrast={highContrast}/>}\n          <p><strong>Dosage:</strong> {rx.dosage} {talkbackEnabled && <SpeakButton textToSpeak={`Dosage ${rx.dosage}`} darkMode={darkMode} highContrast={highContrast}/>}</p>\n          <p className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}><strong>Prescribed on:</strong> {rx.date} {talkbackEnabled && <SpeakButton textToSpeak={`Prescribed on ${rx.date}`} darkMode={darkMode} highContrast={highContrast}/>}</p>\n          <p className={`text-sm ${darkMode ? 'text-gray-400' : 'text-gray-600'}`}><strong>Prescribed by:</strong> {rx.doctor} {talkbackEnabled && <SpeakButton textToSpeak={`Prescribed by ${rx.doctor}`} darkMode={darkMode} highContrast={highContrast}/>}</p>\n          </div>\n      ))}\n      </div>\n    )}\n    </div>\n  );\n};\n\n\n// --- Main App Component ---\nconst App = () => {\n  const [currentPage, setCurrentPage] = useState('home');\n  const [currentUser, setCurrentUser] = useState(null);\n  const [isAuthReady, setIsAuthReady] = useState(false);\n  const [userName, setUserName] = useState('');\n  const [notification, setNotification] = useState({ message: '', type: '' });\n  const [isSettingsModalOpen, setIsSettingsModalOpen] = useState(false);\n\n  // Accessibility Settings State\n  const [accessibilitySettings, setAccessibilitySettings] = useState({\n    fontSize: 'text-base', // Tailwind classes: text-sm, text-base, text-lg, text-xl, text-2xl\n    highContrast: false,\n    darkMode: false,\n    talkbackEnabled: false, // For simulated TalkBack feature\n  });\n\n  // Load settings from localStorage\n  useEffect(() => {\n    const savedSettings = localStorage.getItem('medicAssistAccessibilitySettings');\n    if (savedSettings) {\n      setAccessibilitySettings(JSON.parse(savedSettings));\n    }\n  }, []);\n\n  // Save settings to localStorage and apply dark mode\n  useEffect(() => {\n    localStorage.setItem('medicAssistAccessibilitySettings', JSON.stringify(accessibilitySettings));\n    if (accessibilitySettings.darkMode) {\n      document.documentElement.classList.add('dark');\n    } else {\n      document.documentElement.classList.remove('dark');\n    }\n  }, [accessibilitySettings]);\n\n  const updateAccessibilitySetting = (key, value) => {\n    setAccessibilitySettings(prev => ({ ...prev, [key]: value }));\n  };\n\n  const showNotification = useCallback((message, type = 'info', duration = 3000) => {\n    setNotification({ message, type });\n    setTimeout(() => setNotification({ message: '', type: '' }), duration);\n  }, []);\n\n  useEffect(() => {\n    if (!auth) {\n      console.warn(\"Firebase Auth is not initialized.\");\n      setIsAuthReady(true); return;\n    }\n    const unsubscribe = onAuthStateChanged(auth, async (user) => {\n      if (user) {\n        setCurrentUser(user);\n        setUserName(user.displayName || `User-${user.uid.substring(0,5)}`);\n      } else {\n        setCurrentUser(null); setUserName('');\n        try {\n          let __initial_auth_token = 'undefined';\n          if (typeof __initial_auth_token !== 'undefined' && __initial_auth_token) {\n            await signInWithCustomToken(auth, __initial_auth_token);\n          } else {\n            await signInAnonymously(auth);\n          }\n        } catch (error) {\n          console.error(\"Error during auto sign-in:\", error);\n          showNotification(\"Authentication issue. Some features might be limited.\", \"error\");\n        }\n      }\n      setIsAuthReady(true);\n    });\n    return () => unsubscribe();\n  }, [showNotification]);\n\n  const handleSignOut = async () => {\n    if (!auth) { showNotification(\"Auth service not available.\", \"error\"); return; }\n    try {\n      await signOut(auth);\n      setCurrentPage('home');\n      showNotification(\"Signed out successfully.\", \"success\");\n    } catch (error) {\n      console.error(\"Error signing out:\", error);\n      showNotification(\"Error signing out.\", \"error\");\n    }\n  };\n\n  const renderPage = () => {\n    if (!isAuthReady) {\n      return <div className={`flex justify-center items-center h-screen ${accessibilitySettings.fontSize} ${accessibilitySettings.darkMode ? 'bg-gray-900 text-white' : 'bg-gray-100 text-black'}`}><p>Initializing App...</p></div>;\n    }\n    const userId = currentUser ? currentUser.uid : null;\n    const commonProps = { userId, showNotification, accessibilitySettings };\n\n    switch (currentPage) {\n      case 'home': return <HomeScreen setCurrentPage={setCurrentPage} userName={userName} {...commonProps} />;\n      case 'makeAppointment': // Fallthrough to myAppointments for now\n      case 'myAppointments': return <AppointmentsScreen {...commonProps} />;\n      case 'chat': return <ChatScreen {...commonProps} />;\n      case 'prescriptions': return <PrescriptionsScreen {...commonProps} />;\n      default: return <HomeScreen setCurrentPage={setCurrentPage} userName={userName} {...commonProps} />;\n    }\n  };\n\n  const NavItem = ({ page, label, icon: IconComponent }) => (\n    <button\n    onClick={() => setCurrentPage(page)}\n    className={`flex flex-col items-center justify-center p-2 w-full transition-colors duration-200 ease-in-out\n      ${accessibilitySettings.fontSize}\n      ${currentPage === page\n        ? (accessibilitySettings.darkMode ? (accessibilitySettings.highContrast ? 'text-yellow-300' : 'text-blue-400') : (accessibilitySettings.highContrast ? 'text-blue-700 font-bold' : 'text-blue-500'))\n        : (accessibilitySettings.darkMode ? (accessibilitySettings.highContrast ? 'text-gray-400 hover:text-yellow-200' : 'text-gray-400 hover:text-blue-300') : (accessibilitySettings.highContrast ? 'text-gray-600 hover:text-blue-600' : 'text-gray-500 hover:text-blue-400'))\n      }\n      `}\n      >\n      <IconComponent size={24} strokeWidth={currentPage === page ? 2.5 : 2} />\n      <span className=\"text-xs mt-1\">{label}</span>\n      </button>\n  );\n\n  // Apply base font size and high contrast classes to the main container\n  // Dark mode is applied to documentElement\n  let appClasses = `font-sans antialiased flex flex-col min-h-screen transition-colors duration-300 ${accessibilitySettings.fontSize}`;\n  if (accessibilitySettings.darkMode) {\n    appClasses += accessibilitySettings.highContrast ? ' bg-black text-yellow-300' : ' bg-gray-900 text-gray-200';\n  } else {\n    appClasses += accessibilitySettings.highContrast ? ' bg-white text-black border-2 border-blue-900' : ' bg-gray-100 text-gray-800';\n  }\n\n\n  return (\n    <div className={appClasses}>\n    <Notification message={notification.message} type={notification.type} onDismiss={() => setNotification({message: '', type: ''})} darkMode={accessibilitySettings.darkMode} />\n\n    <header className={`p-4 shadow-md flex justify-between items-center sticky top-0 z-40\n      ${accessibilitySettings.darkMode\n        ? (accessibilitySettings.highContrast ? 'bg-black text-yellow-300 border-b-2 border-yellow-400' : 'bg-gray-800 text-white')\n        : (accessibilitySettings.highContrast ? 'bg-white text-blue-700 border-b-2 border-blue-700' : 'bg-blue-600 text-white')}\n        `}>\n        <h1 className=\"text-xl font-semibold\">Medic Assist</h1>\n        <div className=\"flex items-center space-x-2\">\n        {currentUser && (\n          <button onClick={handleSignOut} className={`text-sm flex items-center p-2 rounded-md\n            ${accessibilitySettings.darkMode\n              ? (accessibilitySettings.highContrast ? 'hover:bg-yellow-700 text-yellow-300 border border-yellow-300' : 'hover:bg-gray-700 text-gray-300')\n              : (accessibilitySettings.highContrast ? 'hover:bg-blue-200 text-blue-700 border border-blue-700' : 'hover:bg-blue-700 text-blue-100')}\n              `}>\n              <LogOut size={18} className=\"mr-1\" /> Sign Out\n              </button>\n        )}\n        <button\n        onClick={() => setIsSettingsModalOpen(true)}\n        aria-label=\"Open accessibility settings\"\n        className={`p-2 rounded-md\n          ${accessibilitySettings.darkMode\n            ? (accessibilitySettings.highContrast ? 'hover:bg-yellow-700 text-yellow-300' : 'hover:bg-gray-700 text-gray-300')\n            : (accessibilitySettings.highContrast ? 'hover:bg-blue-200 text-blue-700' : 'hover:bg-blue-700 text-blue-100')}\n            `}\n            >\n            <Settings size={22} />\n            </button>\n            </div>\n            </header>\n\n            <main className=\"flex-grow overflow-y-auto\">\n            {renderPage()}\n            </main>\n\n            <nav className={`fixed bottom-0 left-0 right-0 border-t shadow-t-md flex justify-around items-center h-16 z-40\n              ${accessibilitySettings.darkMode\n                ? (accessibilitySettings.highContrast ? 'bg-black border-t-yellow-400' : 'bg-gray-800 border-gray-700')\n                : (accessibilitySettings.highContrast ? 'bg-white border-t-blue-700' : 'bg-white border-gray-200')}\n                `}>\n                <NavItem page=\"home\" label=\"Home\" icon={Home} />\n                <NavItem page=\"myAppointments\" label=\"Appointments\" icon={CalendarPlus} />\n                <NavItem page=\"chat\" label=\"Chat\" icon={MessageSquare} />\n                <NavItem page=\"prescriptions\" label=\"Prescriptions\" icon={ListChecks} />\n                </nav>\n                <div className=\"h-16\"></div> {/* Spacer for bottom nav */}\n\n                <AccessibilitySettingsModal\n                isOpen={isSettingsModalOpen}\n                onClose={() => setIsSettingsModalOpen(false)}\n                settings={accessibilitySettings}\n                updateSettings={updateAccessibilitySetting}\n                darkMode={accessibilitySettings.darkMode}\n                highContrast={accessibilitySettings.highContrast}\n                fontSizeClass={accessibilitySettings.fontSize}\n                />\n                </div>\n  );\n};\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}